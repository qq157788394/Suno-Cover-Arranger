{"version":3,"sources":["src/pages/lyrics-records/detail/index.tsx","src/pages/lyrics-records/index.tsx"],"sourcesContent":["/**\n * 歌词记录详情组件\n * 展示歌词生成记录的详细信息，包括表单数据和生成的歌词\n */\n\nimport { CopyOutlined } from \"@ant-design/icons\";\nimport { ProCard, ProDescriptions } from \"@ant-design/pro-components\";\nimport { XMarkdown } from \"@ant-design/x-markdown\";\nimport {\n  Button,\n  Drawer,\n  message,\n  Space,\n  Typography,\n  Divider,\n  Segmented,\n} from \"antd\";\nimport React from \"react\";\nimport { MASTER_STYLE_CARDS } from \"@/config/masterStyleConfig\";\nimport {\n  CLOSENESS_LEVEL_OPTIONS,\n  CREATION_MODE_OPTIONS,\n  PERSONA_OPTIONS,\n  RHYME_TYPE_OPTIONS,\n  SONG_LANGUAGE_OPTIONS,\n  SONG_STYLE_OPTIONS,\n  SONG_STRUCTURE_OPTIONS,\n  WORDING_STYLE_OPTIONS,\n} from \"@/config/lyricsEnums\";\nimport { useModel } from \"@umijs/max\";\nimport type { LyricsRecord } from \"@/shared/types/types\";\n\nconst { Paragraph, Text } = Typography;\n\ninterface LyricsRecordDetailProps {\n  record: LyricsRecord;\n  onClose: () => void;\n}\n\nconst LyricsRecordDetail: React.FC<LyricsRecordDetailProps> = ({\n  record,\n  onClose,\n}) => {\n  const { initialState } = useModel(\"@@initialState\");\n\n  // 根据主题设置确定XMarkdown的主题类\n  const isDarkTheme = initialState?.settings?.navTheme === \"realDark\";\n  const markdownThemeClass = isDarkTheme\n    ? \"markdown-body-dark\"\n    : \"markdown-body-light\";\n\n  const handleCopy = async (text: string) => {\n    try {\n      await navigator.clipboard.writeText(text);\n      message.success(\"复制成功\");\n    } catch (_error) {\n      message.error(\"复制失败\");\n    }\n  };\n\n  const getMasterInfo = (masterId: string | undefined) => {\n    if (!masterId) {\n      return undefined;\n    }\n    return MASTER_STYLE_CARDS.find((m) => m.id === masterId);\n  };\n\n  if (!record) {\n    return (\n      <Drawer\n        title=\"歌词生成详情\"\n        placement=\"right\"\n        open={true}\n        size={992}\n        onClose={onClose}\n      >\n        <div style={{ textAlign: \"center\", padding: \"100px 0\" }}>\n          记录不存在\n        </div>\n      </Drawer>\n    );\n  }\n\n  const masterInfo = getMasterInfo(record.form_data.master_id);\n\n  // Segmented选项\n  const segmentedOptions = [\n    { label: \"基本信息\", value: \"basic-info\" },\n    { label: \"大师歌词\", value: \"generated-lyrics\" },\n    { label: \"原始素材\", value: \"raw-material\" },\n    { label: \"参考歌词\", value: \"reference-lyrics\" },\n    { label: \"创作参数\", value: \"creation-parameters\" },\n  ];\n\n  // 当前选中的Segmented项\n  const [activeItem, setActiveItem] = React.useState<string>(\"basic-info\");\n\n  // 滚动到指定元素\n  const scrollToElement = (elementId: string) => {\n    const element = document.getElementById(elementId);\n    if (element) {\n      // 获取当前Drawer的滚动容器\n      const currentDrawer = element.closest(\".ant-drawer\");\n      if (currentDrawer) {\n        const drawerContent = currentDrawer.querySelector(\".ant-drawer-body\");\n        if (drawerContent instanceof HTMLElement) {\n          // 计算滚动位置，考虑到顶部边距\n          const elementTop = element.offsetTop - 57 - 24;\n          drawerContent.scrollTo({\n            top: elementTop,\n            behavior: \"smooth\",\n          });\n        }\n      }\n    }\n  };\n\n  // 监听滚动事件，自动更新activeItem\n  React.useEffect(() => {\n    // 获取当前Drawer的滚动容器\n    const basicInfoElement = document.getElementById(\"basic-info\");\n    if (!basicInfoElement) return;\n\n    const currentDrawer = basicInfoElement.closest(\".ant-drawer\");\n    if (!currentDrawer) return;\n\n    const drawerContent = currentDrawer.querySelector(\".ant-drawer-body\");\n    if (!(drawerContent instanceof HTMLElement)) return;\n\n    const handleScroll = () => {\n      const scrollPosition = drawerContent.scrollTop + 50;\n\n      // 检查每个内容区域的位置\n      for (const option of segmentedOptions) {\n        const element = document.getElementById(option.value);\n        if (element) {\n          const elementTop = element.offsetTop;\n          const elementBottom = elementTop + element.offsetHeight;\n\n          if (scrollPosition >= elementTop && scrollPosition < elementBottom) {\n            setActiveItem(option.value);\n            break;\n          }\n        }\n      }\n    };\n\n    // 添加滚动事件监听\n    drawerContent.addEventListener(\"scroll\", handleScroll);\n\n    // 清理函数\n    return () => {\n      drawerContent.removeEventListener(\"scroll\", handleScroll);\n    };\n  }, [segmentedOptions]);\n\n  return (\n    <Drawer\n      title=\"歌词生成详情\"\n      placement=\"right\"\n      open={true}\n      size={992}\n      onClose={onClose}\n      extra={\n        <Segmented\n          options={segmentedOptions}\n          value={activeItem}\n          onChange={(value) => {\n            setActiveItem(value);\n            scrollToElement(value);\n          }}\n        />\n      }\n    >\n      <ProDescriptions id=\"basic-info\" column={2} title=\"基本信息\">\n        <ProDescriptions.Item label=\"歌曲名称\">\n          {record.form_data.song_name}\n        </ProDescriptions.Item>\n        <ProDescriptions.Item label=\"歌曲语言\">\n          {SONG_LANGUAGE_OPTIONS.find(\n            (item) =>\n              String(item.value) === String(record.form_data.song_language)\n          )?.label || record.form_data.song_language}\n        </ProDescriptions.Item>\n        <ProDescriptions.Item label=\"大师风格\">\n          {masterInfo ? (\n            <Space>\n              <Text>{masterInfo.name}</Text>\n              <Text type=\"secondary\">{masterInfo.description}</Text>\n            </Space>\n          ) : (\n            <Text>无</Text>\n          )}\n        </ProDescriptions.Item>\n        <ProDescriptions.Item label=\"歌曲风格\">\n          {SONG_STYLE_OPTIONS.find(\n            (item) => String(item.value) === String(record.form_data.song_style)\n          )?.label || record.form_data.song_style}\n        </ProDescriptions.Item>\n      </ProDescriptions>\n\n      <Divider />\n\n      <ProCard\n        id=\"generated-lyrics\"\n        title=\"大师歌词\"\n        ghost\n        extra={\n          <Button\n            size=\"small\"\n            type=\"text\"\n            icon={<CopyOutlined />}\n            onClick={() => handleCopy(record.ai_result.lyrics)}\n          >\n            复制歌词\n          </Button>\n        }\n      >\n        <XMarkdown className={markdownThemeClass} config={{ breaks: true }}>\n          {record.ai_result.lyrics}\n        </XMarkdown>\n      </ProCard>\n\n      <Divider />\n\n      <ProCard id=\"raw-material\" title=\"原始素材\" ghost>\n        <XMarkdown className={markdownThemeClass} config={{ breaks: true }}>\n          {record.form_data.raw_material}\n        </XMarkdown>\n      </ProCard>\n\n      <Divider />\n\n      <ProCard id=\"reference-lyrics\" title=\"参考歌词\" ghost>\n        <XMarkdown className={markdownThemeClass} config={{ breaks: true }}>\n          {record.form_data.reference_lyrics || \"无\"}\n        </XMarkdown>\n      </ProCard>\n\n      <Divider />\n\n      <ProDescriptions id=\"creation-parameters\" column={2} title=\"创作参数\">\n        <ProDescriptions.Item label=\"参考歌词\" span={2}></ProDescriptions.Item>\n        <ProDescriptions.Item label=\"措辞要求\">\n          {Array.isArray(record.form_data.wording_style)\n            ? record.form_data.wording_style\n                .map(\n                  (style) =>\n                    WORDING_STYLE_OPTIONS.find(\n                      (item) => String(item.value) === String(style)\n                    )?.label || style\n                )\n                .join(\"、\")\n            : record.form_data.wording_style || \"无\"}\n        </ProDescriptions.Item>\n        <ProDescriptions.Item label=\"贴近度\">\n          {CLOSENESS_LEVEL_OPTIONS.find(\n            (item) => String(item.value) === String(record.form_data.closeness)\n          )?.label || `${record.form_data.closeness}`}\n        </ProDescriptions.Item>\n        <ProDescriptions.Item label=\"创作模式\">\n          {CREATION_MODE_OPTIONS.find(\n            (item) =>\n              String(item.value) === String(record.form_data.creation_mode)\n          )?.label || record.form_data.creation_mode}\n        </ProDescriptions.Item>\n        <ProDescriptions.Item label=\"曲式结构\">\n          {SONG_STRUCTURE_OPTIONS.find(\n            (item) =>\n              String(item.value) === String(record.form_data.song_structure)\n          )?.label || record.form_data.song_structure}\n        </ProDescriptions.Item>\n        <ProDescriptions.Item label=\"叙事人设\">\n          {PERSONA_OPTIONS.find(\n            (item) => String(item.value) === String(record.form_data.persona)\n          )?.label || record.form_data.persona}\n        </ProDescriptions.Item>\n        <ProDescriptions.Item label=\"押韵类型\">\n          {RHYME_TYPE_OPTIONS.find(\n            (item) => String(item.value) === String(record.form_data.rhyme_type)\n          )?.label || record.form_data.rhyme_type}\n        </ProDescriptions.Item>\n        <ProDescriptions.Item label=\"输出数量\">\n          {record.form_data.output_count}\n        </ProDescriptions.Item>\n        <ProDescriptions.Item label=\"AI模型\">\n          {record.ai_result.model}\n        </ProDescriptions.Item>\n        <ProDescriptions.Item label=\"生成时间\">\n          {new Date(record.created_at).toLocaleString(\"zh-CN\")}\n        </ProDescriptions.Item>\n      </ProDescriptions>\n    </Drawer>\n  );\n};\n\nexport default LyricsRecordDetail;\n","/**\n * 歌词记录列表页面\n * 使用ProTable展示所有歌词生成记录\n */\n\nimport { DeleteOutlined, EyeOutlined } from \"@ant-design/icons\";\nimport type { ActionType, ProColumns } from \"@ant-design/pro-components\";\nimport { PageContainer, ProTable } from \"@ant-design/pro-components\";\nimport { useNavigate } from \"@umijs/max\";\nimport { Alert, Button, message, Popconfirm } from \"antd\";\nimport React, { useRef, useState } from \"react\";\nimport { MASTER_STYLE_CARDS } from \"@/config/masterStyleConfig\";\nimport {\n  CLOSENESS_LEVEL_OPTIONS,\n  SONG_LANGUAGE_OPTIONS,\n  SONG_STYLE_OPTIONS,\n} from \"@/config/lyricsEnums\";\nimport { useLyricsRecords } from \"@/hooks/useLyricsRecords\";\nimport { db } from \"@/services/db\";\nimport type { LyricsRecord } from \"@/shared/types/types\";\nimport LyricsRecordDetail from \"./detail\"; // 导入详情组件\n\nconst LyricsRecordsPage: React.FC = () => {\n  const navigate = useNavigate();\n  const { deleteRecord } = useLyricsRecords();\n  const actionRef = useRef<ActionType>(null);\n  const [loading, setLoading] = useState<boolean>(false);\n  const [open, setOpen] = useState<boolean>(false);\n  const [selectedRecord, setSelectedRecord] = useState<LyricsRecord | null>(\n    null\n  );\n\n  const handleDelete = async (id: number) => {\n    try {\n      const result = await deleteRecord(id);\n      if (result.success) {\n        message.success(\"删除成功\");\n        actionRef.current?.reload();\n        setOpen(false); // 删除后关闭Drawer\n        setSelectedRecord(null);\n      } else {\n        message.error(\"删除失败\");\n      }\n    } catch (_error) {\n      message.error(\"删除失败\");\n    }\n  };\n\n  const handleView = (record: LyricsRecord) => {\n    setSelectedRecord(record);\n    setOpen(true);\n  };\n\n  const handleDrawerClose = () => {\n    setOpen(false);\n    setSelectedRecord(null);\n  };\n\n  const handleDrawerDelete = () => {\n    // 由于详情组件已移除删除功能，此函数不再需要\n    // 但为了保持组件接口一致性，保留此函数\n  };\n\n  /**\n   * 获取歌词记录数据\n   * 处理分页和排序逻辑\n   */\n  const fetchLyricsRecords = async (params: any, sort: any) => {\n    setLoading(true);\n    try {\n      const records = await db.getAllLyricsRecords();\n\n      let filteredRecords = [...records];\n\n      if (params.current && params.pageSize) {\n        const start = (params.current - 1) * params.pageSize;\n        const end = start + params.pageSize;\n        filteredRecords = filteredRecords.slice(start, end);\n      }\n\n      if (sort && Object.keys(sort).length > 0) {\n        const sortKey = Object.keys(sort)[0];\n        const sortOrder = sort[sortKey];\n        filteredRecords.sort((a, b) => {\n          const aVal = a[sortKey as keyof LyricsRecord];\n          const bVal = b[sortKey as keyof LyricsRecord];\n          if (aVal === undefined && bVal === undefined) return 0;\n          if (aVal === undefined) return 1;\n          if (bVal === undefined) return -1;\n          if (sortOrder === \"ascend\") {\n            return aVal > bVal ? 1 : -1;\n          } else {\n            return aVal < bVal ? 1 : -1;\n          }\n        });\n      }\n\n      return {\n        data: filteredRecords,\n        success: true,\n        total: records.length,\n      };\n    } catch (_error) {\n      message.error(\"加载数据失败\");\n      return {\n        data: [],\n        success: false,\n        total: 0,\n      };\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const columns: ProColumns<LyricsRecord>[] = [\n    {\n      title: \"歌曲名称\",\n      dataIndex: [\"form_data\", \"song_name\"],\n      width: 150,\n      fixed: \"left\",\n      ellipsis: true,\n    },\n    {\n      title: \"风格大师\",\n      dataIndex: [\"form_data\", \"master_id\"],\n      width: 120,\n      render: (_, record) => {\n        const masterId = record.form_data.master_id;\n        if (!masterId) {\n          return \"无\";\n        }\n        const master = MASTER_STYLE_CARDS.find((m) => m.id === masterId);\n        return master ? master.name : masterId;\n      },\n    },\n    {\n      title: \"语言\",\n      dataIndex: [\"form_data\", \"song_language\"],\n      width: 100,\n      render: (_, record) => {\n        const language = SONG_LANGUAGE_OPTIONS.find(\n          (item) =>\n            String(item.value) === String(record.form_data.song_language)\n        );\n        return language?.label || record.form_data.song_language;\n      },\n    },\n    {\n      title: \"风格\",\n      dataIndex: [\"form_data\", \"song_style\"],\n      width: 100,\n      render: (_, record) => {\n        const style = SONG_STYLE_OPTIONS.find(\n          (item) => String(item.value) === String(record.form_data.song_style)\n        );\n        return style?.label || record.form_data.song_style;\n      },\n    },\n    {\n      title: \"贴近度\",\n      dataIndex: [\"form_data\", \"closeness\"],\n      width: 100,\n      render: (_, record) => {\n        const closeness = record.form_data.closeness;\n        const closenessOption = CLOSENESS_LEVEL_OPTIONS.find(\n          (item) => String(item.value) === String(closeness)\n        );\n        return closenessOption?.label || `${closeness}级`;\n      },\n    },\n    {\n      title: \"生成时间\",\n      dataIndex: \"created_at\",\n      width: 180,\n      valueType: \"dateTime\",\n      sorter: true,\n      defaultSortOrder: \"descend\",\n    },\n    {\n      title: \"操作\",\n      valueType: \"option\",\n      width: 150,\n      fixed: \"right\",\n      render: (_, record) => [\n        <Button\n          key=\"view\"\n          type=\"primary\"\n          size=\"small\"\n          icon={<EyeOutlined />}\n          onClick={() => handleView(record)}\n        >\n          查看\n        </Button>,\n        <Popconfirm\n          key=\"delete\"\n          title=\"确认删除\"\n          description=\"确定要删除这条记录吗？\"\n          onConfirm={() => record.id && handleDelete(record.id)}\n          okText=\"确定\"\n          cancelText=\"取消\"\n        >\n          <Button size=\"small\" danger icon={<DeleteOutlined />}>\n            删除\n          </Button>\n        </Popconfirm>,\n      ],\n    },\n  ];\n\n  return (\n    <PageContainer>\n      <Alert\n        title=\"生成记录仅保存在本地设备，不会上传至服务器，更换设备或浏览器后记录将无法查看。\"\n        banner\n        style={{ marginBottom: 24 }}\n      />\n      <ProTable<LyricsRecord>\n        headerTitle=\"大师写歌词生成记录\"\n        columns={columns}\n        actionRef={actionRef}\n        request={fetchLyricsRecords}\n        rowKey=\"id\"\n        search={false}\n        pagination={{\n          defaultPageSize: 20,\n          showSizeChanger: true,\n          showQuickJumper: true,\n          showTotal: (total) => `共 ${total} 条记录`,\n        }}\n        scroll={{ x: \"max-content\" }}\n        loading={loading}\n        toolBarRender={() => [\n          <Button\n            key=\"create\"\n            type=\"primary\"\n            onClick={() => navigate(\"/lyrics-craft\")}\n          >\n            创建新歌词\n          </Button>,\n        ]}\n      />\n\n      {/* 歌词详情Drawer */}\n      {selectedRecord && (\n        <LyricsRecordDetail\n          record={selectedRecord}\n          onClose={handleDrawerClose}\n        />\n      )}\n    </PageContainer>\n  );\n};\n\nexport default LyricsRecordsPage;\n"],"names":[],"mappings":"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"}