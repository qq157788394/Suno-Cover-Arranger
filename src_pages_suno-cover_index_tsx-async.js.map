{"version":3,"sources":["src/components/ConfirmDialog.tsx","src/components/ProTableWrapper.tsx","src/components/ResultCard.tsx","src/components/index.ts","src/config/prompts.ts","src/pages/suno-cover/config/validationConfig.ts","src/pages/suno-cover/index.tsx","src/pages/suno-cover/utils/dataLoader.ts","src/services/ai/baseAIService.ts","src/services/ai/container.ts","src/services/ai/models/deepseekService.ts","src/services/ai/models/geminiService.ts","src/services/ai/models/mimoService.ts","src/services/mockData.ts","src/shared/utils/clipboard.ts","src/shared/utils/format.ts","src/shared/utils/index.ts","src/shared/utils/validation.ts"],"sourcesContent":["import { Modal } from 'antd';\nimport React from 'react';\n\ninterface ConfirmDialogProps {\n  /** 对话框标题 */\n  title?: string;\n  /** 对话框内容 */\n  content?: React.ReactNode;\n  /** 是否显示对话框 */\n  visible: boolean;\n  /** 确定按钮文本 */\n  okText?: string;\n  /** 取消按钮文本 */\n  cancelText?: string;\n  /** 确定按钮类型 */\n  okType?: 'primary' | 'default' | 'dashed' | 'text' | 'link' | 'danger';\n  /** 是否显示关闭按钮 */\n  closable?: boolean;\n  /** 是否显示遮罩 */\n  mask?: boolean;\n  /** 点击遮罩是否关闭对话框 */\n  maskClosable?: boolean;\n  /** 确认回调函数 */\n  onConfirm: () => void | Promise<void>;\n  /** 取消回调函数 */\n  onCancel: () => void;\n  /** 对话框宽度 */\n  width?: number | string;\n  /** 对话框样式 */\n  style?: React.CSSProperties;\n  /** 对话框内容样式 */\n  contentStyle?: React.CSSProperties;\n}\n\nconst ConfirmDialog: React.FC<ConfirmDialogProps> = ({\n  title = '确认操作',\n  content = '确定要执行此操作吗？',\n  visible,\n  okText = '确定',\n  cancelText = '取消',\n  okType = 'primary',\n  closable = true,\n  mask = true,\n  maskClosable = false,\n  onConfirm,\n  onCancel,\n  width = 416,\n  style,\n  contentStyle,\n}) => {\n  // 处理确认操作，支持异步操作\n  const handleOk = async () => {\n    try {\n      await onConfirm();\n    } catch (error) {\n      console.error('确认操作失败:', error);\n    }\n  };\n\n  return (\n    <Modal\n      title={title}\n      visible={visible}\n      onOk={handleOk}\n      onCancel={onCancel}\n      okText={okText}\n      cancelText={cancelText}\n      okType={okType}\n      closable={closable}\n      mask={mask}\n      maskClosable={maskClosable}\n      width={width}\n      style={style}\n    >\n      <div style={contentStyle}>{content}</div>\n    </Modal>\n  );\n};\n\nexport default ConfirmDialog;\n","import {\n  type ProColumns,\n  ProTable,\n  type RequestData,\n} from '@ant-design/pro-components';\nimport { Button, Space } from 'antd';\nimport React from 'react';\n\ninterface ProTableWrapperProps<T extends Record<string, any>> {\n  /** 表格列配置 */\n  columns: ProColumns<T>[];\n  /** 数据请求函数 */\n  request?: (\n    params: any,\n    sort: Record<string, 'ascend' | 'descend' | null>,\n    filter: Record<string, (string | number)[] | null>,\n  ) => Promise<Partial<RequestData<T>>>;\n  /** 数据源 */\n  dataSource?: T[];\n  /** 加载状态 */\n  loading?: boolean;\n  /** 表格标题 */\n  title?: string;\n  /** 是否显示搜索栏 */\n  showSearch?: boolean;\n  /** 是否显示操作按钮 */\n  showActions?: boolean;\n  /** 自定义操作按钮 */\n  actionButtons?: React.ReactNode[];\n  /** 表格行键 */\n  rowKey?: string;\n  /** 分页配置 */\n  pagination?: any;\n  /** 搜索配置 */\n  searchConfig?: {\n    labelWidth?: 'auto' | number;\n    defaultCollapsed?: boolean;\n    span?: number;\n  };\n  /** 表格选项配置 */\n  options?: {\n    reload?: () => void;\n    density?: boolean;\n    fullScreen?: boolean;\n  };\n  /** 滚动配置 */\n  scroll?: {\n    x?: number | string;\n    y?: number | string;\n  };\n  /** 表格变化处理函数 */\n  onChange?: (pagination: any, filters: any, sorter: any, extra: any) => void;\n}\n\nconst ProTableWrapper = <T extends Record<string, any>>({\n  columns,\n  request,\n  dataSource,\n  loading = false,\n  title,\n  showSearch = true,\n  showActions = false,\n  actionButtons = [],\n  rowKey = 'id',\n  pagination = {\n    pageSize: 10,\n    showSizeChanger: true,\n    showQuickJumper: true,\n    showTotal: (total: number) => `共 ${total} 条记录`,\n  },\n  searchConfig = {\n    labelWidth: 'auto',\n    defaultCollapsed: false,\n    span: 6,\n  },\n  options = {\n    reload: () => {},\n    density: true,\n    fullScreen: true,\n  },\n  scroll,\n  onChange,\n}: ProTableWrapperProps<T>) => {\n  return (\n    <>\n      {showActions && actionButtons.length > 0 && (\n        <Space style={{ marginBottom: 16 }}>{actionButtons}</Space>\n      )}\n      <ProTable\n        rowKey={rowKey}\n        columns={columns}\n        request={request}\n        dataSource={dataSource}\n        loading={loading}\n        pagination={pagination}\n        headerTitle={title}\n        options={options}\n        scroll={scroll}\n        search={showSearch ? searchConfig : false}\n        onChange={(_pagination, _filters, _sorter, _extra) =>\n          onChange?.(_pagination, _filters, _sorter, _extra)\n        }\n      />\n    </>\n  );\n};\n\nexport default ProTableWrapper;\n","// Ant Design Icons\nimport { CopyOutlined } from '@ant-design/icons';\n\n// Ant Design Pro Components\nimport { ProCard } from '@ant-design/pro-components';\n\n// Ant Design Base Components\nimport { Button, Input } from 'antd';\n\n// React\nimport React, { memo } from 'react';\n\n// 可复用的结果卡片组件\nconst ResultCard = memo(\n  ({\n    title,\n    value,\n    onCopy,\n  }: {\n    title: string;\n    value: string;\n    onCopy: () => void;\n  }) => {\n    return (\n      <ProCard\n        title={title}\n        extra={\n          <Button\n            type=\"text\"\n            icon={<CopyOutlined />}\n            onClick={onCopy}\n            disabled={!value}\n            size=\"small\"\n          >\n            复制\n          </Button>\n        }\n        style={{ height: '100%' }}\n      >\n        <Input.TextArea\n          value={value}\n          readOnly\n          placeholder={`生成的 ${title} 提示词将展示在此处…`}\n          showCount\n          rows={40}\n        />\n      </ProCard>\n    );\n  },\n);\n\nexport default ResultCard;\n","/**\n * 这个文件作为组件的目录\n * 目的是统一管理对外输出的组件，方便分类\n */\n\nimport ConfirmDialog from \"./ConfirmDialog\";\nimport ProTableWrapper from \"./ProTableWrapper\";\nimport ResultCard from \"./ResultCard\";\nimport ApiKeyAlert from \"./ApiKeyAlert\";\n\nexport { ProTableWrapper, ConfirmDialog, ResultCard, ApiKeyAlert };\n","// 提示词配置文件 - 只有人类可以修改此文件\n// 此文件包含AI服务使用的核心提示词，任何修改都需要人类审核\n\n/**\n * 系统提示词 - 定义AI助手的角色、职责和严格的输出规则\n */\nexport const SYSTEM_PROMPT = `You are a senior Suno prompt engineer. Your job is to generate high-quality \"Styles\" and \"Lyrics\" prompts for cover songs in Suno (v3/v4/v5), especially for Chinese and East Asian songs (Mandarin, Cantonese, etc.).\n\nYou MUST strictly follow ALL rules below:\n\n0. Highest priority rule about Styles length\n- The single most important constraint for the Styles section is LENGTH.\n- Under NO circumstances may the Styles section exceed 900 characters (including spaces).\n- If following any other instruction would cause the Styles section to go over 900 characters, you MUST ignore that other instruction and keep the Styles section within 900 characters.\n\n1. Never modify lyrics\n- The user will provide complete lyrics in the original language (often Chinese).\n- You MUST treat these lyrics as immutable text.\n- You MUST NOT change, rewrite, translate, add, or delete any words, punctuation, or line breaks.\n- You MUST NOT invent any new lyrics.\n- You MUST preserve the original order of all lyric lines.\n\n2. Always output TWO parts only\nYou must ALWAYS output exactly two sections in this order:### Styles\n\\`\\`\\`text\n(Styles content here)\n\\`\\`\\`\n\n### Lyrics\n\\`\\`\\`text\n(Lyrics content here)\n\\`\\`\\`Do NOT output anything before or after these two sections.\n\n3. Styles requirements\n- Language: English only.\n- Length: you MUST NOT exceed 900 characters, including spaces. Your target range is 750–850 characters. If your drafted Styles text is longer than 900 characters, you MUST shorten and compress it BEFORE you output your final answer.\n- Purpose: describe the overall sound of this specific COVER VERSION, including:\n  - Overall genres / style labels (e.g., pop, rock, ballad, symphonic, ambient, etc., combined as needed).\n  - Vocal character and evolution (e.g., intimate, breathy, warm, powerful, belt, falsetto, etc.).\n  - Dynamic contour across the whole song (e.g., restrained verse → build-up → explosive chorus → drop → grand finale).\n  - Core instrumentation and arrangement (e.g., solo piano, acoustic guitar, distorted electric guitars, full string ensemble, live drums, synth pads, etc.).\n  - Production / space feel if relevant (e.g., studio clean vs live concert feeling, dry vs reverb-heavy, wide stereo image, etc.).\n- The Styles description MUST:\n  - Stay consistent with the target artist and reference songs provided by the user.\n  - Respect the user’s style notes and extra notes as much as possible.\n- Writing style for Styles:\n  - Use dense, information-rich sentences.\n  - Avoid repeating the same idea with different words.\n  - Do not list long chains of near-synonyms.\n  - Prioritize key information about genre, vocal character, dynamics, instrumentation, and mood; omit minor decorative details if necessary to stay under the length limit.\n\n4. Lyrics requirements: section-by-section attribute list\nFor the \"Lyrics\" part, you MUST use an attribute-list format:\n\n- For each SECTION:\n  1) Use a standardized English section label in square brackets, for example:\n     [Intro], [Verse 1], [Verse 2], [Pre-Chorus], [Chorus], [Chorus 2], [Bridge], [Interlude], [Outro].\n  2) Under that label, write 2–4 attribute lines in the form:\n     [Key: Value]\n  3) After the attribute lines, paste the original lyrics for that section EXACTLY as provided by the user.\n\nExample pattern (this is only a pattern, NOT actual content):\n\n[Verse 1]\n[Vocal: Warm, intimate female vocal, close-mic]\n[Dynamics: Soft and restrained, subtle build into the last line]\n[Instrument: Piano and subtle strings, light percussion]\n[Mood: Nostalgic, bittersweet, reflective]\n\n(Original lyrics lines here, unchanged)\n\n5. Standardized section labels and mapping from user labels\n- The user’s raw lyrics may contain non-standard labels such as:\n  【主歌】, 【主歌1】, [主歌], [verse], [Verse], 【副歌】, [chorus], 【桥段】, 【前奏】, 【间奏】, etc.\n- Your job is to INTERPRET these raw labels and map them onto standardized English labels in your output.\n- Mapping guidelines:\n  - All main narrative sections → [Verse 1], [Verse 2], [Verse 3], … in order of appearance.\n  - Repeated hook / main message sections → [Chorus], [Chorus 2], [Chorus 3], … in order of appearance.\n  - Transitional build sections → [Pre-Chorus] (and numbered if multiple distinct ones).\n  - Intro sections → [Intro].\n  - Instrumental breaks → [Interlude].\n  - Bridges → [Bridge].\n  - Ending sections → [Outro].\n- You are allowed to change ONLY the section labels. You are NOT allowed to change the lyrics content or order.\n\n6. Attribute keys and vocabulary\n- All attribute keys and values MUST be in English.\n- Use the following keys whenever helpful (you do NOT need to use all of them for every section):\n  - Vocal, Dynamics, Instrument, Texture, Mood, Arrangement, Harmony, Rhythm, FX.\n- For values, you should use short, precise musical phrases. You can combine and reuse terms such as:\n  - Vocal: warm, airy, breathy, raspy, powerful, intimate, close-mic, distant, belt, falsetto, head voice, chest voice, mixed voice, double-tracked, harmonized, a cappella, call and response, etc.\n  - Dynamics: soft, medium, loud, gradually building, crescendo, decrescendo, explosive, accented, staccato, legato, sustained, etc.\n  - Instrument: solo piano, acoustic guitar, electric guitar, distorted guitar, bass, string quartet, full string ensemble, synth pad, analog synth bass, live drum kit, electronic drums, etc.\n  - Texture: sparse, dense, layered, atmospheric, monophonic, homophonic, polyphonic, wide stereo, narrow, etc.\n  - Mood: nostalgic, melancholic, hopeful, uplifting, bittersweet, dark, tense, peaceful, triumphant, etc.\n  - Arrangement / Rhythm / FX: verse-chorus-bridge form, syncopated groove, straight 4/4, reverb-heavy, delay, compression, distortion, filtered intro, etc.\n- These terms are inspired by the official “Music Glossary for Suno”. You do not need to explain them; just use them appropriately in Keys and Values.\n\n7. Handling instrumental sections\n- If a section has NO lyrics (e.g., Intro, Interlude, Outro), you MUST:\n  - Still create the section label and 2–4 attribute lines.\n  - Make it explicit that it is instrumental only, for example:\n    [Vocal: No vocal, purely instrumental section]\n  - Do NOT fabricate any humming or nonsense syllables.\n\n8. Language rules\n- Styles: English only.\n- All [Key: Value] attribute lines: English only.\n- Original lyrics: keep in the original language exactly as provided (often Chinese).\n- You may read and understand the user’s Chinese notes and labels, but you MUST NOT copy Chinese text into Styles or into any [Key: Value] line.\n\n9. Internal QA checklist before finalizing your answer\nBefore you output the result, mentally check that:\n\n- You have output exactly two sections with the exact headings:\n  \"### Styles\" and \"### Lyrics\".\n- The Styles section is written in English and is clearly under 900 characters (including spaces). If it might be close to the limit, you MUST shorten it further before outputting.\n- Every lyric section has:\n  - One standardized English section label in square brackets.\n  - 2–4 [Key: Value] lines with English Keys and Values.\n  - The original lyrics reproduced exactly, with the same lines and order.\n- You have not invented, removed, or altered any lyrics.\n- You have reasonably interpreted user labels into standardized English labels and numbered them in order of appearance.\n- Styles and Lyrics are consistent with each other (no contradictions in dynamics, instrumentation, or mood).\n\nIf any rule conflicts with another, ALWAYS prioritize preserving the original lyrics and keeping the required output format.`;\n\n/**\n * 用户提示词模板 - 生成用户提示词的基础模板\n */\nexport const USER_PROMPT_TEMPLATE = `You are generating Suno \"Styles\" and \"Lyrics\" prompts for a COVER version of a song. Read all the information below carefully and then produce the final output strictly following the system rules and the format requirements.\n\n------------------------------\n[1] Song language and context\n------------------------------\n\n- Song language: {fullLanguageName} .\n- The lyrics are provided in this language and MUST be preserved exactly.\n- This is a COVER version, not an original composition. You should shape the sound to match the target artist and references below.\n\n------------------------------\n[2] Target artist and references\n------------------------------\n\n- Target cover artist (user input, may be in Chinese or another language):\n  \"{targetArtist}\"\n\n- Reference songs from the user (if any):\n  {referenceSongsBlock}\n\nThese names indicate the general style, vocal approach, and arrangement flavor you should lean toward. You do NOT need to describe these songs explicitly, but your Styles and section attributes should feel consistent with this artist and these references.\n\n------------------------------\n[3] User style notes (free-form, for your understanding only)\n------------------------------\n\nThe user has provided extra style notes in their own words (often Chinese). You may use these notes to refine dynamics, emotion curve, and arrangement choices, but they are NOT additional lyrics.\n\n- User style note (may be empty):\n  \"{styleNote}\"\n\n- Extra note (may be empty, can include scene / audience / platform, etc.):\n  \"{extraNote}\"\n\nYou can understand these notes in any language, but you MUST still output Styles and all [Key: Value] attributes in English.\n\n------------------------------\n[4] User lyrics (DO NOT MODIFY)\n------------------------------\n\nBelow are the complete lyrics provided by the user, with their own section labels and line breaks. They may use Chinese labels such as 【主歌】、【副歌】 or non-standard English labels like [verse], [chorus], etc.\n\nYou MUST:\n- Keep all lyric lines exactly as they are.\n- Use these labels only to infer your standardized section labels.\n- NOT copy these raw labels into your final output; instead, replace them with standardized English labels such as [Verse 1], [Chorus], [Bridge], [Intro], etc.\n\nHere are the raw lyrics:\n\n{lyricsRaw}\n\n------------------------------\n[5] Your output task\n------------------------------\n\nNow, using everything above and following the system rules, you MUST:\n\n1) Generate the \"Styles\" section in English\n- A single paragraph of 800–900 characters (hard limit 1000).\n- It should describe the overall sound of this COVER version, taking into account:\n  - The song language: {fullLanguageName} .\n  - The target artist: {targetArtist}.\n  - The reference songs (if any).\n  - The user style notes and extra note.\n- Mention genre / style, vocal character, dynamic contour, instrumentation, arrangement, and production / space feel.\n\n2) Generate the \"Lyrics\" section as an attribute list\n- Split the song into logical sections using standardized English labels in square brackets:\n  [Intro], [Verse 1], [Verse 2], [Pre-Chorus], [Chorus], [Chorus 2], [Bridge], [Interlude], [Outro], etc.\n- For each section:\n  - Create 2–4 attribute lines in the form [Key: Value], using English Keys (Vocal, Dynamics, Instrument, Texture, Mood, Arrangement, etc.) and concise English Values.\n  - Then paste the original lyric lines for that section exactly as provided, without any change.\n- For purely instrumental sections (no lyrics), only write the attributes and make it clear there is no vocal.\n\n------------------------------\n[6] Output format (VERY IMPORTANT)\n------------------------------\n\nReturn your answer in EXACTLY this Markdown structure and nothing else:\n\n### Styles\n\\`\\`\\`text\n(put the Styles paragraph here in English, MUST be under 900 characters)\n\\`\\`\\`\n\n### Lyrics\n\\`\\`\\`text\n(put the full Lyrics attribute list here, with all sections, attributes, and original lyrics)\n\\`\\`\\`\n\nDo NOT add any extra headings, explanations, or comments outside this format.`;\n","/**\n * 表单校验配置模块\n * 集中管理所有字段的校验规则和字段配置，提高可维护性和一致性\n */\n\n/**\n * 统一的表单校验规则配置\n */\nexport const VALIDATION_RULES = {\n  // 歌曲名称校验规则\n  songName: [\n    { required: true, message: '请填写歌曲名称' },\n    { max: 100, message: '歌曲名称不能超过 100 个字符' },\n    {\n      pattern: /^[\\u4e00-\\u9fa5a-zA-Z0-9\\s\\-_（）《》【】]+$/,\n      message: '歌曲名称只能包含中文、英文、数字、空格和常用符号',\n    },\n  ],\n\n  // 艺术家姓名校验规则\n  artistName: [\n    { required: true, message: '请填写模仿的艺术家姓名' },\n    { max: 50, message: '艺术家姓名不能超过 50 个字符' },\n    {\n      pattern: /^[\\u4e00-\\u9fa5a-zA-Z\\s·•]+$/,\n      message: '艺术家姓名只能包含中文、英文、空格和间隔符',\n    },\n  ],\n\n  // 参考歌曲名称校验规则\n  referenceSongTitle: [\n    { required: true, message: '歌曲名称不能为空' },\n    { max: 50, message: '歌曲名称不能超过 50 个字符' },\n  ],\n\n  // 参考歌曲艺术家校验规则\n  referenceSongArtist: [{ max: 30, message: '演唱者名称不能超过 30 个字符' }],\n\n  // 歌词校验规则\n  lyrics: [\n    { required: true, message: '请输入段落与歌词' },\n    { min: 10, message: '歌词内容至少需要 10 个字符' },\n    { max: 2000, message: '段落歌词长度不能超过 2000 字' },\n    {\n      validator: (_: any, value: string) => {\n        if (!value) return Promise.resolve();\n\n        // 检查是否包含段落标记\n        const hasSectionMarkers = /[【】[\\]<>（）]/.test(value);\n        if (!hasSectionMarkers) {\n          return Promise.reject(\n            new Error('建议使用【主歌】、【副歌】等标记划分段落'),\n          );\n        }\n\n        return Promise.resolve();\n      },\n    },\n  ],\n\n  // 语言选择校验规则\n  language: [{ required: true, message: '请选择歌曲语言' }],\n};\n\n/**\n * 字段配置对象\n * 定义每个字段的通用属性配置\n */\nexport const FIELD_CONFIGS = {\n  songName: {\n    showCount: true,\n    maxLength: 100,\n  },\n  artistName: {\n    showCount: true,\n    maxLength: 50,\n  },\n  referenceSongTitle: {\n    showCount: true,\n    maxLength: 50,\n  },\n  referenceSongArtist: {\n    showCount: true,\n    maxLength: 30,\n  },\n  lyrics: {\n    showCount: true,\n    autoSize: { minRows: 10, maxRows: 12 },\n  },\n};\n","/**\n * Suno Cover 翻唱提示词生成页面\n * 负责处理用户输入的翻唱配置信息，并生成高质量的 Suno 翻唱歌曲提示词\n */\n\n// Ant Design Icons\nimport { CopyOutlined } from '@ant-design/icons';\n// Ant Design Pro Components\nimport {\n  PageContainer,\n  ProCard,\n  ProForm,\n  ProFormList,\n  ProFormSelect,\n  ProFormText,\n  ProFormTextArea,\n} from '@ant-design/pro-components';\n// Umi\nimport { history, useSearchParams } from '@umijs/max';\n// Ant Design Base Components\nimport {\n  Alert,\n  Button,\n  Col,\n  Flex,\n  Form,\n  Input,\n  Modal,\n  message,\n  Row,\n  Space,\n  Spin,\n} from 'antd';\n// React\nimport React, { useCallback, useEffect, useRef, useState } from 'react';\n// 可复用的结果卡片组件\nimport { ResultCard } from '@/components';\n\n// Custom Hook\nimport { useApiKey } from '@/hooks/useApiKey';\nimport { container } from '@/services/ai/container';\nimport { DeepSeekService } from '@/services/ai/models/deepseekService';\nimport { GeminiService } from '@/services/ai/models/geminiService';\nimport { MimoService } from '@/services/ai/models/mimoService';\nimport { db } from '@/services/db';\nimport { mockGenerate } from '@/services/mockData';\n// Custom Services and Types\nimport type { GenerateRequest, GenerateResponse } from '@/shared/types/types';\n// Shared Utils\nimport { copyToClipboard } from '@/shared/utils';\n\n// 模块化导入\nimport { FIELD_CONFIGS, VALIDATION_RULES } from './config/validationConfig';\nimport { loadRecordData } from './utils/dataLoader';\n\nconst SunoCover: React.FC = () => {\n  // 使用antd的message hook\n  const [messageApi, contextHolder] = message.useMessage();\n  // 使用自定义hook管理API Key和模型\n  const {\n    apiKey,\n    model,\n    isLoading: apiKeyLoading,\n    saveApiKey,\n    deleteApiKey,\n    validateApiKey,\n  } = useApiKey();\n\n  // 表单实例，用于管理翻唱配置表单的数据\n  const [form] = Form.useForm<GenerateRequest>();\n\n  // ProFormList实例，用于直接控制参考歌曲列表数据\n  const proFormListRef = useRef<any>(null);\n\n  // 获取URL参数\n  const [searchParams] = useSearchParams();\n\n  // 简化的状态管理\n  const [loading, setLoading] = useState(false); // 加载状态\n  const [stylesResult, setStylesResult] = useState(''); // Styles提示词结果\n  const [lyricsResult, setLyricsResult] = useState(''); // Lyrics提示词结果\n  const [isFormInitialized, setIsFormInitialized] = useState(false); // 表单是否已初始化\n\n  // 检查API Key\n  const checkApiKey = useCallback(() => {\n    if (!apiKey) {\n      Modal.confirm({\n        title: '尚未设置 AI API Key',\n        content: '设置完成后即可使用该功能，是否现在去设置？',\n        okText: '去设置',\n        cancelText: '取消',\n        onOk() {\n          history.push('/ai-setting');\n        },\n      });\n      return false;\n    }\n    return true;\n  }, [apiKey, history]);\n\n  // 统一的数据库保存方法（可复用于正常提交和模拟生成）\n  const saveRecordToDB = useCallback(\n    async (values: any, result: any, isMock: boolean = false) => {\n      try {\n        const userId = 1; // 模拟当前用户ID\n\n        // 获取参考歌曲\n        const referenceSongsArray = Array.isArray(values.reference_songs)\n          ? values.reference_songs\n          : [];\n\n        const referenceSongs = JSON.stringify(\n          referenceSongsArray.filter(\n            (song: any) => song && song.title && typeof song.title === 'string',\n          ),\n        );\n\n        // 确保必填字段有默认值\n        const songLanguage = values.song_language || 'Mandarin';\n        const targetSinger = values.target_artist || '未知艺术家';\n        const lyrics = values.lyrics_raw || '无歌词';\n\n        // 准备保存到数据库的记录\n        const recordToSave = {\n          user_id: userId,\n          user_input: {\n            song_name: values.song_name,\n            song_language: songLanguage,\n            target_singer: targetSinger,\n            reference_songs: referenceSongs,\n            style_description: values.style_note || '',\n            lyrics,\n            scene: values.extra_note || '',\n          },\n          ai_result: {\n            styles: result.styles,\n            lyrics: result.lyrics,\n            model: isMock ? 'mock' : model, // 区分正常生成和模拟生成\n          },\n        };\n\n        const record = await db.createPromptRecord(recordToSave);\n\n        messageApi.success('记录已成功保存');\n\n        return record;\n      } catch (dbError) {\n        throw dbError;\n      }\n    },\n    [model, messageApi],\n  );\n\n  // 从URL参数加载记录数据并初始化表单\n  useEffect(() => {\n    const loadRecordFromURL = async () => {\n      const recordId = searchParams.get('recordId');\n\n      // 使用模块化函数加载数据\n      const { formValues, hasRecord } = await loadRecordData(recordId);\n\n      // 设置结果数据\n      if (hasRecord) {\n        setStylesResult(formValues.stylesResult || '');\n        setLyricsResult(formValues.lyricsResult || '');\n      }\n\n      // 设置表单值（无论是否有数据都设置）\n      form.setFieldsValue(formValues);\n\n      // 标记表单为已初始化\n      setIsFormInitialized(true);\n    };\n\n    loadRecordFromURL();\n  }, [searchParams, form]);\n\n  // 选择AI服务\n  const getAIService = (): {\n    generate: (request: GenerateRequest) => Promise<GenerateResponse>;\n  } => {\n    switch (model) {\n      case 'deepseek':\n        return container.resolve(DeepSeekService);\n      case 'gemini':\n        return container.resolve(GeminiService);\n      case 'mimo':\n        return container.resolve(MimoService);\n      default:\n        throw new Error(`Unsupported AI model: ${model}`);\n    }\n  };\n\n  /**\n   * 表单提交处理函数\n   * 验证用户输入，调用选定的 AI 模型 API 生成提示词，并保存结果到数据库\n   */\n  const handleSubmit = useCallback(\n    async (values: GenerateRequest) => {\n      if (!checkApiKey()) return;\n\n      setLoading(true);\n      try {\n        // 使用 DI 容器获取对应的服务实例\n        const aiService = getAIService();\n        const result = await aiService.generate({\n          ...values,\n          api_key: apiKey,\n          model,\n        });\n\n        setStylesResult(result.styles);\n        setLyricsResult(result.lyrics);\n\n        messageApi.success('提示词已成功生成！');\n\n        // 使用统一的数据库保存方法\n        await saveRecordToDB(values, result, false);\n      } catch (error) {\n        const errorMessage =\n          error instanceof Error\n            ? error.message\n            : `调用 ${model} API 失败，请检查 API Key 或稍后再试。`;\n        messageApi.error(errorMessage);\n      } finally {\n        setLoading(false);\n      }\n    },\n    [checkApiKey, apiKey, model, messageApi],\n  );\n\n  /**\n   * 模拟生成提示词函数\n   * 用于开发和测试，生成模拟的 Styles 和 Lyrics 提示词，并保存结果到数据库\n   */\n  const handleMockGenerate = useCallback(async () => {\n    setLoading(true);\n    try {\n      // 获取表单值并记录\n      const formValues = form.getFieldsValue();\n\n      // 调用模拟生成服务\n      const result = await mockGenerate();\n\n      // 回填页面内容\n      setStylesResult(result.styles);\n      setLyricsResult(result.lyrics);\n\n      messageApi.success('模拟生成已完成');\n\n      // 使用统一的数据库保存方法（标记为模拟生成）\n      await saveRecordToDB(formValues, result, true);\n    } catch (error) {\n      messageApi.error('模拟生成失败，请稍后再试');\n    } finally {\n      setLoading(false);\n    }\n  }, [form, messageApi]);\n\n  // 处理翻唱配置标题点击事件\n  const handleTitleClick = useCallback(() => {\n    handleMockGenerate();\n  }, [handleMockGenerate]);\n\n  return (\n    <>\n      {contextHolder}\n      <PageContainer>\n        {/* 只有在用户没有设置AI API Key时才显示Alert提示 */}\n        {!apiKey && (\n          <Alert\n            title=\"尚未设置 AI API Key，设置完成后即可使用该功能，是否现在去设置？\"\n            banner\n            style={{ marginBottom: 24 }}\n            action={\n              <Button type=\"link\" onClick={() => history.push('/ai-setting')}>\n                去设置\n              </Button>\n            }\n          />\n        )}\n\n        {/* 全屏加载器 */}\n        <Spin spinning={loading} fullscreen size=\"large\" />\n\n        <Row gutter={[24, 0]}>\n          {/* 左侧输入表单 */}\n          <Col span={8}>\n            <ProCard\n              title={\n                <span onClick={handleTitleClick} style={{ cursor: 'pointer' }}>\n                  翻唱配置\n                </span>\n              }\n              style={{ height: '100%' }}\n            >\n              {/* 延迟渲染：只有在数据加载完成后才显示表单 */}\n              {!isFormInitialized ? (\n                <div style={{ textAlign: 'center', padding: '40px 0' }}>\n                  <Spin size=\"large\" />\n                </div>\n              ) : (\n                <ProForm\n                  form={form}\n                  layout=\"vertical\"\n                  onFinish={handleSubmit}\n                  submitter={{\n                    render: () => (\n                      <Flex vertical gap=\"small\" style={{ marginTop: 16 }}>\n                        {/* 主要生成按钮 */}\n                        <Button\n                          type=\"primary\"\n                          onClick={() => form.submit()}\n                          loading={loading}\n                          size=\"large\"\n                          block\n                        >\n                          生成提示词\n                        </Button>\n                      </Flex>\n                    ),\n                  }}\n                >\n                  {/* 歌曲名称 */}\n                  <ProFormText\n                    name=\"song_name\"\n                    label=\"歌曲名称\"\n                    placeholder=\"请输入歌曲名称，仅作为记录方便查询\"\n                    rules={VALIDATION_RULES.songName}\n                    fieldProps={FIELD_CONFIGS.songName}\n                  />\n\n                  {/* 歌曲语言 */}\n                  <ProFormSelect\n                    name=\"song_language\"\n                    label=\"歌曲语言\"\n                    placeholder=\"请选择歌曲语言\"\n                    rules={VALIDATION_RULES.language}\n                    options={[\n                      { value: 'Mandarin', label: '华语（普通话）' },\n                      { value: 'Cantonese', label: '粤语' },\n                      { value: 'Minnan', label: '闽南语' },\n                      { value: 'English', label: '英语' },\n                      { value: 'Korean', label: '韩语' },\n                      { value: 'Japanese', label: '日语' },\n                      { value: 'Other', label: '其他' },\n                    ]}\n                  />\n\n                  {/* 参考艺术家 */}\n                  <ProFormText\n                    name=\"target_artist\"\n                    label=\"想模仿哪位艺术家？\"\n                    placeholder=\"例如：张惠妹、陈奕迅、周杰伦等\"\n                    rules={VALIDATION_RULES.artistName}\n                    fieldProps={FIELD_CONFIGS.artistName}\n                  />\n\n                  {/* 参考歌曲 */}\n                  <ProFormList\n                    actionRef={proFormListRef}\n                    name=\"reference_songs\"\n                    label=\"参考歌曲（可选，最多 3 首）\"\n                    initialValue={[{ title: '', artist: '' }]}\n                    creatorButtonProps={{\n                      creatorButtonText: '添加参考歌曲',\n                      type: 'dashed',\n                      block: true,\n                    }}\n                    deleteIconProps={{\n                      tooltipText: '删除该参考歌曲',\n                    }}\n                    copyIconProps={false}\n                    max={3}\n                  >\n                    {(meta) => (\n                      <Space key={meta.name} style={{ width: '100%' }}>\n                        <ProFormText\n                          name=\"title\"\n                          placeholder=\"歌曲名\"\n                          rules={VALIDATION_RULES.referenceSongTitle}\n                          fieldProps={{\n                            style: { width: '100%' },\n                            ...FIELD_CONFIGS.referenceSongTitle,\n                          }}\n                        />\n                        <ProFormText\n                          name=\"artist\"\n                          placeholder=\"演唱者（可选）\"\n                          rules={VALIDATION_RULES.referenceSongArtist}\n                          fieldProps={{\n                            style: { width: '100%' },\n                            ...FIELD_CONFIGS.referenceSongArtist,\n                          }}\n                        />\n                      </Space>\n                    )}\n                  </ProFormList>\n\n                  {/* 风格备注 */}\n                  <ProFormTextArea\n                    name=\"style_note\"\n                    label=\"风格备注（可选）\"\n                    placeholder=\"例如：主歌要像《人质》一样极度克制，副歌接近《听海》的情绪爆发。\"\n                    fieldProps={{ showCount: true, rows: 3 }}\n                  />\n\n                  {/* 附加说明 */}\n                  <ProFormTextArea\n                    name=\"extra_note\"\n                    label=\"特殊说明（如场景、受众等，可选）\"\n                    placeholder=\"例如：演唱会现场版、录音室版本等\"\n                    fieldProps={{ showCount: true, rows: 3 }}\n                  />\n\n                  {/* 歌词全文 */}\n                  <ProFormTextArea\n                    name=\"lyrics_raw\"\n                    label=\"段落与歌词\"\n                    placeholder=\"请填写歌词，并使用任意标签划分段落，例如：【主歌】、【副歌】、[Verse]、[Chorus] 等\"\n                    rules={VALIDATION_RULES.lyrics}\n                    fieldProps={FIELD_CONFIGS.lyrics}\n                  />\n                </ProForm>\n              )}\n            </ProCard>\n          </Col>\n\n          {/* 中间Styles输出 */}\n          <Col span={8}>\n            <ResultCard\n              title=\"Styles 提示词（可直接复制用于 Suno）\"\n              value={stylesResult}\n              onCopy={() => copyToClipboard(stylesResult, 'Styles')}\n            />\n          </Col>\n\n          {/* 右侧Lyrics输出 */}\n          <Col span={8}>\n            <ResultCard\n              title=\"Lyrics 提示词（可直接复制用于 Suno）\"\n              value={lyricsResult}\n              onCopy={() => copyToClipboard(lyricsResult, 'Lyrics')}\n            />\n          </Col>\n        </Row>\n      </PageContainer>\n    </>\n  );\n};\n\nexport default SunoCover;\n","/**\n * 数据加载和参考歌曲处理模块\n * 集中处理从URL参数加载记录数据和参考歌曲数据转换的逻辑\n */\n\nimport { message } from 'antd';\nimport { db } from '../../../services/db';\n\n/**\n * 处理参考歌曲数据\n * 将数据库中的参考歌曲字符串或数组转换为标准格式\n */\nexport const processReferenceSongs = async (\n  referenceSongsData: any,\n): Promise<Array<{ title: string; artist: string }>> => {\n  try {\n    if (!referenceSongsData) {\n      return [];\n    }\n\n    // 如果已经是数组格式，直接返回\n    if (Array.isArray(referenceSongsData)) {\n      return referenceSongsData\n        .filter(\n          (song: any) =>\n            song &&\n            typeof song === 'object' &&\n            song.title &&\n            typeof song.title === 'string',\n        )\n        .map((song: any) => ({\n          title: song.title || '',\n          artist: song.artist || '',\n        }));\n    }\n\n    // 如果是字符串，尝试解析JSON\n    if (typeof referenceSongsData === 'string') {\n      try {\n        const parsed = JSON.parse(referenceSongsData);\n        if (Array.isArray(parsed)) {\n          return parsed\n            .filter(\n              (song: any) =>\n                song &&\n                typeof song === 'object' &&\n                song.title &&\n                typeof song.title === 'string',\n            )\n            .map((song: any) => ({\n              title: song.title || '',\n              artist: song.artist || '',\n            }));\n        }\n      } catch (_parseError) {\n        return [];\n      }\n    }\n\n    return [];\n  } catch (_error) {\n    return [];\n  }\n};\n\n/**\n * 从URL参数加载记录数据\n * @param recordId 记录ID\n * @returns 表单初始值\n */\nexport const loadRecordData = async (\n  recordId: string | null,\n): Promise<{\n  formValues: any;\n  hasRecord: boolean;\n}> => {\n  // 先定义空的表单数据结构（无论是否有recordId都需要）\n  const formValues = {\n    song_name: '',\n    song_language: 'Mandarin',\n    target_artist: '',\n    style_note: '',\n    lyrics_raw: '',\n    extra_note: '',\n    reference_songs: [] as Array<{ title: string; artist: string }>,\n  };\n\n  // 如果没有recordId，直接返回空表单\n  if (!recordId) {\n    return { formValues, hasRecord: false };\n  }\n\n  try {\n    // 查询数据库记录\n    const record = await db.getPromptRecord(parseInt(recordId));\n\n    if (!record) {\n      message.error('记录不存在');\n      return { formValues, hasRecord: false };\n    }\n\n    // 处理参考歌曲数据\n    const processedReferenceSongs = await processReferenceSongs(\n      record.user_input.reference_songs,\n    );\n\n    // 更新表单数据\n    Object.assign(formValues, {\n      song_name: record.user_input.song_name || '',\n      song_language: record.user_input.song_language || 'Mandarin',\n      target_artist: record.user_input.target_singer || '',\n      style_note: record.user_input.style_description || '',\n      lyrics_raw: record.user_input.lyrics || '',\n      extra_note: record.user_input.scene || '',\n      reference_songs:\n        processedReferenceSongs.length > 0\n          ? processedReferenceSongs\n          : [{ title: '', artist: '' }],\n    });\n\n    return { formValues, hasRecord: true };\n  } catch (error) {\n    message.error('数据加载失败');\n    return { formValues, hasRecord: false };\n  }\n};\n","import type { GenerateRequest, GenerateResponse, ReferenceSong } from '../../shared/types/types';\nimport { USER_PROMPT_TEMPLATE } from '../../config/prompts';\n\nexport abstract class BaseAIService {\n  /**\n   * 生成AI回复的统一接口\n   */\n  abstract generate(request: GenerateRequest): Promise<GenerateResponse>;\n\n  /**\n   * 生成用户提示词的模板方法 - 详细版本\n   */\n  protected generateUserPrompt(request: GenerateRequest): string {\n    const { \n      target_artist, \n      lyrics_raw, \n      song_language, \n      reference_songs, \n      style_note, \n      extra_note \n    } = request;\n\n    // 辅助函数：获取完整语言名称\n    const getFullLanguageName = (language: string): string => {\n      const languageMap: { [key: string]: string } = {\n        'Mandarin': 'Mandarin Chinese',\n        'Cantonese': 'Cantonese Chinese',\n        'English': 'English',\n        'Japanese': 'Japanese',\n        'Korean': 'Korean',\n        'Spanish': 'Spanish',\n        'French': 'French',\n        'German': 'German',\n      };\n      return languageMap[language] || language;\n    };\n\n    // 辅助函数：格式化参考歌曲\n    const formatReferenceSongs = (songs: any[], targetArtist: string): string => {\n      if (!songs || songs.length === 0) {\n        return 'None provided.';\n      }\n      return songs\n        .filter((song: { title?: string }) => song.title)\n        .map((song: { title: string; artist?: string }) => {\n          const artistPart = song.artist && song.artist !== targetArtist ? ` by ${song.artist}` : '';\n          return `- \"${song.title}\"${artistPart}`;\n        })\n        .join('\\n  ');\n    };\n\n    const fullLanguageName = getFullLanguageName(song_language);\n    const referenceSongsBlock = formatReferenceSongs(reference_songs, target_artist);\n\n    // 使用模板字符串替换生成最终的用户提示词\n    return USER_PROMPT_TEMPLATE\n      .replace('{fullLanguageName}', fullLanguageName)\n      .replace('{targetArtist}', target_artist)\n      .replace('{referenceSongsBlock}', referenceSongsBlock)\n      .replace('{styleNote}', style_note || '')\n      .replace('{extraNote}', extra_note || '')\n      .replace('{lyricsRaw}', lyrics_raw);\n  }\n\n  /**\n   * 验证请求参数的方法\n   */\n  protected validateRequest(request: GenerateRequest): void {\n    if (!request.target_artist) {\n      throw new Error('请输入目标艺术家');\n    }\n    if (!request.lyrics_raw) {\n      throw new Error('请输入歌词');\n    }\n    if (!request.song_language) {\n      throw new Error('请输入歌曲语言');\n    }\n  }\n\n  /**\n   * 将参考歌曲转换为文本的方法\n   */\n  protected referenceSongsToText(songs: ReferenceSong[]): string {\n    if (!songs || songs.length === 0) {\n      return '';\n    }\n    \n    return songs\n      .map((song, index) => {\n        if (song.title && song.artist) {\n          return `${index + 1}. ${song.title} - ${song.artist}`;\n        } else if (song.title) {\n          return `${index + 1}. ${song.title}`;\n        }\n        return '';\n      })\n      .filter(Boolean)\n      .join('\\n');\n  }\n\n  /**\n   * 解析AI响应的模板方法 - 适配Gemini响应格式\n   */\n  protected async parseResponse(rawResponse: string): Promise<GenerateResponse> {\n    try {\n      let responseText = rawResponse.trim();\n      \n      // 专门针对Gemini响应格式进行解析\n      // 提取### Styles和### Lyrics部分\n      const stylesMatch = responseText.match(/### Styles[\\s\\S]*?(?=### Lyrics|$)/);\n      const lyricsMatch = responseText.match(/### Lyrics[\\s\\S]*/);\n      \n      let stylesContent = '';\n      let lyricsContent = '';\n      \n      // 提取Styles内容\n      if (stylesMatch) {\n        stylesContent = stylesMatch[0].replace(/### Styles/, '').trim();\n        // 移除可能的```text```标记\n        stylesContent = stylesContent.replace(/```text\\s*([\\s\\S]*?)\\s*```/, '$1').trim();\n      }\n      \n      // 提取Lyrics内容\n      if (lyricsMatch) {\n        lyricsContent = lyricsMatch[0].replace(/### Lyrics/, '').trim();\n        // 移除可能的```text```标记\n        lyricsContent = lyricsContent.replace(/```text\\s*([\\s\\S]*?)\\s*```/, '$1').trim();\n      }\n      \n      // 返回解析结果，严格按照Gemini响应格式处理\n      return {\n        styles: stylesContent,\n        lyrics: lyricsContent,\n        timestamp: new Date().toISOString()\n      };\n    } catch (error) {\n      console.error('响应解析失败:', error);\n      // 如果解析失败，返回原始响应作为styles，空字符串作为lyrics\n      return {\n        styles: rawResponse.trim(),\n        lyrics: '',\n        timestamp: new Date().toISOString()\n      };\n    }\n  }\n}","import { container, injectable } from 'tsyringe';\nimport { BaseAIService } from './baseAIService';\nimport { DeepSeekService } from './models/deepseekService';\nimport { GeminiService } from './models/geminiService';\nimport { MimoService } from './models/mimoService';\n\n// 注册服务到tsyringe容器\nexport function registerServices(): void {\n  // 注册具体服务\n  container.register(DeepSeekService, { useClass: DeepSeekService });\n  container.register(GeminiService, { useClass: GeminiService });\n  container.register(MimoService, { useClass: MimoService });\n}\n\n// 导出容器\nexport { container, injectable };\n\nexport type AIServiceFactory = (serviceType: 'deepseek' | 'gemini' | 'mimo') => BaseAIService;\n","import { injectable } from 'tsyringe';\nimport { BaseAIService } from '../baseAIService';\nimport type { GenerateRequest, GenerateResponse } from '../../../shared/types/types';\nimport type { DeepSeekResult } from '../../../shared/types';\nimport { SYSTEM_PROMPT } from '../../../config/prompts';\n\n@injectable()\nexport class DeepSeekService extends BaseAIService {\n  /**\n   * 调用DeepSeek API生成内容\n   */\n  async generate(request: GenerateRequest): Promise<GenerateResponse> {\n    const { api_key: apiKey } = request;\n\n    // 参数验证\n    if (!apiKey) {\n      throw new Error('DeepSeek API key is required');\n    }\n\n    // 生成用户提示词\n    const userPrompt = this.generateUserPrompt(request);\n\n    // 从配置文件读取系统提示词，只有人类可以修改配置文件中的内容\n    const systemPrompt = SYSTEM_PROMPT;\n\n    try {\n      const response = await fetch('https://api.deepseek.com/v1/chat/completions', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${apiKey}`,\n        },\n        body: JSON.stringify({\n          model: 'deepseek-chat',\n          messages: [\n            {\n              role: 'system',\n              content: systemPrompt,\n            },\n            {\n              role: 'user',\n              content: userPrompt,\n            },\n          ],\n          temperature: 1.3,\n          max_tokens: 4096,\n        }),\n      });\n\n      if (!response.ok) {\n        const errorData = await response.text();\n        console.error('DeepSeek API error:', response.status, errorData);\n        throw new Error(`DeepSeek API request failed with status ${response.status}`);\n      }\n\n      const data = await response.json();\n      const aiResponse = data.choices[0].message.content;\n\n      // 解析响应并返回结果\n      return this.parseResponse(aiResponse);\n    } catch (error) {\n      console.error('Error calling DeepSeek API:', error);\n      throw error;\n    }\n  }\n}\n","import { injectable } from 'tsyringe';\nimport { BaseAIService } from '../baseAIService';\nimport { GoogleGenAI } from '@google/genai';\nimport type { GenerateRequest, GenerateResponse } from '../../../shared/types/types';\nimport { SYSTEM_PROMPT } from '../../../config/prompts';\n\n@injectable()\nexport class GeminiService extends BaseAIService {\n  /**\n   * 调用Gemini API生成内容\n   */\n  async generate(request: GenerateRequest): Promise<GenerateResponse> {\n    const { api_key: apiKey } = request;\n\n    // 参数验证\n    if (!apiKey) {\n      throw new Error('Gemini API key is required');\n    }\n\n    // 生成用户提示词\n    const userPrompt = this.generateUserPrompt(request);\n\n    // 从配置文件读取系统提示词，只有人类可以修改配置文件中的内容\n    const systemPrompt = SYSTEM_PROMPT;\n\n    try {\n      // 使用@google/genai库调用Gemini API\n      const genAI = new GoogleGenAI({ apiKey });\n\n      const result = await genAI.models.generateContent({ \n        model: 'gemini-3-flash-preview',\n        contents: [\n          {\n            parts: [\n              {\n                text: systemPrompt + '\\n\\n' + userPrompt\n              }\n            ]\n          }\n        ],\n      });\n\n      // 正确解析Gemini API响应\n      let aiResponse = '';\n      \n      if (result.candidates && result.candidates.length > 0) {\n        const firstCandidate = result.candidates[0];\n        if (firstCandidate.content && firstCandidate.content.parts) {\n          // 提取所有文本部分并合并\n          aiResponse = firstCandidate.content.parts\n            .filter(part => part.text)\n            .map(part => part.text)\n            .join('\\n');\n        }\n      }\n\n      // 解析响应并返回结果\n      return this.parseResponse(aiResponse);\n    } catch (error) {\n      console.error('Error calling Gemini API:', error);\n      throw error;\n    }\n  }\n}\n","import { injectable } from 'tsyringe';\nimport { BaseAIService } from '../baseAIService';\nimport type { GenerateRequest, GenerateResponse } from '../../../shared/types/types';\nimport { SYSTEM_PROMPT } from '../../../config/prompts';\n\n@injectable()\nexport class MimoService extends BaseAIService {\n  /**\n   * 调用小米MiMo-V2-Flash API生成内容\n   */\n  async generate(request: GenerateRequest): Promise<GenerateResponse> {\n    const { api_key: apiKey } = request;\n\n    // 参数验证\n    if (!apiKey) {\n      throw new Error('MiMo API key is required');\n    }\n\n    // 生成用户提示词\n    const userPrompt = this.generateUserPrompt(request);\n\n    // 从配置文件读取系统提示词，只有人类可以修改配置文件中的内容\n    const systemPrompt = SYSTEM_PROMPT;\n\n    try {\n      // 确定API请求URL\n      // 开发环境：使用代理地址避免CORS问题\n      // 生产环境：直接使用真实的API域名\n      const apiUrl = process.env.NODE_ENV === 'development' \n        ? '/mimo-api/v1/chat/completions' \n        : 'https://api.xiaomimimo.com/v1/chat/completions';\n      \n      const response = await fetch(apiUrl, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${apiKey}`,\n        },\n        body: JSON.stringify({\n          model: 'mimo-v2-flash',\n          messages: [\n            {\n              role: 'system',\n              content: systemPrompt,\n            },\n            {\n              role: 'user',\n              content: userPrompt,\n            },\n          ],\n          temperature: 0.8,\n          top_p: 0.95,\n          max_tokens: 4096,\n          stream: false,\n          extra_body: {\n            \"thinking\": {\"type\": \"enabled\"}\n          }\n        }),\n      });\n\n      if (!response.ok) {\n        const errorData = await response.text();\n        console.error('MiMo API error:', {\n          status: response.status,\n          statusText: response.statusText,\n          url: response.url,\n          errorData\n        });\n        throw new Error(`MiMo API request failed with status ${response.status}: ${response.statusText}`);\n      }\n\n      const data = await response.json();\n      const aiResponse = data.choices[0].message.content;\n\n      // 解析响应并返回结果\n      return this.parseResponse(aiResponse);\n    } catch (error) {\n      console.error('Error calling MiMo API:', error);\n      \n      // 检测是否为CORS错误\n      if (process.env.NODE_ENV === 'production' && error instanceof TypeError && error.message.includes('Failed to fetch')) {\n        throw new Error(\n          'MiMo API 请求失败：遇到跨域问题（CORS）。\\n' +\n          '解决方案：\\n' +\n          '1. 建议在本地开发环境中使用 MiMo 模型\\n' +\n          '2. 或使用其他模型如 DeepSeek 或 Gemini\\n' +\n          '3. 或部署自己的 CORS 代理服务\\n' +\n          '\\n本地开发环境启动方式：\\n' +\n          '1. 克隆仓库到本地\\n' +\n          '2. 运行 pnpm install 安装依赖\\n' +\n          '3. 运行 pnpm dev 启动开发服务器\\n' +\n          '4. 在 http://localhost:8000 上使用应用'\n        );\n      }\n      \n      throw error;\n    }\n  }\n}","/**\n * 模拟数据服务模块\n * 负责提供模拟生成所需的固定数据和逻辑\n * 用于开发环境下的功能测试，避免频繁调用真实API\n */\n\n// 固定的Styles内容\nexport const MOCK_STYLES = `Symphonic Pop-Rock, Mandopop, Baroque Pop-Rock, J-Rock Influence, Heavy distorted guitars over symphonic orchestration, Sophisticated Chord Progressions. Breathy Female Vocals, Clear Emotive Tone, Soaring High Notes, Sustained High Notes, Moderate Vibrato, Introspective to Powerful. Theatrical, Epic.\nINTRO: Cinematic atmosphere, slow build up, high strings ensemble in lyrical counterpoint over classical piano arpeggios and warm pad.\nVERSE: Breathy female vocals (introspective tone), delicate piano, acoustic guitar arpeggios, light percussion.\nPRE-CHORUS: Emotional crescendo, dramatic build-up.\nCHORUS: Powerful belting vocals, sustained high notes, richly stacked harmonies, heavy distorted guitars + power chords, high strings unison counterpoint, fast driving cinematic drums, huge wall of sound.\nINTERLUDE: Lyrical electric guitar solo trading melodies with high strings.\nBRIDGE: Emotional climax, building high tension.\nOUTRO: Fading out with piano arpeggio and soft strings.`;\n\n// 固定的Lyrics内容\nexport const MOCK_LYRICS = `[Intro Chorus]\n[Arrangement: Ethereal atmosphere, Cold Open]\n[Instrument: Classical Grand Piano only, No Drums, No Guitar]\n[Dynamics: mp, emotional and intimate]\nForever Forever\n无论你走到哪\n也要在同一片天空下发光\nForever Forever\n把徬徨的心都点亮\n拥抱彼此的模样\n永恒回忆就像恒星不忘\n\n[Instrumental Hook]\n[Arrangement: Sudden Energy Explosion, J-Rock Influence]\n[Instrument: Heavy Distorted Guitars, High Strings Ensemble, Driving Rock Drums]\n[Dynamics: ff, Epic Start]\n\n[Verse 1]\n[Vocal: Breathy female vocals, Introspective tone, Near microphone]\n[Instrument: Minimalist Piano, Broken Chords, Bass pulse enters]\n[Dynamics: p, gentle storytelling]\n流星划过喧扰穹苍\n可曾回应谁的愿望\n我已走到儿时的远方\n却遗失了自己的模样\n\n[Verse 2]\n[Vocal: Clear emotive tone, slightly stronger presence]\n[Arrangement: Building up]\n[Instrument: Acoustic Guitar Strumming, Piano high notes, Light Snare]\n[Dynamics: mp -> mf, flowing]\n梦想逐渐增加重量\n我们是否不再幻想\n用尽整个青春去荒唐\n也用整个人生去飞翔\n\n[Chorus 1]\n[Vocal: Power belting, Sustained high notes, Layered Harmonies]\n[Texture: Wall of Sound, Symphonic Rock]\n[Instrument: Heavy Distorted Guitars (Power Chords), High Strings Unison Counterpoint, Bright Piano Octaves]\n[Dynamics: f, explosive release]\nForever Forever\n无论你走到哪\n也要在同一片天空下发光\nForever Forever\n把徬徨的心都点亮\n拥抱彼此的模样\n永恒回忆就像恒星不忘\n\n[Instrumental Interlude]\n[Arrangement: J-Rock influence, soaring atmosphere]\n[Instrument: Lyrical electric guitar solo trading melodies with High Strings Section (Duel)]\n[Dynamics: ff]\n\n[Verse 3]\n[Vocal: Clear emotive tone, emotional friction]\n[Instrument: Acoustic Guitar Strumming dominant, String Staccato Rhythm, Piano counter-melody]\n[Dynamics: mf, driving rhythm]\n庆幸这场别来无恙\n沉默里藏着太多话\n岁月从不放过谁脸庞\n却也在心中留下宝藏\n\n[Verse 4]\n[Vocal: High tension, dramatic delivery, Double Tracking]\n[Arrangement: Orchestral Swell, Strings Tremolo]\n[Instrument: Intense Strumming, Heavy Piano Chords, Snare Rolls]\n[Dynamics: mf -> f, dramatic push]\n烟火再次绽放辉煌\n失落瞳孔倒映希望\n每当前路风横雨又狂\n让我再陪你展开翅膀\n\n[Chorus 2]\n[Vocal: Intense belting, Richly Stacked Harmonies]\n[Texture: Dense Wall of Sound]\n[Instrument: Heavy Distorted Guitars, High Strings Unison Counterpoint, Crash Cymbals]\n[Dynamics: ff, Driving Power]\nForever Forever\n无论你走到哪\n也要在同一片天空下发光\nForever Forever\n把徬徨的心都点亮\n拥抱彼此的模样\n永恒回忆就像恒星不忘\n\n[Grand Chorus]\n[Vocal: Ultimate high notes, Choir Backing, Octave Doubles, High Pitch Ad-libs]\n[Arrangement: Explosive anthemic grand finale chorus]\n[Instrument: Maximum Distorted Wall, Soaring Strings Melody, Bright Piano Glissando, Full Orchestra]\n[Dynamics: fff, Anthemic, Epic Finale]\nForever Forever\n无论你走到哪\n也要在同一片天空下发光\nForever Forever\n把徬徨的心都点亮\n重回最好的时光\n永恒回忆就像恒星不忘\n\n[Instrumental Outro]\n[Arrangement: Fading out]\n[Instrument: Piano Arpeggios, Soft Strings]\n[Dynamics: Diminuendo, pp]`;\n\n/**\n * 模拟生成函数\n * 模拟调用DeepSeek API的过程，延迟15秒后返回固定的模拟数据\n * @returns Promise<{ styles: string; lyrics: string }> 包含模拟生成的Styles和Lyrics\n */\nexport const mockGenerate = async (): Promise<{ styles: string; lyrics: string }> => {\n  // 模拟5秒延迟\n  await new Promise(resolve => setTimeout(resolve, 5000));\n  return {\n    styles: MOCK_STYLES,\n    lyrics: MOCK_LYRICS\n  };\n};\n","/**\n * 剪贴板工具函数\n * 提供复制文本到剪贴板的功能，并支持成功/失败提示\n */\nimport { message } from 'antd';\n\n/**\n * 复制文本到剪贴板\n * @param text - 要复制的文本内容\n * @param type - 文本类型，用于提示信息（如：\"Styles提示词\"）\n * @returns Promise<void>\n */\nexport const copyToClipboard = async (\n  text: string,\n  type?: string,\n): Promise<void> => {\n  try {\n    await navigator.clipboard.writeText(text);\n    message.success(`${type || '文本'}已成功复制到剪贴板`);\n  } catch (error) {\n    console.error('复制到剪贴板失败:', error);\n    message.error('复制失败，请手动复制');\n  }\n};\n\n/**\n * 复制文本到剪贴板（无提示版本）\n * @param text - 要复制的文本内容\n * @returns Promise<boolean> - 复制成功返回true，失败返回false\n */\nexport const copyToClipboardSilent = async (text: string): Promise<boolean> => {\n  try {\n    await navigator.clipboard.writeText(text);\n    return true;\n  } catch (error) {\n    console.error('复制到剪贴板失败:', error);\n    return false;\n  }\n};\n","/**\n * 通用格式化工具函数\n * 提供各种数据格式化功能，包括日期、语言、参考歌曲等\n */\nimport type { ReferenceSong } from '../types';\n\n/**\n * 语言映射：将内部语言代码转换为对外显示的完整语言名称\n * 用于在提示中确保语言描述的一致性和准确性\n */\nconst languageMap: Record<string, string> = {\n  Mandarin: 'Mandarin Chinese',\n  Cantonese: 'Cantonese',\n  Minnan: 'Minnan',\n  English: 'English',\n  Korean: 'Korean',\n  Japanese: 'Japanese',\n  Other: 'Other',\n};\n\n/**\n * 获取完整的语言名称\n * @param languageCode - 内部语言代码\n * @returns 完整的语言名称\n */\nexport const getFullLanguageName = (languageCode: string): string => {\n  return languageMap[languageCode] || languageCode;\n};\n\n/**\n * 生成参考歌曲块文本\n * 将参考歌曲列表格式化为易读的文本块\n * @param referenceSongs - 参考歌曲列表\n * @param targetArtist - 目标艺术家（当歌曲没有艺术家时使用）\n * @returns 格式化后的参考歌曲文本块\n */\nexport const formatReferenceSongs = (\n  referenceSongs: ReferenceSong[],\n  targetArtist: string,\n): string => {\n  if (referenceSongs.length === 0) {\n    return 'None';\n  }\n\n  return referenceSongs\n    .filter((song) => song.title)\n    .map((song) => `${song.title} by ${song.artist || targetArtist}`)\n    .join('\\n');\n};\n\n/**\n * 格式化日期为可读字符串\n * @param date - 日期对象或日期字符串\n * @param format - 格式字符串（可选）\n * @returns 格式化后的日期字符串\n */\nexport const formatDate = (\n  date: Date | string,\n  format: string = 'YYYY-MM-DD HH:mm:ss',\n): string => {\n  const dateObj = typeof date === 'string' ? new Date(date) : date;\n\n  const year = dateObj.getFullYear();\n  const month = String(dateObj.getMonth() + 1).padStart(2, '0');\n  const day = String(dateObj.getDate()).padStart(2, '0');\n  const hours = String(dateObj.getHours()).padStart(2, '0');\n  const minutes = String(dateObj.getMinutes()).padStart(2, '0');\n  const seconds = String(dateObj.getSeconds()).padStart(2, '0');\n\n  return format\n    .replace('YYYY', String(year))\n    .replace('MM', month)\n    .replace('DD', day)\n    .replace('HH', hours)\n    .replace('mm', minutes)\n    .replace('ss', seconds);\n};\n\n/**\n * 格式化数字为千分位格式\n * @param number - 要格式化的数字\n * @returns 千分位格式的数字字符串\n */\nexport const formatNumber = (number: number): string => {\n  return number.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',');\n};\n\n/**\n * 截取文本并添加省略号\n * @param text - 要截取的文本\n * @param maxLength - 最大长度\n * @returns 截取后的文本（包含省略号）\n */\nexport const truncateText = (text: string, maxLength: number): string => {\n  if (text.length <= maxLength) {\n    return text;\n  }\n\n  return text.substring(0, maxLength) + '...';\n};\n","/**\n * 共享工具函数入口文件\n * 统一导出所有共享工具函数，方便其他模块使用\n */\n\n// 剪贴板工具函数\nexport * from './clipboard';\n// 通用格式化工具函数\nexport * from './format';\n// 验证工具函数\nexport * from './validation';\n","/**\n * 验证工具函数\n * 提供各种数据验证功能，包括API密钥验证、请求参数验证等\n */\nimport type { GenerateRequest } from '../types/types';\n\n/**\n * 验证API密钥格式\n * @param apiKey - 要验证的API密钥\n * @returns boolean - 验证通过返回true，失败返回false\n */\nexport const validateApiKey = (apiKey: string): boolean => {\n  if (!apiKey || !apiKey.trim()) {\n    return false;\n  }\n  // 简单的格式验证，实际项目中可能需要更严格的验证\n  return apiKey.length > 10;\n};\n\n/**\n * 验证生成请求参数\n * @param values - 生成请求参数\n * @throws Error if validation fails\n */\nexport const validateGenerateRequest = (values: GenerateRequest): void => {\n  if (!values) {\n    throw new Error('生成请求参数不能为空');\n  }\n\n  if (!values.target_artist || !values.target_artist.trim()) {\n    throw new Error('目标艺术家不能为空');\n  }\n\n  if (!values.lyrics_raw || !values.lyrics_raw.trim()) {\n    throw new Error('歌词不能为空');\n  }\n\n  if (!values.song_language || !values.song_language.trim()) {\n    throw new Error('歌曲语言不能为空');\n  }\n\n  if (!validateApiKey(values.api_key)) {\n    throw new Error('API Key 格式不正确或为空');\n  }\n};\n\n/**\n * 验证电子邮件格式\n * @param email - 要验证的电子邮件地址\n * @returns boolean - 验证通过返回true，失败返回false\n */\nexport const validateEmail = (email: string): boolean => {\n  const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n  return emailRegex.test(email);\n};\n\n/**\n * 验证必填字段\n * @param value - 要验证的值\n * @param fieldName - 字段名称（用于错误信息）\n * @throws Error if validation fails\n */\nexport const validateRequired = (value: any, fieldName: string): void => {\n  if (!value || (typeof value === 'string' && !value.trim())) {\n    throw new Error(`${fieldName}不能为空`);\n  }\n};\n"],"names":[],"mappings":"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"}