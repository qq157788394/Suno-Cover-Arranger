{"version":3,"sources":["src/pages/lyrics-records/detail/index.tsx","src/pages/lyrics-records/index.tsx"],"sourcesContent":["/**\n * 歌词记录详情组件\n * 展示歌词生成记录的详细信息，包括表单数据和生成的歌词\n */\n\nimport { CopyOutlined } from \"@ant-design/icons\";\nimport { ProCard, ProDescriptions } from \"@ant-design/pro-components\";\nimport { XMarkdown } from \"@ant-design/x-markdown\";\nimport {\n  Button,\n  Drawer,\n  message,\n  Space,\n  Typography,\n  Divider,\n  Segmented,\n} from \"antd\";\nimport React from \"react\";\nimport { MASTER_STYLE_CARDS } from \"@/config/masterStyleConfig\";\nimport {\n  CLOSENESS_LEVEL_OPTIONS,\n  CREATION_MODE_OPTIONS,\n  PERSONA_OPTIONS,\n  RHYME_TYPE_OPTIONS,\n  SONG_LANGUAGE_OPTIONS,\n  SONG_STYLE_OPTIONS,\n  SONG_STRUCTURE_OPTIONS,\n  WORDING_STYLE_OPTIONS,\n} from \"@/config/lyricsEnums\";\nimport { useModel } from \"@umijs/max\";\nimport type { LyricsRecord } from \"@/shared/types/types\";\n\nconst { Paragraph, Text } = Typography;\n\ninterface LyricsRecordDetailProps {\n  record: LyricsRecord;\n  onClose: () => void;\n}\n\nconst LyricsRecordDetail: React.FC<LyricsRecordDetailProps> = ({\n  record,\n  onClose,\n}) => {\n  const { initialState } = useModel(\"@@initialState\");\n\n  // 根据主题设置确定XMarkdown的主题类\n  const isDarkTheme = initialState?.settings?.navTheme === \"realDark\";\n  const markdownThemeClass = isDarkTheme\n    ? \"markdown-body-dark\"\n    : \"markdown-body-light\";\n\n  const handleCopy = async (text: string) => {\n    try {\n      await navigator.clipboard.writeText(text);\n      message.success(\"复制成功\");\n    } catch (_error) {\n      message.error(\"复制失败\");\n    }\n  };\n\n  const getMasterInfo = (masterId: string | undefined) => {\n    if (!masterId) {\n      return undefined;\n    }\n    return MASTER_STYLE_CARDS.find((m) => m.id === masterId);\n  };\n\n  if (!record) {\n    return (\n      <Drawer\n        title=\"歌词生成详情\"\n        placement=\"right\"\n        open={true}\n        size={992}\n        onClose={onClose}\n      >\n        <div style={{ textAlign: \"center\", padding: \"100px 0\" }}>\n          记录不存在\n        </div>\n      </Drawer>\n    );\n  }\n\n  const masterInfo = getMasterInfo(record.form_data.master_id);\n\n  // Segmented选项\n  const segmentedOptions = [\n    { label: \"基本信息\", value: \"basic-info\" },\n    { label: \"大师歌词\", value: \"generated-lyrics\" },\n    { label: \"原始素材\", value: \"raw-material\" },\n    { label: \"参考歌词\", value: \"reference-lyrics\" },\n    { label: \"创作参数\", value: \"creation-parameters\" },\n  ];\n\n  // 当前选中的Segmented项\n  const [activeItem, setActiveItem] = React.useState<string>(\"basic-info\");\n\n  // 滚动到指定元素\n  const scrollToElement = (elementId: string) => {\n    const element = document.getElementById(elementId);\n    if (element) {\n      // 获取当前Drawer的滚动容器\n      const currentDrawer = element.closest(\".ant-drawer\");\n      if (currentDrawer) {\n        const drawerContent = currentDrawer.querySelector(\".ant-drawer-body\");\n        if (drawerContent instanceof HTMLElement) {\n          // 计算滚动位置，考虑到顶部边距\n          const elementTop = element.offsetTop - 57 - 24;\n          drawerContent.scrollTo({\n            top: elementTop,\n            behavior: \"smooth\",\n          });\n        }\n      }\n    }\n  };\n\n  // 监听滚动事件，自动更新activeItem\n  React.useEffect(() => {\n    // 获取当前Drawer的滚动容器\n    const basicInfoElement = document.getElementById(\"basic-info\");\n    if (!basicInfoElement) return;\n\n    const currentDrawer = basicInfoElement.closest(\".ant-drawer\");\n    if (!currentDrawer) return;\n\n    const drawerContent = currentDrawer.querySelector(\".ant-drawer-body\");\n    if (!(drawerContent instanceof HTMLElement)) return;\n\n    const handleScroll = () => {\n      const scrollPosition = drawerContent.scrollTop + 50;\n\n      // 检查每个内容区域的位置\n      for (const option of segmentedOptions) {\n        const element = document.getElementById(option.value);\n        if (element) {\n          const elementTop = element.offsetTop;\n          const elementBottom = elementTop + element.offsetHeight;\n\n          if (scrollPosition >= elementTop && scrollPosition < elementBottom) {\n            setActiveItem(option.value);\n            break;\n          }\n        }\n      }\n    };\n\n    // 添加滚动事件监听\n    drawerContent.addEventListener(\"scroll\", handleScroll);\n\n    // 清理函数\n    return () => {\n      drawerContent.removeEventListener(\"scroll\", handleScroll);\n    };\n  }, [segmentedOptions]);\n\n  return (\n    <Drawer\n      title=\"歌词生成详情\"\n      placement=\"right\"\n      open={true}\n      size={992}\n      onClose={onClose}\n      extra={\n        <Segmented\n          options={segmentedOptions}\n          value={activeItem}\n          onChange={(value) => {\n            setActiveItem(value);\n            scrollToElement(value);\n          }}\n        />\n      }\n    >\n      <ProDescriptions id=\"basic-info\" column={2} title=\"基本信息\">\n        <ProDescriptions.Item label=\"歌曲名称\">\n          {record.form_data.song_name}\n        </ProDescriptions.Item>\n        <ProDescriptions.Item label=\"歌曲语言\">\n          {SONG_LANGUAGE_OPTIONS.find(\n            (item) =>\n              String(item.value) === String(record.form_data.song_language)\n          )?.label || record.form_data.song_language}\n        </ProDescriptions.Item>\n        <ProDescriptions.Item label=\"大师风格\">\n          {masterInfo ? (\n            <Space>\n              <Text>{masterInfo.name}</Text>\n              <Text type=\"secondary\">{masterInfo.description}</Text>\n            </Space>\n          ) : (\n            <Text>无</Text>\n          )}\n        </ProDescriptions.Item>\n        <ProDescriptions.Item label=\"歌曲风格\">\n          {SONG_STYLE_OPTIONS.find(\n            (item) => String(item.value) === String(record.form_data.song_style)\n          )?.label || record.form_data.song_style}\n        </ProDescriptions.Item>\n      </ProDescriptions>\n\n      <Divider />\n\n      <ProCard\n        id=\"generated-lyrics\"\n        title=\"大师歌词\"\n        ghost\n        extra={\n          <Button\n            size=\"small\"\n            type=\"text\"\n            icon={<CopyOutlined />}\n            onClick={() => handleCopy(record.ai_result.lyrics)}\n          >\n            复制歌词\n          </Button>\n        }\n      >\n        <XMarkdown className={markdownThemeClass} config={{ breaks: true }}>\n          {record.ai_result.lyrics}\n        </XMarkdown>\n      </ProCard>\n\n      <Divider />\n\n      <ProCard id=\"raw-material\" title=\"原始素材\" ghost>\n        <XMarkdown className={markdownThemeClass} config={{ breaks: true }}>\n          {record.form_data.raw_material}\n        </XMarkdown>\n      </ProCard>\n\n      <Divider />\n\n      <ProCard id=\"reference-lyrics\" title=\"参考歌词\" ghost>\n        <XMarkdown className={markdownThemeClass} config={{ breaks: true }}>\n          {record.form_data.reference_lyrics || \"无\"}\n        </XMarkdown>\n      </ProCard>\n\n      <Divider />\n\n      <ProDescriptions id=\"creation-parameters\" column={2} title=\"创作参数\">\n        <ProDescriptions.Item label=\"参考歌词\" span={2}></ProDescriptions.Item>\n        <ProDescriptions.Item label=\"措辞要求\">\n          {Array.isArray(record.form_data.wording_style)\n            ? record.form_data.wording_style\n                .map(\n                  (style) =>\n                    WORDING_STYLE_OPTIONS.find(\n                      (item) => String(item.value) === String(style)\n                    )?.label || style\n                )\n                .join(\"、\")\n            : record.form_data.wording_style || \"无\"}\n        </ProDescriptions.Item>\n        <ProDescriptions.Item label=\"贴近度\">\n          {CLOSENESS_LEVEL_OPTIONS.find(\n            (item) => String(item.value) === String(record.form_data.closeness)\n          )?.label || `${record.form_data.closeness}`}\n        </ProDescriptions.Item>\n        <ProDescriptions.Item label=\"创作模式\">\n          {CREATION_MODE_OPTIONS.find(\n            (item) =>\n              String(item.value) === String(record.form_data.creation_mode)\n          )?.label || record.form_data.creation_mode}\n        </ProDescriptions.Item>\n        <ProDescriptions.Item label=\"曲式结构\">\n          {SONG_STRUCTURE_OPTIONS.find(\n            (item) =>\n              String(item.value) === String(record.form_data.song_structure)\n          )?.label || record.form_data.song_structure}\n        </ProDescriptions.Item>\n        <ProDescriptions.Item label=\"叙事人设\">\n          {PERSONA_OPTIONS.find(\n            (item) => String(item.value) === String(record.form_data.persona)\n          )?.label || record.form_data.persona}\n        </ProDescriptions.Item>\n        <ProDescriptions.Item label=\"押韵类型\">\n          {RHYME_TYPE_OPTIONS.find(\n            (item) => String(item.value) === String(record.form_data.rhyme_type)\n          )?.label || record.form_data.rhyme_type}\n        </ProDescriptions.Item>\n        <ProDescriptions.Item label=\"输出数量\">\n          {record.form_data.output_count}\n        </ProDescriptions.Item>\n        <ProDescriptions.Item label=\"AI模型\">\n          {record.ai_result.model}\n        </ProDescriptions.Item>\n        <ProDescriptions.Item label=\"生成时间\">\n          {new Date(record.created_at).toLocaleString(\"zh-CN\")}\n        </ProDescriptions.Item>\n      </ProDescriptions>\n    </Drawer>\n  );\n};\n\nexport default LyricsRecordDetail;\n","/**\n * 歌词记录列表页面\n * 使用ProTable展示所有歌词生成记录\n */\n\nimport { DeleteOutlined, EyeOutlined } from \"@ant-design/icons\";\nimport type { ActionType, ProColumns } from \"@ant-design/pro-components\";\nimport { PageContainer, ProTable } from \"@ant-design/pro-components\";\nimport { useNavigate } from \"@umijs/max\";\nimport { Alert, Button, message, Popconfirm } from \"antd\";\nimport React, { useRef, useState } from \"react\";\nimport { MASTER_STYLE_CARDS } from \"@/config/masterStyleConfig\";\nimport {\n  CLOSENESS_LEVEL_OPTIONS,\n  SONG_LANGUAGE_OPTIONS,\n  SONG_STYLE_OPTIONS,\n} from \"@/config/lyricsEnums\";\nimport { useLyricsRecords } from \"@/hooks/useLyricsRecords\";\nimport { db } from \"@/services/db\";\nimport type { LyricsRecord } from \"@/shared/types/types\";\nimport LyricsRecordDetail from \"./detail\"; // 导入详情组件\n\nconst LyricsRecordsPage: React.FC = () => {\n  const navigate = useNavigate();\n  const { deleteRecord } = useLyricsRecords();\n  const actionRef = useRef<ActionType>(null);\n  const [loading, setLoading] = useState<boolean>(false);\n  const [open, setOpen] = useState<boolean>(false);\n  const [selectedRecord, setSelectedRecord] = useState<LyricsRecord | null>(\n    null\n  );\n\n  const handleDelete = async (id: number) => {\n    try {\n      const result = await deleteRecord(id);\n      if (result.success) {\n        message.success(\"删除成功\");\n        actionRef.current?.reload();\n        setOpen(false); // 删除后关闭Drawer\n        setSelectedRecord(null);\n      } else {\n        message.error(\"删除失败\");\n      }\n    } catch (_error) {\n      message.error(\"删除失败\");\n    }\n  };\n\n  const handleView = (record: LyricsRecord) => {\n    setSelectedRecord(record);\n    setOpen(true);\n  };\n\n  const handleDrawerClose = () => {\n    setOpen(false);\n    setSelectedRecord(null);\n  };\n\n  const handleDrawerDelete = () => {\n    // 由于详情组件已移除删除功能，此函数不再需要\n    // 但为了保持组件接口一致性，保留此函数\n  };\n\n  /**\n   * 获取歌词记录数据\n   * 处理分页和排序逻辑\n   */\n  const fetchLyricsRecords = async (params: any, sort: any) => {\n    setLoading(true);\n    try {\n      const records = await db.getAllLyricsRecords();\n\n      let filteredRecords = [...records];\n\n      if (params.current && params.pageSize) {\n        const start = (params.current - 1) * params.pageSize;\n        const end = start + params.pageSize;\n        filteredRecords = filteredRecords.slice(start, end);\n      }\n\n      if (sort && Object.keys(sort).length > 0) {\n        const sortKey = Object.keys(sort)[0];\n        const sortOrder = sort[sortKey];\n        filteredRecords.sort((a, b) => {\n          const aVal = a[sortKey as keyof LyricsRecord];\n          const bVal = b[sortKey as keyof LyricsRecord];\n          if (aVal === undefined && bVal === undefined) return 0;\n          if (aVal === undefined) return 1;\n          if (bVal === undefined) return -1;\n          if (sortOrder === \"ascend\") {\n            return aVal > bVal ? 1 : -1;\n          } else {\n            return aVal < bVal ? 1 : -1;\n          }\n        });\n      }\n\n      return {\n        data: filteredRecords,\n        success: true,\n        total: records.length,\n      };\n    } catch (_error) {\n      message.error(\"加载数据失败\");\n      return {\n        data: [],\n        success: false,\n        total: 0,\n      };\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const columns: ProColumns<LyricsRecord>[] = [\n    {\n      title: \"歌曲名称\",\n      dataIndex: [\"form_data\", \"song_name\"],\n      width: 150,\n      fixed: \"left\",\n      ellipsis: true,\n    },\n    {\n      title: \"风格大师\",\n      dataIndex: [\"form_data\", \"master_id\"],\n      width: 120,\n      render: (_, record) => {\n        const masterId = record.form_data.master_id;\n        if (!masterId) {\n          return \"无\";\n        }\n        const master = MASTER_STYLE_CARDS.find((m) => m.id === masterId);\n        return master ? master.name : masterId;\n      },\n    },\n    {\n      title: \"语言\",\n      dataIndex: [\"form_data\", \"song_language\"],\n      width: 100,\n      render: (_, record) => {\n        const language = SONG_LANGUAGE_OPTIONS.find(\n          (item) =>\n            String(item.value) === String(record.form_data.song_language)\n        );\n        return language?.label || record.form_data.song_language;\n      },\n    },\n    {\n      title: \"风格\",\n      dataIndex: [\"form_data\", \"song_style\"],\n      width: 100,\n      render: (_, record) => {\n        const style = SONG_STYLE_OPTIONS.find(\n          (item) => String(item.value) === String(record.form_data.song_style)\n        );\n        return style?.label || record.form_data.song_style;\n      },\n    },\n    {\n      title: \"贴近度\",\n      dataIndex: [\"form_data\", \"closeness\"],\n      width: 100,\n      render: (_, record) => {\n        const closeness = record.form_data.closeness;\n        const closenessOption = CLOSENESS_LEVEL_OPTIONS.find(\n          (item) => String(item.value) === String(closeness)\n        );\n        return closenessOption?.label || `${closeness}级`;\n      },\n    },\n    {\n      title: \"生成时间\",\n      dataIndex: \"created_at\",\n      width: 180,\n      valueType: \"dateTime\",\n      sorter: true,\n      defaultSortOrder: \"descend\",\n    },\n    {\n      title: \"操作\",\n      valueType: \"option\",\n      width: 150,\n      fixed: \"right\",\n      render: (_, record) => [\n        <Button\n          key=\"view\"\n          type=\"primary\"\n          size=\"small\"\n          icon={<EyeOutlined />}\n          onClick={() => handleView(record)}\n        >\n          查看\n        </Button>,\n        <Popconfirm\n          key=\"delete\"\n          title=\"确认删除\"\n          description=\"确定要删除这条记录吗？\"\n          onConfirm={() => record.id && handleDelete(record.id)}\n          okText=\"确定\"\n          cancelText=\"取消\"\n        >\n          <Button size=\"small\" danger icon={<DeleteOutlined />}>\n            删除\n          </Button>\n        </Popconfirm>,\n      ],\n    },\n  ];\n\n  return (\n    <PageContainer>\n      <Alert\n        title=\"生成记录仅保存在本地设备，不会上传至服务器，更换设备或浏览器后记录将无法查看。\"\n        banner\n        style={{ marginBottom: 24 }}\n      />\n      <ProTable<LyricsRecord>\n        headerTitle=\"大师写歌词生成记录\"\n        columns={columns}\n        actionRef={actionRef}\n        request={fetchLyricsRecords}\n        rowKey=\"id\"\n        search={false}\n        pagination={{\n          defaultPageSize: 20,\n          showSizeChanger: true,\n          showQuickJumper: true,\n          showTotal: (total) => `共 ${total} 条记录`,\n        }}\n        scroll={{ x: \"max-content\" }}\n        loading={loading}\n        toolBarRender={() => [\n          <Button\n            key=\"create\"\n            type=\"primary\"\n            onClick={() => navigate(\"/lyrics-craft\")}\n          >\n            创建新歌词\n          </Button>,\n        ]}\n      />\n\n      {/* 歌词详情Drawer */}\n      {selectedRecord && (\n        <LyricsRecordDetail\n          record={selectedRecord}\n          onClose={handleDrawerClose}\n        />\n      )}\n    </PageContainer>\n  );\n};\n\nexport default LyricsRecordsPage;\n"],"names":[],"mappings":"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"}