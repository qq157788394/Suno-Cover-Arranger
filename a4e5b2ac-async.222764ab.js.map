{"version":3,"sources":["src/pages/about/index.tsx"],"sourcesContent":["import { PageContainer } from '@ant-design/pro-components';\nimport { XMarkdown } from '@ant-design/x-markdown';\nimport { useModel } from '@umijs/max';\nimport { Card, Spin, Typography } from 'antd';\nimport React, { useEffect, useState } from 'react';\nimport '@ant-design/x-markdown/themes/light.css';\nimport '@ant-design/x-markdown/themes/dark.css';\n\n// 构建时注入的README内容（通过构建脚本处理）\ndeclare global {\n  const __README_CONTENT__: string;\n}\n\nconst About: React.FC = () => {\n  const [readmeContent, setReadmeContent] = useState<string>('');\n  const [loading, setLoading] = useState<boolean>(true);\n  // 获取全局初始状态，包含主题设置\n  const { initialState } = useModel('@@initialState');\n  // 根据主题设置确定XMarkdown的主题类\n  const isDarkTheme = initialState?.settings?.navTheme === 'realDark';\n  const markdownThemeClass = isDarkTheme\n    ? 'x-markdown-dark'\n    : 'x-markdown-light';\n\n  useEffect(() => {\n    // 开发环境：使用mock API获取内容\n    // 生产环境：使用构建时注入的内容\n    if (process.env.NODE_ENV === 'production') {\n      // 生产环境：使用构建时注入的内容\n      if (typeof __README_CONTENT__ !== 'undefined') {\n        setReadmeContent(__README_CONTENT__);\n        setLoading(false);\n      } else {\n        // 如果构建时注入失败，尝试从dist目录读取\n        fetch('./README.md')\n          .then((response) => response.text())\n          .then((content) => {\n            setReadmeContent(content);\n            setLoading(false);\n          })\n          .catch(() => {\n            setReadmeContent('# 项目介绍\\n\\n无法加载README.md内容');\n            setLoading(false);\n          });\n      }\n    } else {\n      // 开发环境：使用mock API\n      const fetchReadme = async () => {\n        try {\n          const response = await fetch('/api/readme');\n          if (response.ok) {\n            const content = await response.text();\n            setReadmeContent(content);\n          } else {\n            console.error('Failed to fetch README.md');\n            setReadmeContent('# 项目介绍\\n\\n无法加载README.md内容');\n          }\n        } catch (error) {\n          console.error('Error fetching README.md:', error);\n          setReadmeContent('# 项目介绍\\n\\n无法加载README.md内容');\n        } finally {\n          setLoading(false);\n        }\n      };\n\n      fetchReadme();\n    }\n  }, []);\n\n  return (\n    <PageContainer title=\"项目介绍\">\n      <Card>\n        {loading ? (\n          <div style={{ textAlign: 'center', padding: '40px' }}>\n            <Spin size=\"large\" />\n          </div>\n        ) : (\n          <XMarkdown className={markdownThemeClass}>{readmeContent}</XMarkdown>\n        )}\n      </Card>\n    </PageContainer>\n  );\n};\n\nexport default About;\n"],"names":[],"mappings":"2QAoFA,+CAAA,mFAlFyB,0DAEkB,YAgF3C,EAvEwB,SAMF,EALpB,GAAM,CAAC,EAAe,EAAiB,CAAG,GAAA,UAAQ,EAAS,IACrD,CAAC,EAAS,EAAW,CAAG,GAAA,UAAQ,EAAU,CAAA,GAE1C,CAAE,aAAA,CAAY,CAAE,CAAG,GAAA,UAAQ,EAAC,kBAE5B,EAAc,OAAA,iBAAA,EAAA,EAAc,QAAQ,YAAtB,SAAA,EAAwB,QAAQ,IAAK,WAkDzD,MA7CA,GAAA,WAAS,EAAC,KAKF,AAA8B,aAA9B,OAAO,oBACT,EAAiB,oBACjB,EAAW,CAAA,IAGX,MAAM,eACH,IAAI,CAAC,AAAC,GAAa,EAAS,IAAI,IAChC,IAAI,CAAC,AAAC,IACL,EAAiB,GACjB,EAAW,CAAA,GACb,GACC,KAAK,CAAC,KACL,EAAiB,+EACjB,EAAW,CAAA,GACb,GAwBR,EAAG,EAAE,EAGH,UAAC,eAAa,EAAC,MAAM,oCACnB,UAAC,SAAI,WACF,EACC,UAAC,OAAI,MAAO,CAAE,UAAW,SAAU,QAAS,MAAO,WACjD,UAAC,SAAI,EAAC,KAAK,YAGb,UAAC,SAAS,EAAC,UAzDQ,EACvB,kBACA,4BAuD+C,QAKrD"}