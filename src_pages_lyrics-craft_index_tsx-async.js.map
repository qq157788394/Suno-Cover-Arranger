{"version":3,"sources":["src/pages/lyrics-craft/index.tsx","src/pages/lyrics-craft/utils/promptBuilder.ts","src/pages/lyrics-craft/utils/responseParser.ts","src/services/lyricsPromptService.ts"],"sourcesContent":["/**\n * 大师写歌词页面\n * 负责处理歌词创作相关功能，使用ProForm实现15个表单项\n */\n\nimport {\n  PageContainer,\n  ProCard,\n  ProForm,\n  ProFormRadio,\n  ProFormSelect,\n  ProFormSlider,\n  ProFormSwitch,\n  ProFormText,\n  ProFormTextArea,\n} from \"@ant-design/pro-components\";\nimport { XMarkdown } from \"@ant-design/x-markdown\";\nimport { useModel, useNavigate } from \"@umijs/max\";\nimport {\n  Button,\n  Col,\n  Empty,\n  message,\n  Row,\n  Spin,\n  Space,\n  Typography,\n} from \"antd\";\nconst { Text } = Typography;\nimport React, { useState } from \"react\";\nimport \"@ant-design/x-markdown/themes/light.css\";\nimport \"@ant-design/x-markdown/themes/dark.css\";\n\nimport {\n  CLOSENESS_LEVEL_OPTIONS,\n  CREATION_MODE_OPTIONS,\n  OUTPUT_COUNT_OPTIONS,\n  PERSONA_OPTIONS,\n  RHYME_TYPE_OPTIONS,\n  SONG_LANGUAGE_OPTIONS,\n  SONG_STRUCTURE_OPTIONS,\n  SONG_STYLE_OPTIONS,\n  WORDING_STYLE_OPTIONS,\n} from \"@/config/lyricsEnums\";\nimport { MASTER_STYLE_CARDS } from \"@/config/masterStyleConfig\";\nimport { useApiKey } from \"@/hooks/useApiKey\";\nimport { useLyricsRecords } from \"@/hooks/useLyricsRecords\";\nimport { AIProviderFactory } from \"@/services/ai/providers\";\nimport type { LyricsFormData } from \"@/shared/types/types\";\nimport { BusinessType } from \"@/config/aiTemperatureConfig\";\nimport { copyToClipboard } from \"@/shared/utils\";\nimport { ApiKeyAlert } from \"@/components\";\nimport { LyricsCraftPromptBuilder } from \"./utils/promptBuilder\";\nimport { LyricsCraftResponseParser } from \"./utils/responseParser\";\n\nconst LyricsCraftPage: React.FC = () => {\n  const navigate = useNavigate();\n  const { apiKey, model, checkApiKey, shouldShowAlert, navigateToSettings } =\n    useApiKey();\n  const { createRecord } = useLyricsRecords();\n  const [loading, setLoading] = useState<boolean>(false);\n  const [generatedLyrics, setGeneratedLyrics] = useState<string>(\"\");\n  const [messageApi, contextHolder] = message.useMessage();\n  const { initialState } = useModel(\"@@initialState\");\n  // 根据主题设置确定XMarkdown的主题类\n  const isDarkTheme = initialState?.settings?.navTheme === \"realDark\";\n  const markdownThemeClass = isDarkTheme\n    ? \"x-markdown-dark\"\n    : \"x-markdown-light\";\n\n  const defaultFormValues: Partial<LyricsFormData> = {\n    song_language: \"mandarin\",\n    song_style: \"lyrical_pop\",\n    song_structure: \"standard_pop\",\n    creation_mode: \"new\",\n    persona: \"unlimited\",\n    wording_style: [],\n    allow_english: false,\n    closeness: 3,\n    rhyme_type: \"mix\",\n    rhyme_strict: true,\n    output_count: 1,\n  };\n\n  const handleSubmit = async (values: LyricsFormData) => {\n    if (!checkApiKey()) {\n      return;\n    }\n\n    if (!values.song_name || !values.song_name.trim()) {\n      messageApi.error(\"歌曲名称不能为空\");\n      return;\n    }\n\n    if (!values.raw_material || !values.raw_material.trim()) {\n      messageApi.error(\"原始素材不能为空\");\n      return;\n    }\n\n    if (values.output_count < 1 || values.output_count > 5) {\n      messageApi.error(\"生成数量必须在1-5之间\");\n      return;\n    }\n\n    if (values.closeness < 0 || values.closeness > 100) {\n      messageApi.error(\"贴近度必须在0-100之间\");\n      return;\n    }\n\n    setLoading(true);\n    setGeneratedLyrics(\"\");\n\n    try {\n      const provider = AIProviderFactory.createProvider(\n        model as \"deepseek\" | \"gemini\" | \"mimo\"\n      );\n\n      const systemPrompt = LyricsCraftPromptBuilder.buildSystemPrompt(values);\n      const userPrompt = LyricsCraftPromptBuilder.buildUserPrompt(values);\n\n      const response = await provider.generate({\n        api_key: apiKey,\n        system_prompt: systemPrompt,\n        user_prompt: userPrompt,\n        business_type: BusinessType.LYRICS,\n      });\n\n      if (!response.success) {\n        throw new Error(response.error || \"AI生成失败\");\n      }\n\n      const parsedResponse = LyricsCraftResponseParser.parseResponse(\n        response.content\n      );\n\n      if (parsedResponse.success && parsedResponse.lyrics) {\n        setGeneratedLyrics(parsedResponse.lyrics);\n\n        const result = await createRecord({\n          form_data: values,\n          ai_result: {\n            lyrics: parsedResponse.lyrics,\n            model: model,\n            closeness: values.closeness,\n          },\n          created_at: new Date(),\n        });\n\n        if (result.success && result.data?.id) {\n          messageApi.success(\"歌词生成成功！\");\n        } else {\n          messageApi.error(\"歌词生成成功，但保存失败\");\n        }\n      } else {\n        messageApi.error(parsedResponse.error || \"歌词生成失败\");\n      }\n    } catch (error) {\n      console.error(\"歌词生成失败：\", error);\n      messageApi.error(\"歌词生成失败，请稍后重试\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <>\n      {contextHolder}\n      <PageContainer>\n        {/* 只有在用户没有设置AI API Key时才显示Alert提示 */}\n        <ApiKeyAlert\n          visible={shouldShowAlert}\n          onNavigateToSettings={navigateToSettings}\n        />\n        <Spin spinning={loading} fullscreen size=\"large\" />\n        <Row gutter={[24, 0]}>\n          <Col xxl={16} xl={12} lg={12} md={12} sm={12} xs={12}>\n            <ProCard title=\"创作配置\" style={{ height: \"100%\" }}>\n              <ProForm<LyricsFormData>\n                layout=\"vertical\"\n                grid\n                onFinish={handleSubmit}\n                submitter={{\n                  render: () => (\n                    <Button\n                      type=\"primary\"\n                      htmlType=\"submit\"\n                      loading={loading}\n                      size=\"large\"\n                      block\n                    >\n                      生成歌词\n                    </Button>\n                  ),\n                }}\n                initialValues={defaultFormValues}\n              >\n                <ProFormText\n                  name=\"song_name\"\n                  label=\"歌曲名称\"\n                  placeholder=\"请输入歌曲名称\"\n                  rules={[\n                    { required: true, message: \"请输入歌曲名称\" },\n                    { max: 50, message: \"歌曲名称最多 50 个字\" },\n                  ]}\n                  colProps={{ span: 24 }}\n                />\n                <ProFormSelect\n                  name=\"song_language\"\n                  label=\"歌曲语言\"\n                  placeholder=\"请选择歌曲语言\"\n                  options={SONG_LANGUAGE_OPTIONS.map((option) => ({\n                    label: option.description ? (\n                      <Space align=\"center\">\n                        <Text>{option.label}</Text>\n                        <Text type=\"secondary\">{option.description}</Text>\n                      </Space>\n                    ) : (\n                      <Text>{option.label}</Text>\n                    ),\n                    value: option.value,\n                  }))}\n                  rules={[{ required: true, message: \"请选择歌曲语言\" }]}\n                  colProps={{ xxl: 12, xl: 24, lg: 24, md: 24, sm: 24, xs: 24 }}\n                  fieldProps={{ popupMatchSelectWidth: false }}\n                />\n                <ProFormSwitch\n                  name=\"allow_english\"\n                  label=\"允许英语单词\"\n                  tooltip=\"想用一杯Latte把你灌醉？关闭时，歌词中禁止出现散装英语\"\n                  colProps={{ xxl: 6, xl: 12, lg: 12, md: 12, sm: 12, xs: 12 }}\n                />\n                <ProFormRadio.Group\n                  name=\"output_count\"\n                  label=\"输出方案数量\"\n                  options={OUTPUT_COUNT_OPTIONS.map((option) => ({\n                    label: option.label,\n                    value: option.value,\n                  }))}\n                  rules={[{ required: true, message: \"请选择输出方案数量\" }]}\n                  colProps={{ xxl: 6, xl: 12, lg: 12, md: 12, sm: 12, xs: 12 }}\n                />\n                <ProFormSelect\n                  name=\"master_id\"\n                  label=\"大师风格\"\n                  placeholder=\"请选择大师风格\"\n                  options={MASTER_STYLE_CARDS.map((master) => ({\n                    label: master.description ? (\n                      <Space align=\"center\">\n                        <Text>{master.name}</Text>\n                        <Text type=\"secondary\">{master.description}</Text>\n                      </Space>\n                    ) : (\n                      <Text>{master.name}</Text>\n                    ),\n                    value: master.id,\n                  }))}\n                  rules={[{ required: true, message: \"请选择大师风格\" }]}\n                  colProps={{ xxl: 12, xl: 24, lg: 24, md: 24, sm: 24, xs: 24 }}\n                  fieldProps={{ popupMatchSelectWidth: false }}\n                />\n                <ProFormSelect\n                  name=\"wording_style\"\n                  label=\"措辞要求（可选，最多可选 2 项）\"\n                  options={WORDING_STYLE_OPTIONS.map((option) => ({\n                    label: option.description ? (\n                      <Space align=\"center\">\n                        <Text>{option.label}</Text>\n                        <Text type=\"secondary\">{option.description}</Text>\n                      </Space>\n                    ) : (\n                      <Text>{option.label}</Text>\n                    ),\n                    value: option.value,\n                  }))}\n                  mode=\"multiple\"\n                  rules={[\n                    {\n                      type: \"array\",\n                      max: 2,\n                      message: \"措辞要求最多选择 2 项\",\n                    },\n                  ]}\n                  colProps={{ xxl: 12, xl: 24, lg: 24, md: 24, sm: 24, xs: 24 }}\n                  fieldProps={{\n                    popupMatchSelectWidth: false,\n                    maxCount: 2,\n                    maxTagCount: \"responsive\",\n                  }}\n                />\n                <ProFormSlider\n                  name=\"closeness\"\n                  label=\"贴近度\"\n                  rules={[{ required: true, message: \"请选择贴近度\" }]}\n                  colProps={{ span: 24 }}\n                  min={1}\n                  max={5}\n                  marks={CLOSENESS_LEVEL_OPTIONS.reduce((acc, opt) => {\n                    acc[opt.value as number] = opt.label;\n                    return acc;\n                  }, {} as Record<number, React.ReactNode>)}\n                  step={1}\n                  fieldProps={{\n                    tooltip: {\n                      formatter: (value: number | undefined) => {\n                        if (value === undefined) return \"\";\n                        const option = CLOSENESS_LEVEL_OPTIONS.find(\n                          (opt) => opt.value === value\n                        );\n                        if (!option) return String(value);\n                        return option.tooltip_example\n                          ? `${option.description}。${option.tooltip_example}`\n                          : option.description;\n                      },\n                    },\n                    style: { margin: \"0 32px\" },\n                  }}\n                />\n                <ProFormSelect\n                  name=\"creation_mode\"\n                  label=\"创作模式\"\n                  placeholder=\"请选择创作模式\"\n                  options={CREATION_MODE_OPTIONS.map((option) => ({\n                    label: option.description ? (\n                      <Space align=\"center\">\n                        <Text>{option.label}</Text>\n                        <Text type=\"secondary\">{option.description}</Text>\n                      </Space>\n                    ) : (\n                      <Text>{option.label}</Text>\n                    ),\n                    value: option.value,\n                  }))}\n                  rules={[{ required: true, message: \"请选择创作模式\" }]}\n                  colProps={{ xxl: 12, xl: 24, lg: 24, md: 24, sm: 24, xs: 24 }}\n                  fieldProps={{ popupMatchSelectWidth: false }}\n                />\n                <ProFormSelect\n                  name=\"song_style\"\n                  label=\"歌曲风格\"\n                  placeholder=\"请选择歌曲风格\"\n                  options={SONG_STYLE_OPTIONS.map((option) => ({\n                    label: option.description ? (\n                      <Space align=\"center\">\n                        <Text>{option.label}</Text>\n                        <Text type=\"secondary\">{option.description}</Text>\n                      </Space>\n                    ) : (\n                      <Text>{option.label}</Text>\n                    ),\n                    value: option.value,\n                  }))}\n                  rules={[{ required: true, message: \"请选择歌曲风格\" }]}\n                  colProps={{ xxl: 12, xl: 24, lg: 24, md: 24, sm: 24, xs: 24 }}\n                  fieldProps={{ popupMatchSelectWidth: false }}\n                />\n\n                <ProFormSelect\n                  name=\"song_structure\"\n                  label=\"曲式结构\"\n                  placeholder=\"请选择曲式结构\"\n                  options={SONG_STRUCTURE_OPTIONS.map((option) => ({\n                    label: option.description ? (\n                      <Space align=\"center\">\n                        <Text>{option.label}</Text>\n                        <Text type=\"secondary\">{option.description}</Text>\n                      </Space>\n                    ) : (\n                      <Text>{option.label}</Text>\n                    ),\n                    value: option.value,\n                  }))}\n                  rules={[{ required: true, message: \"请选择曲式结构\" }]}\n                  colProps={{ xxl: 12, xl: 24, lg: 24, md: 24, sm: 24, xs: 24 }}\n                  fieldProps={{ popupMatchSelectWidth: false }}\n                />\n                <ProFormSelect\n                  name=\"persona\"\n                  label=\"叙事人设\"\n                  placeholder=\"请选择叙事人设\"\n                  options={PERSONA_OPTIONS.map((option) => ({\n                    label: option.description ? (\n                      <Space align=\"center\">\n                        <Text>{option.label}</Text>\n                        <Text type=\"secondary\">{option.description}</Text>\n                      </Space>\n                    ) : (\n                      <Text>{option.label}</Text>\n                    ),\n                    value: option.value,\n                  }))}\n                  rules={[{ required: true, message: \"请选择叙事人设\" }]}\n                  colProps={{ xxl: 12, xl: 24, lg: 24, md: 24, sm: 24, xs: 24 }}\n                  fieldProps={{ popupMatchSelectWidth: false }}\n                />\n                <ProFormTextArea\n                  name=\"raw_material\"\n                  label=\"原始素材\"\n                  placeholder=\"请输入原始素材（主题、大意、歌词片段等），每一行视为一个参考素材\"\n                  rules={[\n                    { required: true, message: \"请输入原始素材\" },\n                    { max: 1000, message: \"原始素材最多1000字\" },\n                  ]}\n                  fieldProps={{\n                    rows: 6,\n                    showCount: true,\n                    maxLength: 1000,\n                  }}\n                  colProps={{ xxl: 12, xl: 24, lg: 24, md: 24, sm: 24, xs: 24 }}\n                />\n                <ProFormTextArea\n                  name=\"reference_lyrics\"\n                  label=\"参考歌曲和歌词（可选）\"\n                  placeholder=\"请输入参考歌曲名称和歌词全文，仅作为技法参考，不要求结构对齐\"\n                  rules={[{ max: 1000, message: \"参考歌曲和歌词最多1000字\" }]}\n                  fieldProps={{\n                    rows: 6,\n                    showCount: true,\n                    maxLength: 1000,\n                  }}\n                  colProps={{ xxl: 12, xl: 24, lg: 24, md: 24, sm: 24, xs: 24 }}\n                />\n                <ProFormTextArea\n                  name=\"requirements\"\n                  label=\"创作要求（可选）\"\n                  placeholder=\"请输入创作要求（情绪走向、禁止出现的内容等）\"\n                  rules={[{ max: 1000, message: \"创作要求最多1000字\" }]}\n                  fieldProps={{\n                    rows: 4,\n                    showCount: true,\n                    maxLength: 1000,\n                  }}\n                  colProps={{ span: 24 }}\n                />\n                <ProFormSelect\n                  name=\"rhyme_type\"\n                  label=\"押韵类型\"\n                  placeholder=\"请选择押韵类型\"\n                  options={RHYME_TYPE_OPTIONS.map((option) => ({\n                    label: option.description ? (\n                      <Space align=\"center\">\n                        <Text>{option.label}</Text>\n                        <Text type=\"secondary\">{option.description}</Text>\n                      </Space>\n                    ) : (\n                      <Text>{option.label}</Text>\n                    ),\n                    value: option.value,\n                  }))}\n                  rules={[{ required: true, message: \"请选择押韵类型\" }]}\n                  colProps={{ xxl: 12, xl: 24, lg: 24, md: 24, sm: 24, xs: 24 }}\n                  fieldProps={{ popupMatchSelectWidth: false }}\n                />\n                <ProFormText\n                  name=\"rhyme_tone\"\n                  label=\"韵脚（可选）\"\n                  placeholder=\"请输入韵脚，留空则系统推荐\"\n                  colProps={{ xxl: 6, xl: 12, lg: 12, md: 12, sm: 12, xs: 12 }}\n                />\n                <ProFormSwitch\n                  name=\"rhyme_strict\"\n                  label=\"严格押韵\"\n                  tooltip=\"开启时，必须严格执行韵脚，不得出现近音字代替\"\n                  colProps={{ xxl: 6, xl: 12, lg: 12, md: 12, sm: 12, xs: 12 }}\n                />\n              </ProForm>\n            </ProCard>\n          </Col>\n\n          <Col xxl={8} xl={12} lg={12} md={12} sm={12} xs={12}>\n            <ProCard\n              title=\"生成的歌词\"\n              extra={\n                generatedLyrics && (\n                  <Button\n                    size=\"small\"\n                    onClick={() => copyToClipboard(generatedLyrics, \"歌词\")}\n                  >\n                    复制歌词\n                  </Button>\n                )\n              }\n              style={{ height: \"100%\" }}\n            >\n              {!generatedLyrics ? (\n                <Empty\n                  description=\"请填写左侧表单并点击生成按钮\"\n                  style={{ marginTop: 80 }}\n                />\n              ) : (\n                <XMarkdown\n                  className={markdownThemeClass}\n                  config={{ breaks: true }}\n                >\n                  {generatedLyrics}\n                </XMarkdown>\n              )}\n            </ProCard>\n          </Col>\n        </Row>\n      </PageContainer>\n    </>\n  );\n};\n\nexport default LyricsCraftPage;\n","import {\n  getLyricsSystemPrompt,\n  getLyricsUserPrompt,\n} from \"@/services/lyricsPromptService\";\nimport type { LyricsFormData } from \"@/shared/types/types\";\n\n/**\n * 大师写歌词 - Prompt拼接工具类\n * 负责根据用户输入拼接完整的系统提示词和用户提示词\n */\nexport class LyricsCraftPromptBuilder {\n  /**\n   * 生成系统提示词\n   * @param request - 歌词生成请求参数\n   * @returns 完整的系统提示词\n   */\n  static buildSystemPrompt(request: LyricsFormData): string {\n    return getLyricsSystemPrompt();\n  }\n\n  /**\n   * 生成用户提示词\n   * @param request - 歌词生成请求参数\n   * @returns 完整的用户提示词\n   */\n  static buildUserPrompt(request: LyricsFormData): string {\n    return getLyricsUserPrompt(request);\n  }\n}\n","import type { LyricsGenerateResponse } from \"@/shared/types/types\";\n\n/**\n * 大师写歌词 - 响应解析工具类\n * 直接返回AI的原始响应内容，不做任何处理\n */\nexport class LyricsCraftResponseParser {\n  /**\n   * 解析AI响应\n   * 直接返回AI的原始内容，不做任何处理\n   * @param rawResponse - AI返回的原始响应\n   * @returns 包含歌词的生成响应\n   */\n  static parseResponse(rawResponse: string): LyricsGenerateResponse {\n    try {\n      const content = rawResponse.trim();\n\n      if (!content) {\n        return {\n          success: false,\n          error: \"AI 生成内容为空\",\n          lyrics: \"\",\n          timestamp: new Date().toISOString(),\n        };\n      }\n\n      return {\n        success: true,\n        lyrics: content,\n        timestamp: new Date().toISOString(),\n      };\n    } catch (error) {\n      console.error(\"响应解析失败:\", error);\n      return {\n        success: false,\n        error: error instanceof Error ? error.message : \"响应解析失败\",\n        lyrics: \"\",\n        timestamp: new Date().toISOString(),\n      };\n    }\n  }\n}\n","import {\n  LYRICS_SYSTEM_PROMPT,\n  LYRICS_USER_PROMPT_TEMPLATE,\n  getClosenessLevelLabel,\n  getClosenessLevelInstruction,\n  getOutputCountInstruction,\n  getWordingStyleInstruction,\n  getPersonaInstruction,\n} from \"@/config/lyricsPrompts\";\nimport { MASTER_STYLE_CARDS } from \"@/config/masterStyleConfig\";\nimport {\n  SONG_LANGUAGE_OPTIONS,\n  SONG_STYLE_OPTIONS,\n  SONG_STRUCTURE_OPTIONS,\n  CREATION_MODE_OPTIONS,\n  EnumOption,\n} from \"@/config/lyricsEnums\";\nimport type { LyricsFormData } from \"@/shared/types/types\";\n\n/**\n * 根据value获取枚举选项的prompt_instruction\n */\nfunction getEnumInstruction(\n  value: string | number,\n  options: readonly EnumOption[]\n): string {\n  const option = options.find((opt) => opt.value === value);\n  return option?.prompt_instruction || \"\";\n}\n\n/**\n * 根据masterId获取大师风格卡\n */\nfunction getMasterStyleCard(masterId: string) {\n  return MASTER_STYLE_CARDS.find((card) => card.id === masterId);\n}\n\n/**\n * 组装歌词生成的Prompt\n * @param formData - 用户表单数据\n * @returns 包含systemPrompt、userPrompt和closeness的对象\n */\nexport function assembleLyricsPrompt(formData: LyricsFormData) {\n  const songLanguageInstruction = getEnumInstruction(\n    formData.song_language,\n    SONG_LANGUAGE_OPTIONS\n  );\n  const songStyleInstruction = getEnumInstruction(\n    formData.song_style,\n    SONG_STYLE_OPTIONS\n  );\n  const songStructureInstruction = getEnumInstruction(\n    formData.song_structure,\n    SONG_STRUCTURE_OPTIONS\n  );\n  const creationModeInstruction = getEnumInstruction(\n    formData.creation_mode,\n    CREATION_MODE_OPTIONS\n  );\n  const rhymeTypeInstruction = getEnumInstruction(\n    formData.rhyme_type,\n    SONG_LANGUAGE_OPTIONS\n  );\n\n  const outputCountInstruction = getOutputCountInstruction(\n    formData.output_count\n  );\n  const wordingStyleInstruction = getWordingStyleInstruction(\n    formData.wording_style\n  );\n  const personaInstruction = getPersonaInstruction(formData.persona);\n\n  const closenessLevelLabel = getClosenessLevelLabel(formData.closeness);\n  const closenessLevelInstruction = getClosenessLevelInstruction(\n    formData.closeness\n  );\n\n  const masterName = formData.master_id\n    ? (() => {\n        const master = getMasterStyleCard(formData.master_id);\n        return master?.name || \"未知大师\";\n      })()\n    : \"无\";\n\n  const masterStyleStylesRawData = formData.master_id\n    ? (() => {\n        const master = getMasterStyleCard(formData.master_id);\n        return master?.stylesRawData || \"\";\n      })()\n    : \"\";\n\n  const userPrompt = LYRICS_USER_PROMPT_TEMPLATE.replace(\n    \"{song_name}\",\n    formData.song_name\n  )\n    .replace(\"{output_count_instruction}\", outputCountInstruction)\n    .replace(\"{creation_mode_instruction}\", creationModeInstruction)\n    .replace(\"{raw_material}\", formData.raw_material)\n    .replace(\"{requirements}\", formData.requirements || \"无\")\n    .replace(\"{{reference_lyrics}}\", formData.reference_lyrics || \"无\")\n    .replace(\"{song_language_instruction}\", songLanguageInstruction)\n    .replace(\"{song_style_instruction}\", songStyleInstruction)\n    .replace(\"{song_structure_instruction}\", songStructureInstruction)\n    .replace(\"{rhyme_type_instruction}\", rhymeTypeInstruction)\n    .replace(\"{persona_instruction}\", personaInstruction)\n    .replace(\"{wording_style_instruction}\", wordingStyleInstruction)\n    .replace(\"{master_name}\", masterName)\n    .replace(\"{closeness_level_label}\", closenessLevelLabel)\n    .replace(\"{master_style_styles_raw_data}\", masterStyleStylesRawData)\n    .replace(\"{closeness_level_instruction}\", closenessLevelInstruction);\n\n  return {\n    systemPrompt: LYRICS_SYSTEM_PROMPT,\n    userPrompt,\n    closeness: formData.closeness,\n  };\n}\n\n/**\n * 组装歌词生成的System Prompt\n * @returns System Prompt字符串\n */\nexport function getLyricsSystemPrompt(): string {\n  return LYRICS_SYSTEM_PROMPT;\n}\n\n/**\n * 组装歌词生成的User Prompt\n * @param formData - 用户表单数据\n * @returns User Prompt字符串\n */\nexport function getLyricsUserPrompt(formData: LyricsFormData): string {\n  const { userPrompt } = assembleLyricsPrompt(formData);\n  return userPrompt;\n}\n\n/**\n * 获取贴近度参数\n * @param formData - 用户表单数据\n * @returns 贴近度数值（0-100）\n */\nexport function getCloseness(formData: LyricsFormData): number {\n  return formData.closeness;\n}\n"],"names":[],"mappings":"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"}