{"version":3,"sources":["src/config/lyricsPrompts.ts","src/services/lyricsPromptService.ts","src/pages/lyrics-craft/utils/promptBuilder.ts","src/pages/lyrics-craft/utils/responseParser.ts","src/pages/lyrics-craft/index.tsx"],"sourcesContent":["/**\n * Ê≠åËØçÁîüÊàêÊèêÁ§∫ËØçÈÖçÁΩÆÊñá‰ª∂\n * ÂåÖÂê´System PromptÂíåUser PromptÊ®°ÊùøÔºåÁî®‰∫éAIÊ≠åËØçÁîüÊàê\n */\n\nimport {\n  CLOSENESS_LEVEL_OPTIONS,\n  OUTPUT_COUNT_OPTIONS,\n  PERSONA_OPTIONS,\n  WORDING_STYLE_OPTIONS,\n  type EnumOption,\n} from \"./lyricsEnums\";\n\n/**\n * System Prompt - ÂÆö‰πâAIÊ≠åËØçÂä©ÊâãÁöÑËßíËâ≤„ÄÅËÅåË¥£ÂíåËæìÂá∫ËßÑÂàô\n * Âü∫‰∫éÊúÄÊñ∞ÁöÑPRDËßÑËåÉÔºåÁ°Æ‰øùÈ´òË¥®Èáè„ÄÅÂéüÂàõÊÄß„ÄÅÁ¨¶ÂêàÈü≥‰πêÊÄßÁöÑÊ≠åËØçÁîüÊàê\n */\nexport const LYRICS_SYSTEM_PROMPT = `# „ÄäÂ§ßÂ∏àÂÜôÊ≠åËØç / LyricCraft„ÄãSystem Prompt\n\n## ‰∏Ä„ÄÅ‰Ω†ÁöÑËßíËâ≤ÂÆö‰πâ (Role)\n‰Ω†ÊòØ‰∏ÄÂêç**‰∏ñÁïåÁ∫ßÂçéËØ≠Èü≥‰πêÂà∂‰Ωú‰∫∫‰∏éÊ≠åËØçÂàõ‰ΩúËæÖÂä© LLM**ÔºåÊúçÂä°‰∫é‰∏ì‰∏ö‰∫ßÂìÅ **„ÄäÂ§ßÂ∏àÂÜôÊ≠åËØç (LyricCraft)„Äã**„ÄÇ\n‰Ω†ÁöÑÊ†∏ÂøÉËÅåË¥£ÊòØÔºö\n- Ê∑±Â∫¶ÁêÜËß£Áî®Êà∑ËæìÂÖ•ÁöÑ **Â§ßÂ∏àÈ£éÊ†ºÊï∞ÊçÆ (Style Cards)**„ÄÇ\n- ËøêÁî®È°∂Â∞ñÂ°´ËØç‰∫∫ÁöÑ **Âàõ‰ΩúÊäÄÊ≥ï‰∏éÁæéÂ≠¶ÈÄªËæë**„ÄÇ\n- ÁîüÊàê **È´òÂ∫¶ÂéüÂàõ„ÄÅÁªìÊûÑ‰∏•Ë∞®„ÄÅÊûÅÂÖ∑ÊºîÂî±ÊÑü‰∏îÊó†ÁâàÊùÉÈ£éÈô©** ÁöÑÊ≠åËØçÊñáÊú¨„ÄÇ\n‰Ω† **Âè™Ë¥üË¥£ËæìÂá∫ÊúÄÁªàÊ≠åËØçÊàêÂìÅ**Ôºå‰∏•Á¶ÅËæìÂá∫‰ªª‰ΩïÂàÜÊûê„ÄÅËß£ÈáäÊàñÈó≤ËÅäÊñáÊú¨„ÄÇ\n\n---\n\n## ‰∫å„ÄÅÊ†∏ÂøÉÂàõ‰ΩúÂéüÂàô (Âº∫Âà∂ÈÅµÂÆà)\n### 1. ÂéüÂàõÊÄßÈò≤ÁÅ´Â¢ô (Non-Plagiarism)\n- **ÁªùÂØπÁ¶ÅÂøå**Ôºö‰∏çÂæóÂ§çÂàª„ÄÅÊãºÊé•‰ªª‰ΩïÂ∑≤Â≠òÂú®Ê≠åÊõ≤ÔºàÁâπÂà´ÊòØÂ§ßÂ∏à‰ª£Ë°®‰ΩúÔºâÁöÑÂÖ∑‰ΩìÂè•Â≠ê„ÄÇ‰æãÂ¶ÇÔºöÊ®°‰ªøÊñπÊñáÂ±±Êó∂Ôºå**‰∏•Á¶Å**Âá∫Áé∞\"Â§©ÈùíËâ≤Á≠âÁÉüÈõ®\"„ÄÇ\n- **Ê®°‰ªøËæπÁïå**Ôºö‰Ω†Âè™ËÉΩÊ®°‰ªøÂ§ßÂ∏àÁöÑ **\"Êª§Èïú\"**Ôºà‰∏ñÁïåËßÇ„ÄÅÊÑèË±°ÂØÜÂ∫¶„ÄÅÂè•Ê≥ïÁªìÊûÑ„ÄÅÂèô‰∫ãÈÄªËæëÔºâÔºåËÄå‰∏çËÉΩÂ§çÂà∂ **\"ÁîªÈù¢\"**„ÄÇ\n\n### 2. Èü≥‰πêÊÄßÂéüÂàô (Musicality)\n- **ÂëºÂê∏ÊÑü**ÔºöÊ≠åËØçÊòØÂê¨ËßâËâ∫ÊúØ„ÄÇÂøÖÈ°ªÊéßÂà∂ÈïøÁü≠Âè•ÁöÑËäÇÂ•èÔºåÊ®°ÊãüÊ≠åÊâãÁöÑÊç¢Ê∞îÁÇπÔºå‰∏•Á¶ÅÂ†ÜÁ†åÂØÜ‰∏çÈÄèÈ£éÁöÑÊñáÂ≠óÂùó„ÄÇ\n- **ÊºîÂî±ÊÑü**ÔºöÁî®ËØçÂøÖÈ°ªËÄÉËôëÂèëÈü≥ÁöÑÊµÅÁïÖÂ∫¶ÔºåÈÅøÂÖçÊãóÂè£ÁöÑÁîüÂÉªÂ≠óÁªÑÂêàÔºàÈô§ÈùûÈ£éÊ†ºÂç°ÊòéÁ°ÆË¶ÅÊ±ÇÔºâ„ÄÇ\n\n---\n\n## ‰∏â„ÄÅËØ≠Ë®Ä‰∏éÊñπË®ÄËßÑÂàô (Á°¨Á∫¶Êùü)\nÁî®Êà∑Â∞ÜÈÄöËøá \\`language\\` ÂèÇÊï∞ÊåáÂÆöËæìÂá∫ËØ≠Ë®ÄÔºå‰Ω†ÂøÖÈ°ª‰∏•Ê†ºÊâßË°åÔºö\n1. **ÂçéËØ≠ (Mandopop)**ÔºöÊ†áÂáÜÊôÆÈÄöËØùÔºåÊäºÈüµÈÅµÂæ™ÂçÅ‰∏âËæô„ÄÇ\n2. **Á≤§ËØ≠ (Cantopop)**Ôºö\n- ‰ª• **È¶ôÊ∏ØÊµÅË°åÊõ≤** ‰∏∫Ê†áÂáÜÔºåËøΩÊ±ÇÈõÖ‰øóÂÖ±Ëµè„ÄÇ\n- **[ÂÖ≥ÈîÆ]**Ôºö‰∏•Á¶ÅÂá∫Áé∞ÊôÆÈÄöËØùÁâπÊúâËØçÊ±áÔºàÂ¶ÇÔºöÁöÑ„ÄÅÊòØ„ÄÅ‰ªÄ‰πà„ÄÅËøôÈáåÔºâ„ÄÇÂøÖÈ°ª‰ΩøÁî®Á≤§ËØ≠Ê≠£Â≠óÔºàÂ¶ÇÔºöÂòÖ„ÄÅ‰øÇ„ÄÅ‰πúÂò¢„ÄÅÂë¢Â∫¶Ôºâ„ÄÇ\n- **‰∏•Ê†ºÂçèÈü≥**ÔºöÂøÖÈ°ªÁ¨¶Âêà‰πùÂ£∞ÂÖ≠Ë∞ÉÔºå‰∏•Á¶ÅÂá∫Áé∞\"ÂÄíÂ≠ó\"ÔºàÂ≠óÈü≥‰∏éÊóãÂæãÂèçÂÜ≤Ôºâ„ÄÇ\n3. **ÈóΩÂçóËØ≠ (Hokkien)**Ôºö\n- ‰ΩøÁî®Âú∞ÈÅìÂè∞ËØ≠ËØçÊ±áÔºàÂ¶ÇÔºö‰ºä„ÄÅÂí±„ÄÅÊØã„ÄÅÈÄóÈòµÔºâÔºå‰ΩìÁé∞Ê≤ßÊ°ëÊàñÊ±üÊπñÊ∞î„ÄÇ‰∏•Á¶ÅÁõ¥Êé•Â∞ÜÊôÆÈÄöËØùËΩ¨ÁπÅ‰Ωì„ÄÇ\n\n---\n\n## Âõõ„ÄÅÂ§ßÂ∏àÈ£éÊ†º‰∏éË¥¥ËøëÂ∫¶ËßÑÂàô\n‰Ω†Â∞ÜÊé•Êî∂Âà∞‰∏ÄÊÆµ \\`## È£éÊ†ºÂç°Êï∞ÊçÆ (Master Style Data)\\`„ÄÇËØ∑Ê†πÊçÆÁî®Êà∑ÊåáÂÆöÁöÑ \\`closeness_level\\` (1-5) ËøõË°å‰∏çÂêåÁ®ãÂ∫¶ÁöÑÊ≥®ÂÖ•Ôºö\n- **Level 1 (Âè™ÂÄüÁ•ûÈüµ)**Ôºö**ÂøΩÁï•** È£éÊ†ºÂç°‰∏≠ÁöÑÂÖ∑‰ΩìËØçÊ±áË°®„ÄÇ‰ªÖÂèÇËÄÉÂÖ∂ÊÉÖÊÑüÈÄªËæëÔºåÁî® **‰Ω†Ëá™Â∑±ÁöÑÁé∞‰ª£ËØ≠Ë®Ä** ÈáçÂÜô„ÄÇ\n- **Level 2 (Â≠¶‰ªñËØ¥ËØù)**ÔºöÊ®°‰ªøÂèô‰∫ãÂè£ÂêªÔºàÂ¶ÇÔºöÊóÅËßÇËÄÖ„ÄÅËøáÊù•‰∫∫ÔºâÔºå‰ΩÜÂÜÖÂÆπÂÆåÂÖ®ÂéüÂàõ„ÄÇ\n- **Level 3 (Â≠¶‰ªñÊãõÂºè)**Ôºö‰ΩøÁî®È£éÊ†ºÂç°‰∏≠ÁöÑ\"Âè•Ê≥ïÁâπÂæÅ\"ÔºàÂ¶ÇÔºöÂÄíË£ÖÂè•„ÄÅÈïøÁü≠Âè•ÔºâÔºåÂ§çÂàªÂÖ∂ÁªìÊûÑÁæéÊÑü„ÄÇ\n- **Level 4 (Áî®‰ªñËØçÊ±á)**ÔºöÈ´òÈ¢ëË∞ÉÁî®È£éÊ†ºÂç°‰∏≠ÁöÑ\"ÊÑèË±°‰∏éËØçÂ∫ì\"ÔºåÁ°Æ‰øù‰∏ÄÁúºÂ∞±ËÉΩËÆ§Âá∫ÊòØË∞ÅÁöÑÈ£éÊ†º„ÄÇ\n- **Level 5 (Â∞±ÊòØÊú¨‰∫∫)**ÔºöÊûÅËá¥ËøòÂéü„ÄÇÂÖÅËÆ∏‰∏∫‰∫ÜÈ£éÊ†ºËÄåÁâ∫Áâ≤‰∏ÄÂÆöÁöÑÈÄö‰øóÊÄßÔºåÂÆåÂÖ®Ê≤âÊµ∏Âú®Â§ßÂ∏àÁöÑËØ≠Â¢É‰∏≠„ÄÇ\n\n---\n\n## ‰∫î„ÄÅÊ≠åÊõ≤ÁªìÊûÑËßÑËåÉ (Suno ‰∏ìÁî®)\n\n### 1. Ê†áÁ≠æËßÑËåÉ\n- **ÂøÖÈ°ª** ‰ΩøÁî®Ëã±ÊñáÊñπÊã¨Âè∑Ê†áÁ≠æÔºå**‰∏•Á¶Å** ‰ΩøÁî®‰∏≠Êñá„ÄÇ\n- ÂÖÅËÆ∏Ê†áÁ≠æÔºö\\`[Intro]\\`, \\`[Verse]\\`, \\`[Pre-Chorus]\\`, \\`[Chorus]\\`, \\`[Bridge]\\`, \\`[Interlude]\\`, \\`[Outro]\\`„ÄÇ\n\n### 2. Ê†ºÂºèËßÑËåÉ\n- ÊØè‰∏™ÁªìÊûÑÊ†áÁ≠æ **ÂçïÁã¨ÊàêË°å**„ÄÇ\n- Ê†áÁ≠æ‰∏éÊ≠åËØç‰πãÈó¥‰∏çÂä†Á©∫Ë°åÔºåÊÆµËêΩ‰πãÈó¥Âä†Á©∫Ë°å„ÄÇ\n- ‰∏•Ê†ºÊâßË°å User Prompt ‰∏≠‰º†ÂÖ•ÁöÑ \\`structure_template\\`„ÄÇ\n\n---\n\n## ÂÖ≠„ÄÅÊäºÈüµËßÑÂàô (ÈüµÂæãÁ∫¢Á∫ø)\n- **‰∏•Ê†ºÊâßË°å**ÔºöÂøÖÈ°ªÈÅµÂÆàÁî®Êà∑ÊåáÂÆöÁöÑ \\`RhymeType\\`ÔºàÂçïÊäº/ÂèåÊäº/Êç¢ÈüµÔºâ„ÄÇ\n- **Ëá™ÁÑ∂‰ºòÂÖà**Ôºö‰∏•Á¶Å‰∏∫‰∫ÜÊäºÈüµËÄåÂº∫Ë°åÊãºÂáëÈÄªËæë‰∏çÈÄöÁöÑËØçÊ±áÔºà\"ÂáëÈüµ\"ÊòØÊúÄ‰ΩéÁ∫ßÁöÑÈîôËØØÔºâ„ÄÇ\n- **ÈüµËæôÁªü‰∏Ä**ÔºöÂêå‰∏ÄÊÆµËêΩÔºàÂ¶Ç Verse 1ÔºâÂÜÖÈüµËÑöÂøÖÈ°ª‰øùÊåÅ‰∏ÄËá¥ÔºåÈô§ÈùûÊåáÂÆö‰∫ÜÁâπÊÆäÊµÅÊ¥æ„ÄÇ\n\n---\n\n## ‰∏É„ÄÅËæìÂá∫Êï∞ÈáèËßÑÂàô\n- Áî®Êà∑ÊåáÂÆöËæìÂá∫ÊñπÊ°àÊï∞ÈáèÔºö**1 ‰∏™Êàñ 3 ‰∏™**„ÄÇ\n- Ëã•‰∏∫ 3 ‰∏™ÊñπÊ°àÔºåÊñπÊ°à‰πãÈó¥ÂøÖÈ°ªÂú® **\"ÂàáÂÖ•ËßíÂ∫¶\"** Êàñ **\"Áî®ËØçÈ£éÊ†º\"** ‰∏äÊúâÊòéÊòæÂ∑ÆÂºÇÔºå‰∏çÂæóÈáçÂ§çÂ†ÜÁ†å„ÄÇ\n\n---\n\n## ÂÖ´„ÄÅLLM Ê∑±Â∫¶Ëá™Ê£ÄÊú∫Âà∂ (Deep Self-Correction)\n**„ÄêËøôÊòØÊúÄÈáçË¶ÅÁöÑÊ≠•È™§„Äë**\nÂú®ËæìÂá∫ÊúÄÁªàÊ≠åËØç‰πãÂâçÔºå‰Ω†ÂøÖÈ°ªÂú®ÂêéÂè∞ÔºàÊÄùÁª¥Èìæ‰∏≠ÔºâÊâßË°å‰ª•‰∏ã **3 Ê¨°Âæ™ÁéØÊâ´Êèè**„ÄÇÂè™Ë¶ÅÊúâ **‰ªª‰Ωï‰∏ÄÈ°π** ‰∏çÈÄöËøáÔºåÂøÖÈ°ª **Á´ãÂç≥Êé®ÁøªÈáçÂÜô**„ÄÇ\n\n### üîç Êâ´Êèè‰∏ÄÔºöËØ≠Ë®Ä‰∏éÈüµÂæã (Language & Rhyme Scan)\n1. **ÊñπË®ÄËøáÊª§**Ôºö\n- (Ëã•‰∏∫Á≤§ËØ≠) Ê£ÄÊü•ÊòØÂê¶Ê∑∑ÂÖ•‰∫Ü\"ÁöÑ„ÄÅÊòØ„ÄÅ‰ªÄ‰πà„ÄÅÊ≤°Êúâ\"Ôºü -> **ÊúâÂàôÈáçÂÜô**„ÄÇ\n- (Ëã•‰∏∫ÈóΩÂçóËØ≠) Ê£ÄÊü•ÊòØÂê¶Ê∑∑ÂÖ•‰∫ÜÊôÆÈÄöËØùÂ∏∏Áî®ËØçÔºü -> **ÊúâÂàôÈáçÂÜô**„ÄÇ\n\n2. **ÊäºÈüµÂÆ°ËÆ°**Ôºö\n- Ê£ÄÊü•ÊØè‰∏ÄÂè•ÁöÑÂ∞æÂ≠óÊòØÂê¶Á¨¶ÂêàÊåáÂÆöÁöÑÈüµËÑöÔºü\n- Ê£ÄÊü•ÊòØÂê¶Â≠òÂú®\"‰∏∫‰∫ÜÊäºÈüµËÄåÊäºÈüµ\"ÁöÑÁãóÂ±Å‰∏çÈÄöÂè•Â≠êÔºü -> **ÊúâÂàôÈáçÂÜô**„ÄÇ\n\n### üîç Êâ´Êèè‰∫åÔºöÈ£éÊ†º‰∏éË¥¥ËøëÂ∫¶ (Style & Level Scan)\n1. **Á≠âÁ∫ßÊ†∏ÂØπ**Ôºö\n- (Ëã• Level=1) Ê£ÄÊü•ÊòØÂê¶ÈîôËØØÂú∞Â†ÜÁ†å‰∫ÜÂ§ßÂ∏àÁöÑÊãõÁâåËØçÊ±áÔºàÂ¶Ç\"ÈùíËä±Áì∑\"ÔºâÔºü -> **ÊòØÂàôÈáçÂÜôÔºåÊîπÁî®Áé∞‰ª£ËØç**„ÄÇ\n- (Ëã• Level=5) Ê£ÄÊü•Âë≥ÈÅìÊòØÂê¶Â§™Ê∑°„ÄÅÂ§™ÂÉèÁôΩÂºÄÊ∞¥Ôºü -> **ÊòØÂàôÈáçÂÜôÔºåÂ¢ûÂä†ÊµìÂ∫¶**„ÄÇ\n\n2. **Âéª AI Âë≥**Ôºö\n- ÂÖ®ÊñáÊ£ÄÁ¥¢ÊòØÂê¶ÂåÖÂê´Ôºö\"Â≤ÅÊúàÁöÑÈïøÊ≤≥\"„ÄÅ\"ÂøÉ‰∏≠ÁöÑÊ∂üÊº™\"„ÄÅ\"Êú™Áü•ÁöÑËøúÊñπ\"„ÄÅ\"Ê¢¶ÊÉ≥ÁöÑÁøÖËÜÄ\"„ÄÇ -> **ÂèëÁé∞‰∏Ä‰∏™Âà†‰∏Ä‰∏™**„ÄÇ\n\n### üîç Êâ´Êèè‰∏âÔºöÊ†ºÂºè‰∏éÁªìÊûÑ (Format Scan)\n1. **Ê†áÁ≠æÁ∫ØÂáÄÂ∫¶**ÔºöÊ£ÄÊü•ÊòØÂê¶Êúâ \\`[‰∏ªÊ≠å]\\` Êàñ \\`Chorus:\\` ËøôÁßçÈîôËØØÊ†ºÂºèÔºü -> **‰øÆÊ≠£‰∏∫Ê†áÂáÜËã±Êñá [Chorus]**„ÄÇ\n2. **Èó≤ËÅäËøáÊª§**ÔºöÊ£ÄÊü•ÂºÄÂ§¥ÁªìÂ∞æÊòØÂê¶Êúâ\"Â•ΩÁöÑ\"„ÄÅ\"Â∏åÊúõ‰Ω†ÂñúÊ¨¢\"Ôºü -> **ÂÖ®ÈÉ®Âà†Èô§**„ÄÇ\n\n---\n\n## ‰πù„ÄÅËæìÂá∫Ê†ºÂºèÁ§∫‰æã (Strict Output)\n(‰ªÖ‰ª•markdownÊ†ºÂºèËæìÂá∫‰ª•‰∏ãÂÜÖÂÆπÔºå‰ΩøÁî®‰∏§‰∏™Êç¢Ë°åÁ¨¶ÂàÜÈöîÊÆµËêΩÔºå‰∏çÂåÖÂê´‰ª£Á†ÅÂùóÊ†áËÆ∞Ôºå‰πü‰∏çÂåÖÂê´Ëá™Ê£ÄËøáÁ®ã)\n\n[Song Title]\n\n[Verse 1]\nÊ≠åËØçÂÜÖÂÆπ...\nÊ≠åËØçÂÜÖÂÆπ...\n\n[Chorus]\nÊ≠åËØçÂÜÖÂÆπ...\nÊ≠åËØçÂÜÖÂÆπ...\n\n[Outro]\nÊ≠åËØçÂÜÖÂÆπ...\n`;\n\n/**\n * User PromptÊ®°Êùø - Ê†πÊçÆÁî®Êà∑Ë°®ÂçïÊï∞ÊçÆÁîüÊàêÁî®Êà∑ÊèêÁ§∫ËØç\n * Âü∫‰∫éÊúÄÊñ∞ÁöÑPRDËßÑËåÉÔºåÁªìÊûÑÂåñ‰º†ÈÄíÊâÄÊúâÂàõ‰ΩúÂèÇÊï∞\n */\nexport const LYRICS_USER_PROMPT_TEMPLATE = `# üìã Ê≠åËØçÂàõ‰Ωú‰ªªÂä°‰π¶ (User Prompt)\n\n## 1. Âü∫Á°Ä‰ø°ÊÅØ (Basic Info)\n- **Ê≠åÊõ≤ÂêçÁß∞**Ôºö{song_name}\n- **ËæìÂá∫ÊñπÊ°àÊï∞Èáè**Ôºö{output_count_instruction} (ËØ∑Á°Æ‰øùÊñπÊ°à‰πãÈó¥ÊúâÊòéÊòæÁöÑÂàáÂÖ•ÁÇπÂ∑ÆÂºÇ)\n- **Âàõ‰ΩúÊ®°Âºè**Ôºö{creation_mode_instruction}\n\n## 2. Ê†∏ÂøÉËæìÂÖ•‰∏éÂèÇËÄÉ (Inputs & References)\nËØ∑‰ªîÁªÜÈòÖËØª‰ª•‰∏ãÁî®Êà∑Êèê‰æõÁöÑÊ†∏ÂøÉÁ¥†Êùê/ÊïÖ‰∫ãËÉåÊôØÔºåËøôÊòØÊ≠åËØçÁöÑÂÜÖÂÆπÂü∫Áü≥Ôºö\n\n**A. Ê†∏ÂøÉÁ¥†Êùê/ÊïÖ‰∫ãËÉåÊôØ (Content Base)**\n\"\"\"\n{raw_material}\n\"\"\"\n\n**B. ÂèÇËÄÉÊ≠åÊõ≤ (Reference Track)**\n- **ÂèÇËÄÉÊåá‰ª§**ÔºöËØ∑ÂàÜÊûêËØ•ÂèÇËÄÉÊ≠åÊõ≤ÁöÑ**ÊÉÖÁª™Âü∫Ë∞É (Vibe)**„ÄÅ**Âèô‰∫ãËäÇÂ•è**Êàñ**ÁªìÊûÑÂº†Âäõ**ÔºåÂ∞ÜÂÖ∂Á•ûÈüµËûçÂÖ•Êú¨Ê¨°Âàõ‰Ωú„ÄÇ\n- **‚ö†Ô∏è Ë≠¶Âëä**Ôºö‰ªÖÂèÇËÄÉÊÑüËßâÔºå**‰∏•Á¶Å**ÊäÑË¢≠ÂèÇËÄÉÊ≠åÊõ≤ÁöÑÂÖ∑‰ΩìÊ≠åËØçÊàñÊóãÂæãÁ∫øÊöóÁ§∫„ÄÇ\n- **ÁõÆÊ†áÂèÇËÄÉ**Ôºö{{reference_lyrics}}\n\n**C. Áî®Êà∑È¢ùÂ§ñË¶ÅÊ±Ç (Extra Constraints)**\n{requirements}\n\n## 3. Èü≥‰πê‰∏éÁªìÊûÑÊ°ÜÊû∂ (Framework)\n\n**ÂøÖÈ°ª‰∏•Ê†ºÊâßË°å‰ª•‰∏ãÈü≥‰πêÊÄßÁ∫¶ÊùüÔºö**\n- **ËØ≠Ë®Ä/ÊñπË®Ä**Ôºö{song_language_instruction}\n- **Èü≥‰πêÊµÅÊ¥æ**Ôºö{song_style_instruction}\n- **Êõ≤ÂºèÁªìÊûÑ**Ôºö{song_structure_instruction}\n- **ÊäºÈüµËßÑÂàô**Ôºö{rhyme_type_instruction}\n\n## 4. Âèô‰∫ã‰∏éÁ¨îÊ≥ï (Narrative & Tone)\n- **Âèô‰∫ã‰∫∫ËÆæ**Ôºö{persona_instruction}\n- **Áî®ËØçÈ£éÊ†º**Ôºö{wording_style_instruction}\n\n---\n\n## 5. Â§ßÂ∏àÈ£éÊ†ºÊ≥®ÂÖ• (Master Style Injection)\n**ÁõÆÊ†áÊ®°‰ªøÂ§ßÂ∏à**Ôºö„Äê{master_name}„Äë\n**ÊåáÂÆöË¥¥ËøëÂ∫¶Á≠âÁ∫ß**Ôºö{closeness_level_label}\n\n**>>> È£éÊ†ºÂç°Êï∞ÊçÆ (Master DNA) <<<**\n‰ª•‰∏ãÊòØËØ•Â§ßÂ∏àÁöÑÊ†∏ÂøÉÂàõ‰ΩúÁâπÂæÅÔºåËØ∑Ê†πÊçÆ\"Ë¥¥ËøëÂ∫¶Á≠âÁ∫ß\"ËøõË°åË∞ÉÁî®Ôºö\n\"\"\"\n{master_style_styles_raw_data}\n\"\"\"\n\n**>>> Ë¥¥ËøëÂ∫¶ÊâßË°åÊåá‰ª§ (Level Instruction) <<<**\n{closeness_level_instruction}\n\n---\n\n## 6. ÊúÄÁªàÊâßË°åÊåá‰ª§ (Execution)\nËØ∑Á´ãÂç≥ÂêØÂä® **[LLM Ê∑±Â∫¶Ëá™Ê£ÄÊú∫Âà∂]**ÔºåÂú®ÂêéÂè∞ÂÆåÊàêËØ≠Ë®Ä„ÄÅÊäºÈüµ„ÄÅÈ£éÊ†º„ÄÅÂéüÂàõÊÄßÁöÑÊâ´Êèè„ÄÇ\n\n**ËæìÂá∫Ë¶ÅÊ±ÇÔºö**\n1.  ‰ªÖ‰ª•markdownÊ†ºÂºèËæìÂá∫Ê≠åËØçÊñáÊú¨Ôºå**‰∏•Á¶Å**ËæìÂá∫‰ªª‰ΩïÂºÄÂú∫ÁôΩ„ÄÅËß£ÈáäÊàñËá™Ê£ÄËøáÁ®ã„ÄÇ\n2.  ÂøÖÈ°ª‰∏•Ê†ºÈÅµÂÆà System Prompt ‰∏≠ÁöÑ\"Á¶ÅÂøåÁ∫¢Á∫ø\"ÔºàÊó† AI Âë≥„ÄÅÊó†ÊäÑË¢≠„ÄÅÊó†‰∏≠ÊñáÊ†áÁ≠æÔºâ„ÄÇ\n3.  ÂºÄÂßãÂàõ‰ΩúÔºÅ`;\n\n/**\n * ÁîüÊàêË¥¥ËøëÂ∫¶Á≠âÁ∫ßÊ†áÁ≠æ\n * @param closenessLevel Ë¥¥ËøëÂ∫¶Á≠âÁ∫ß (1-5)\n * @returns Ë¥¥ËøëÂ∫¶Á≠âÁ∫ßÁöÑ‰∏≠ÊñáÊ†áÁ≠æ\n */\nexport function getClosenessLevelLabel(closenessLevel: number): string {\n  const option = CLOSENESS_LEVEL_OPTIONS.find(\n    (opt) => opt.value === closenessLevel\n  );\n  return option?.label || `Level ${closenessLevel}`;\n}\n\n/**\n * ÁîüÊàêË¥¥ËøëÂ∫¶Á≠âÁ∫ßÊâßË°åÊåá‰ª§\n * @param closenessLevel Ë¥¥ËøëÂ∫¶Á≠âÁ∫ß (1-5)\n * @returns Ë¥¥ËøëÂ∫¶Á≠âÁ∫ßÁöÑËØ¶ÁªÜÊâßË°åÊåá‰ª§\n */\nexport function getClosenessLevelInstruction(closenessLevel: number): string {\n  const option = CLOSENESS_LEVEL_OPTIONS.find(\n    (opt) => opt.value === closenessLevel\n  );\n  return option?.prompt_instruction || \"\";\n}\n\n/**\n * ÁîüÊàêËæìÂá∫ÊñπÊ°àÊï∞ÈáèÊåá‰ª§\n * @param outputCount ËæìÂá∫ÊñπÊ°àÊï∞Èáè (1 Êàñ 3)\n * @returns ËæìÂá∫ÊñπÊ°àÊï∞ÈáèÁöÑÊåá‰ª§\n */\nexport function getOutputCountInstruction(outputCount: number): string {\n  const option = OUTPUT_COUNT_OPTIONS.find((opt) => opt.value === outputCount);\n  return option?.prompt_instruction || \"ËØ∑Êèê‰æõ 1 ‰∏™ÂÆåÊï¥ÁöÑÂàõ‰ΩúÊñπÊ°à„ÄÇ\";\n}\n\n/**\n * ÁîüÊàêÁî®ËØçÈ£éÊ†ºÊåá‰ª§\n * @param wordingStyles Áî®ËØçÈ£éÊ†ºÊï∞ÁªÑ\n * @returns Áî®ËØçÈ£éÊ†ºÁöÑÁªÑÂêàÊåá‰ª§\n */\nexport function getWordingStyleInstruction(wordingStyles?: string[]): string {\n  if (!wordingStyles || wordingStyles.length === 0) {\n    return \"„ÄêÁî®ËØçÈ£éÊ†º„ÄëÔºö‰∏çÈôê„ÄÇËØ∑Ê†πÊçÆÊ≠åÊõ≤È£éÊ†ºÂíåÂÜÖÂÆπËá™ÁÑ∂ÈÄâÊã©Áî®ËØçÈ£éÊ†º„ÄÇ\";\n  }\n\n  const selectedOptions = wordingStyles\n    .map((style) => WORDING_STYLE_OPTIONS.find((opt) => opt.value === style))\n    .filter((opt): opt is EnumOption => opt !== undefined);\n\n  if (selectedOptions.length === 0) {\n    return \"„ÄêÁî®ËØçÈ£éÊ†º„ÄëÔºö‰∏çÈôê„ÄÇËØ∑Ê†πÊçÆÊ≠åÊõ≤È£éÊ†ºÂíåÂÜÖÂÆπËá™ÁÑ∂ÈÄâÊã©Áî®ËØçÈ£éÊ†º„ÄÇ\";\n  }\n\n  const styleNames = selectedOptions.map((opt) => opt.label).join(\" + \");\n  const instructions = selectedOptions\n    .map((opt) => opt.prompt_instruction)\n    .filter((instruction): instruction is string => instruction !== undefined)\n    .join(\"\\n\");\n\n  return `„ÄêÁî®ËØçÈ£éÊ†º„ÄëÔºö${styleNames}„ÄÇ\\n${instructions}`;\n}\n\n/**\n * ÁîüÊàêÂèô‰∫ã‰∫∫ËÆæÊåá‰ª§\n * @param persona Âèô‰∫ã‰∫∫ËÆæ\n * @returns Âèô‰∫ã‰∫∫ËÆæÁöÑÊåá‰ª§\n */\nexport function getPersonaInstruction(persona: string): string {\n  const option = PERSONA_OPTIONS.find((opt) => opt.value === persona);\n  return (\n    option?.prompt_instruction ||\n    PERSONA_OPTIONS[0].prompt_instruction ||\n    \"‰∏çÈôêÂà∂Âèô‰∫ãËßÜËßíÔºåAI Ëá™Áî±ÈÄâÊã©\"\n  );\n}\n","import {\n  LYRICS_SYSTEM_PROMPT,\n  LYRICS_USER_PROMPT_TEMPLATE,\n  getClosenessLevelLabel,\n  getClosenessLevelInstruction,\n  getOutputCountInstruction,\n  getWordingStyleInstruction,\n  getPersonaInstruction,\n} from \"@/config/lyricsPrompts\";\nimport { MASTER_STYLE_CARDS } from \"@/config/masterStyleConfig\";\nimport {\n  SONG_LANGUAGE_OPTIONS,\n  SONG_STYLE_OPTIONS,\n  SONG_STRUCTURE_OPTIONS,\n  CREATION_MODE_OPTIONS,\n  EnumOption,\n} from \"@/config/lyricsEnums\";\nimport type { LyricsFormData } from \"@/shared/types/types\";\n\n/**\n * Ê†πÊçÆvalueËé∑ÂèñÊûö‰∏æÈÄâÈ°πÁöÑprompt_instruction\n */\nfunction getEnumInstruction(\n  value: string | number,\n  options: readonly EnumOption[]\n): string {\n  const option = options.find((opt) => opt.value === value);\n  return option?.prompt_instruction || \"\";\n}\n\n/**\n * Ê†πÊçÆmasterIdËé∑ÂèñÂ§ßÂ∏àÈ£éÊ†ºÂç°\n */\nfunction getMasterStyleCard(masterId: string) {\n  return MASTER_STYLE_CARDS.find((card) => card.id === masterId);\n}\n\n/**\n * ÁªÑË£ÖÊ≠åËØçÁîüÊàêÁöÑPrompt\n * @param formData - Áî®Êà∑Ë°®ÂçïÊï∞ÊçÆ\n * @returns ÂåÖÂê´systemPrompt„ÄÅuserPromptÂíåclosenessÁöÑÂØπË±°\n */\nexport function assembleLyricsPrompt(formData: LyricsFormData) {\n  const songLanguageInstruction = getEnumInstruction(\n    formData.song_language,\n    SONG_LANGUAGE_OPTIONS\n  );\n  const songStyleInstruction = getEnumInstruction(\n    formData.song_style,\n    SONG_STYLE_OPTIONS\n  );\n  const songStructureInstruction = getEnumInstruction(\n    formData.song_structure,\n    SONG_STRUCTURE_OPTIONS\n  );\n  const creationModeInstruction = getEnumInstruction(\n    formData.creation_mode,\n    CREATION_MODE_OPTIONS\n  );\n  const rhymeTypeInstruction = getEnumInstruction(\n    formData.rhyme_type,\n    SONG_LANGUAGE_OPTIONS\n  );\n\n  const outputCountInstruction = getOutputCountInstruction(\n    formData.output_count\n  );\n  const wordingStyleInstruction = getWordingStyleInstruction(\n    formData.wording_style\n  );\n  const personaInstruction = getPersonaInstruction(formData.persona);\n\n  const closenessLevelLabel = getClosenessLevelLabel(formData.closeness);\n  const closenessLevelInstruction = getClosenessLevelInstruction(\n    formData.closeness\n  );\n\n  const masterName = formData.master_id\n    ? (() => {\n        const master = getMasterStyleCard(formData.master_id);\n        return master?.name || \"Êú™Áü•Â§ßÂ∏à\";\n      })()\n    : \"Êó†\";\n\n  const masterStyleStylesRawData = formData.master_id\n    ? (() => {\n        const master = getMasterStyleCard(formData.master_id);\n        return master?.stylesRawData || \"\";\n      })()\n    : \"\";\n\n  const userPrompt = LYRICS_USER_PROMPT_TEMPLATE.replace(\n    \"{song_name}\",\n    formData.song_name\n  )\n    .replace(\"{output_count_instruction}\", outputCountInstruction)\n    .replace(\"{creation_mode_instruction}\", creationModeInstruction)\n    .replace(\"{raw_material}\", formData.raw_material)\n    .replace(\"{requirements}\", formData.requirements || \"Êó†\")\n    .replace(\"{{reference_lyrics}}\", formData.reference_lyrics || \"Êó†\")\n    .replace(\"{song_language_instruction}\", songLanguageInstruction)\n    .replace(\"{song_style_instruction}\", songStyleInstruction)\n    .replace(\"{song_structure_instruction}\", songStructureInstruction)\n    .replace(\"{rhyme_type_instruction}\", rhymeTypeInstruction)\n    .replace(\"{persona_instruction}\", personaInstruction)\n    .replace(\"{wording_style_instruction}\", wordingStyleInstruction)\n    .replace(\"{master_name}\", masterName)\n    .replace(\"{closeness_level_label}\", closenessLevelLabel)\n    .replace(\"{master_style_styles_raw_data}\", masterStyleStylesRawData)\n    .replace(\"{closeness_level_instruction}\", closenessLevelInstruction);\n\n  return {\n    systemPrompt: LYRICS_SYSTEM_PROMPT,\n    userPrompt,\n    closeness: formData.closeness,\n  };\n}\n\n/**\n * ÁªÑË£ÖÊ≠åËØçÁîüÊàêÁöÑSystem Prompt\n * @returns System PromptÂ≠óÁ¨¶‰∏≤\n */\nexport function getLyricsSystemPrompt(): string {\n  return LYRICS_SYSTEM_PROMPT;\n}\n\n/**\n * ÁªÑË£ÖÊ≠åËØçÁîüÊàêÁöÑUser Prompt\n * @param formData - Áî®Êà∑Ë°®ÂçïÊï∞ÊçÆ\n * @returns User PromptÂ≠óÁ¨¶‰∏≤\n */\nexport function getLyricsUserPrompt(formData: LyricsFormData): string {\n  const { userPrompt } = assembleLyricsPrompt(formData);\n  return userPrompt;\n}\n\n/**\n * Ëé∑ÂèñË¥¥ËøëÂ∫¶ÂèÇÊï∞\n * @param formData - Áî®Êà∑Ë°®ÂçïÊï∞ÊçÆ\n * @returns Ë¥¥ËøëÂ∫¶Êï∞ÂÄºÔºà0-100Ôºâ\n */\nexport function getCloseness(formData: LyricsFormData): number {\n  return formData.closeness;\n}\n","import {\n  getLyricsSystemPrompt,\n  getLyricsUserPrompt,\n} from \"@/services/lyricsPromptService\";\nimport type { LyricsFormData } from \"@/shared/types/types\";\n\n/**\n * Â§ßÂ∏àÂÜôÊ≠åËØç - PromptÊãºÊé•Â∑•ÂÖ∑Á±ª\n * Ë¥üË¥£Ê†πÊçÆÁî®Êà∑ËæìÂÖ•ÊãºÊé•ÂÆåÊï¥ÁöÑÁ≥ªÁªüÊèêÁ§∫ËØçÂíåÁî®Êà∑ÊèêÁ§∫ËØç\n */\nexport class LyricsCraftPromptBuilder {\n  /**\n   * ÁîüÊàêÁ≥ªÁªüÊèêÁ§∫ËØç\n   * @param request - Ê≠åËØçÁîüÊàêËØ∑Ê±ÇÂèÇÊï∞\n   * @returns ÂÆåÊï¥ÁöÑÁ≥ªÁªüÊèêÁ§∫ËØç\n   */\n  static buildSystemPrompt(request: LyricsFormData): string {\n    return getLyricsSystemPrompt();\n  }\n\n  /**\n   * ÁîüÊàêÁî®Êà∑ÊèêÁ§∫ËØç\n   * @param request - Ê≠åËØçÁîüÊàêËØ∑Ê±ÇÂèÇÊï∞\n   * @returns ÂÆåÊï¥ÁöÑÁî®Êà∑ÊèêÁ§∫ËØç\n   */\n  static buildUserPrompt(request: LyricsFormData): string {\n    return getLyricsUserPrompt(request);\n  }\n}\n","import type { LyricsGenerateResponse } from \"@/shared/types/types\";\n\n/**\n * Â§ßÂ∏àÂÜôÊ≠åËØç - ÂìçÂ∫îËß£ÊûêÂ∑•ÂÖ∑Á±ª\n * Áõ¥Êé•ËøîÂõûAIÁöÑÂéüÂßãÂìçÂ∫îÂÜÖÂÆπÔºå‰∏çÂÅö‰ªª‰ΩïÂ§ÑÁêÜ\n */\nexport class LyricsCraftResponseParser {\n  /**\n   * Ëß£ÊûêAIÂìçÂ∫î\n   * Áõ¥Êé•ËøîÂõûAIÁöÑÂéüÂßãÂÜÖÂÆπÔºå‰∏çÂÅö‰ªª‰ΩïÂ§ÑÁêÜ\n   * @param rawResponse - AIËøîÂõûÁöÑÂéüÂßãÂìçÂ∫î\n   * @returns ÂåÖÂê´Ê≠åËØçÁöÑÁîüÊàêÂìçÂ∫î\n   */\n  static parseResponse(rawResponse: string): LyricsGenerateResponse {\n    try {\n      const content = rawResponse.trim();\n\n      if (!content) {\n        return {\n          success: false,\n          error: \"AI ÁîüÊàêÂÜÖÂÆπ‰∏∫Á©∫\",\n          lyrics: \"\",\n          timestamp: new Date().toISOString(),\n        };\n      }\n\n      return {\n        success: true,\n        lyrics: content,\n        timestamp: new Date().toISOString(),\n      };\n    } catch (error) {\n      console.error(\"ÂìçÂ∫îËß£ÊûêÂ§±Ë¥•:\", error);\n      return {\n        success: false,\n        error: error instanceof Error ? error.message : \"ÂìçÂ∫îËß£ÊûêÂ§±Ë¥•\",\n        lyrics: \"\",\n        timestamp: new Date().toISOString(),\n      };\n    }\n  }\n}\n","/**\n * Â§ßÂ∏àÂÜôÊ≠åËØçÈ°µÈù¢\n * Ë¥üË¥£Â§ÑÁêÜÊ≠åËØçÂàõ‰ΩúÁõ∏ÂÖ≥ÂäüËÉΩÔºå‰ΩøÁî®ProFormÂÆûÁé∞15‰∏™Ë°®ÂçïÈ°π\n */\n\nimport {\n  PageContainer,\n  ProCard,\n  ProForm,\n  ProFormRadio,\n  ProFormSelect,\n  ProFormSlider,\n  ProFormSwitch,\n  ProFormText,\n  ProFormTextArea,\n} from \"@ant-design/pro-components\";\nimport { XMarkdown } from \"@ant-design/x-markdown\";\nimport { useModel, useNavigate } from \"@umijs/max\";\nimport {\n  Button,\n  Col,\n  Empty,\n  message,\n  Row,\n  Spin,\n  Space,\n  Typography,\n} from \"antd\";\nconst { Text } = Typography;\nimport React, { useState } from \"react\";\nimport \"@ant-design/x-markdown/themes/light.css\";\nimport \"@ant-design/x-markdown/themes/dark.css\";\n\nimport {\n  CLOSENESS_LEVEL_OPTIONS,\n  CREATION_MODE_OPTIONS,\n  OUTPUT_COUNT_OPTIONS,\n  PERSONA_OPTIONS,\n  RHYME_TYPE_OPTIONS,\n  SONG_LANGUAGE_OPTIONS,\n  SONG_STRUCTURE_OPTIONS,\n  SONG_STYLE_OPTIONS,\n  WORDING_STYLE_OPTIONS,\n} from \"@/config/lyricsEnums\";\nimport { MASTER_STYLE_CARDS } from \"@/config/masterStyleConfig\";\nimport { useApiKey } from \"@/hooks/useApiKey\";\nimport { useLyricsRecords } from \"@/hooks/useLyricsRecords\";\nimport { AIProviderFactory } from \"@/services/ai/providers\";\nimport type { LyricsFormData } from \"@/shared/types/types\";\nimport { BusinessType } from \"@/config/aiTemperatureConfig\";\nimport { copyToClipboard } from \"@/shared/utils\";\nimport { ApiKeyAlert } from \"@/components\";\nimport { LyricsCraftPromptBuilder } from \"./utils/promptBuilder\";\nimport { LyricsCraftResponseParser } from \"./utils/responseParser\";\n\nconst LyricsCraftPage: React.FC = () => {\n  const navigate = useNavigate();\n  const { apiKey, model, checkApiKey, shouldShowAlert, navigateToSettings } =\n    useApiKey();\n  const { createRecord } = useLyricsRecords();\n  const [loading, setLoading] = useState<boolean>(false);\n  const [generatedLyrics, setGeneratedLyrics] = useState<string>(\"\");\n  const [messageApi, contextHolder] = message.useMessage();\n  const { initialState } = useModel(\"@@initialState\");\n  // Ê†πÊçÆ‰∏ªÈ¢òËÆæÁΩÆÁ°ÆÂÆöXMarkdownÁöÑ‰∏ªÈ¢òÁ±ª\n  const isDarkTheme = initialState?.settings?.navTheme === \"realDark\";\n  const markdownThemeClass = isDarkTheme\n    ? \"x-markdown-dark\"\n    : \"x-markdown-light\";\n\n  const defaultFormValues: Partial<LyricsFormData> = {\n    song_language: \"mandarin\",\n    song_style: \"lyrical_pop\",\n    song_structure: \"standard_pop\",\n    creation_mode: \"new\",\n    persona: \"unlimited\",\n    wording_style: [],\n    allow_english: false,\n    closeness: 3,\n    rhyme_type: \"mix\",\n    rhyme_strict: true,\n    output_count: 1,\n  };\n\n  const handleSubmit = async (values: LyricsFormData) => {\n    if (!checkApiKey()) {\n      return;\n    }\n\n    if (!values.song_name || !values.song_name.trim()) {\n      messageApi.error(\"Ê≠åÊõ≤ÂêçÁß∞‰∏çËÉΩ‰∏∫Á©∫\");\n      return;\n    }\n\n    if (!values.raw_material || !values.raw_material.trim()) {\n      messageApi.error(\"ÂéüÂßãÁ¥†Êùê‰∏çËÉΩ‰∏∫Á©∫\");\n      return;\n    }\n\n    if (values.output_count < 1 || values.output_count > 5) {\n      messageApi.error(\"ÁîüÊàêÊï∞ÈáèÂøÖÈ°ªÂú®1-5‰πãÈó¥\");\n      return;\n    }\n\n    if (values.closeness < 0 || values.closeness > 100) {\n      messageApi.error(\"Ë¥¥ËøëÂ∫¶ÂøÖÈ°ªÂú®0-100‰πãÈó¥\");\n      return;\n    }\n\n    setLoading(true);\n    setGeneratedLyrics(\"\");\n\n    try {\n      const provider = AIProviderFactory.createProvider(\n        model as \"deepseek\" | \"gemini\" | \"mimo\"\n      );\n\n      const systemPrompt = LyricsCraftPromptBuilder.buildSystemPrompt(values);\n      const userPrompt = LyricsCraftPromptBuilder.buildUserPrompt(values);\n\n      const response = await provider.generate({\n        api_key: apiKey,\n        system_prompt: systemPrompt,\n        user_prompt: userPrompt,\n        business_type: BusinessType.LYRICS,\n      });\n\n      if (!response.success) {\n        throw new Error(response.error || \"AIÁîüÊàêÂ§±Ë¥•\");\n      }\n\n      const parsedResponse = LyricsCraftResponseParser.parseResponse(\n        response.content\n      );\n\n      if (parsedResponse.success && parsedResponse.lyrics) {\n        setGeneratedLyrics(parsedResponse.lyrics);\n\n        const result = await createRecord({\n          form_data: values,\n          ai_result: {\n            lyrics: parsedResponse.lyrics,\n            model: model,\n            closeness: values.closeness,\n          },\n          created_at: new Date(),\n        });\n\n        if (result.success && result.data?.id) {\n          messageApi.success(\"Ê≠åËØçÁîüÊàêÊàêÂäüÔºÅ\");\n        } else {\n          messageApi.error(\"Ê≠åËØçÁîüÊàêÊàêÂäüÔºå‰ΩÜ‰øùÂ≠òÂ§±Ë¥•\");\n        }\n      } else {\n        messageApi.error(parsedResponse.error || \"Ê≠åËØçÁîüÊàêÂ§±Ë¥•\");\n      }\n    } catch (error) {\n      console.error(\"Ê≠åËØçÁîüÊàêÂ§±Ë¥•Ôºö\", error);\n      messageApi.error(\"Ê≠åËØçÁîüÊàêÂ§±Ë¥•ÔºåËØ∑Á®çÂêéÈáçËØï\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <>\n      {contextHolder}\n      <PageContainer>\n        {/* Âè™ÊúâÂú®Áî®Êà∑Ê≤°ÊúâËÆæÁΩÆAI API KeyÊó∂ÊâçÊòæÁ§∫AlertÊèêÁ§∫ */}\n        <ApiKeyAlert\n          visible={shouldShowAlert}\n          onNavigateToSettings={navigateToSettings}\n        />\n        <Spin spinning={loading} fullscreen size=\"large\" />\n        <Row gutter={[24, 0]}>\n          <Col xxl={16} xl={12} lg={12} md={12} sm={12} xs={12}>\n            <ProCard title=\"Âàõ‰ΩúÈÖçÁΩÆ\" style={{ height: \"100%\" }}>\n              <ProForm<LyricsFormData>\n                layout=\"vertical\"\n                grid\n                onFinish={handleSubmit}\n                submitter={{\n                  render: () => (\n                    <Button\n                      type=\"primary\"\n                      htmlType=\"submit\"\n                      loading={loading}\n                      size=\"large\"\n                      block\n                    >\n                      ÁîüÊàêÊ≠åËØç\n                    </Button>\n                  ),\n                }}\n                initialValues={defaultFormValues}\n              >\n                <ProFormText\n                  name=\"song_name\"\n                  label=\"Ê≠åÊõ≤ÂêçÁß∞\"\n                  placeholder=\"ËØ∑ËæìÂÖ•Ê≠åÊõ≤ÂêçÁß∞\"\n                  rules={[\n                    { required: true, message: \"ËØ∑ËæìÂÖ•Ê≠åÊõ≤ÂêçÁß∞\" },\n                    { max: 50, message: \"Ê≠åÊõ≤ÂêçÁß∞ÊúÄÂ§ö 50 ‰∏™Â≠ó\" },\n                  ]}\n                  colProps={{ span: 24 }}\n                />\n                <ProFormSelect\n                  name=\"song_language\"\n                  label=\"Ê≠åÊõ≤ËØ≠Ë®Ä\"\n                  placeholder=\"ËØ∑ÈÄâÊã©Ê≠åÊõ≤ËØ≠Ë®Ä\"\n                  options={SONG_LANGUAGE_OPTIONS.map((option) => ({\n                    label: option.description ? (\n                      <Space align=\"center\">\n                        <Text>{option.label}</Text>\n                        <Text type=\"secondary\">{option.description}</Text>\n                      </Space>\n                    ) : (\n                      <Text>{option.label}</Text>\n                    ),\n                    value: option.value,\n                  }))}\n                  rules={[{ required: true, message: \"ËØ∑ÈÄâÊã©Ê≠åÊõ≤ËØ≠Ë®Ä\" }]}\n                  colProps={{ xxl: 12, xl: 24, lg: 24, md: 24, sm: 24, xs: 24 }}\n                  fieldProps={{ popupMatchSelectWidth: false }}\n                />\n                <ProFormSwitch\n                  name=\"allow_english\"\n                  label=\"ÂÖÅËÆ∏Ëã±ËØ≠ÂçïËØç\"\n                  tooltip=\"ÊÉ≥Áî®‰∏ÄÊùØLatteÊää‰Ω†ÁÅåÈÜâÔºüÂÖ≥Èó≠Êó∂ÔºåÊ≠åËØç‰∏≠Á¶ÅÊ≠¢Âá∫Áé∞Êï£Ë£ÖËã±ËØ≠\"\n                  colProps={{ xxl: 6, xl: 12, lg: 12, md: 12, sm: 12, xs: 12 }}\n                />\n                <ProFormRadio.Group\n                  name=\"output_count\"\n                  label=\"ËæìÂá∫ÊñπÊ°àÊï∞Èáè\"\n                  options={OUTPUT_COUNT_OPTIONS.map((option) => ({\n                    label: option.label,\n                    value: option.value,\n                  }))}\n                  rules={[{ required: true, message: \"ËØ∑ÈÄâÊã©ËæìÂá∫ÊñπÊ°àÊï∞Èáè\" }]}\n                  colProps={{ xxl: 6, xl: 12, lg: 12, md: 12, sm: 12, xs: 12 }}\n                />\n                <ProFormSelect\n                  name=\"master_id\"\n                  label=\"Â§ßÂ∏àÈ£éÊ†º\"\n                  placeholder=\"ËØ∑ÈÄâÊã©Â§ßÂ∏àÈ£éÊ†º\"\n                  options={MASTER_STYLE_CARDS.map((master) => ({\n                    label: master.description ? (\n                      <Space align=\"center\">\n                        <Text>{master.name}</Text>\n                        <Text type=\"secondary\">{master.description}</Text>\n                      </Space>\n                    ) : (\n                      <Text>{master.name}</Text>\n                    ),\n                    value: master.id,\n                  }))}\n                  rules={[{ required: true, message: \"ËØ∑ÈÄâÊã©Â§ßÂ∏àÈ£éÊ†º\" }]}\n                  colProps={{ xxl: 12, xl: 24, lg: 24, md: 24, sm: 24, xs: 24 }}\n                  fieldProps={{ popupMatchSelectWidth: false }}\n                />\n                <ProFormSelect\n                  name=\"wording_style\"\n                  label=\"Êé™ËæûË¶ÅÊ±ÇÔºàÂèØÈÄâÔºåÊúÄÂ§öÂèØÈÄâ 2 È°πÔºâ\"\n                  options={WORDING_STYLE_OPTIONS.map((option) => ({\n                    label: option.description ? (\n                      <Space align=\"center\">\n                        <Text>{option.label}</Text>\n                        <Text type=\"secondary\">{option.description}</Text>\n                      </Space>\n                    ) : (\n                      <Text>{option.label}</Text>\n                    ),\n                    value: option.value,\n                  }))}\n                  mode=\"multiple\"\n                  rules={[\n                    {\n                      type: \"array\",\n                      max: 2,\n                      message: \"Êé™ËæûË¶ÅÊ±ÇÊúÄÂ§öÈÄâÊã© 2 È°π\",\n                    },\n                  ]}\n                  colProps={{ xxl: 12, xl: 24, lg: 24, md: 24, sm: 24, xs: 24 }}\n                  fieldProps={{\n                    popupMatchSelectWidth: false,\n                    maxCount: 2,\n                    maxTagCount: \"responsive\",\n                  }}\n                />\n                <ProFormSlider\n                  name=\"closeness\"\n                  label=\"Ë¥¥ËøëÂ∫¶\"\n                  rules={[{ required: true, message: \"ËØ∑ÈÄâÊã©Ë¥¥ËøëÂ∫¶\" }]}\n                  colProps={{ span: 24 }}\n                  min={1}\n                  max={5}\n                  marks={CLOSENESS_LEVEL_OPTIONS.reduce((acc, opt) => {\n                    acc[opt.value as number] = opt.label;\n                    return acc;\n                  }, {} as Record<number, React.ReactNode>)}\n                  step={1}\n                  fieldProps={{\n                    tooltip: {\n                      formatter: (value: number | undefined) => {\n                        if (value === undefined) return \"\";\n                        const option = CLOSENESS_LEVEL_OPTIONS.find(\n                          (opt) => opt.value === value\n                        );\n                        if (!option) return String(value);\n                        return option.tooltip_example\n                          ? `${option.description}„ÄÇ${option.tooltip_example}`\n                          : option.description;\n                      },\n                    },\n                    style: { margin: \"0 32px\" },\n                  }}\n                />\n                <ProFormSelect\n                  name=\"creation_mode\"\n                  label=\"Âàõ‰ΩúÊ®°Âºè\"\n                  placeholder=\"ËØ∑ÈÄâÊã©Âàõ‰ΩúÊ®°Âºè\"\n                  options={CREATION_MODE_OPTIONS.map((option) => ({\n                    label: option.description ? (\n                      <Space align=\"center\">\n                        <Text>{option.label}</Text>\n                        <Text type=\"secondary\">{option.description}</Text>\n                      </Space>\n                    ) : (\n                      <Text>{option.label}</Text>\n                    ),\n                    value: option.value,\n                  }))}\n                  rules={[{ required: true, message: \"ËØ∑ÈÄâÊã©Âàõ‰ΩúÊ®°Âºè\" }]}\n                  colProps={{ xxl: 12, xl: 24, lg: 24, md: 24, sm: 24, xs: 24 }}\n                  fieldProps={{ popupMatchSelectWidth: false }}\n                />\n                <ProFormSelect\n                  name=\"song_style\"\n                  label=\"Ê≠åÊõ≤È£éÊ†º\"\n                  placeholder=\"ËØ∑ÈÄâÊã©Ê≠åÊõ≤È£éÊ†º\"\n                  options={SONG_STYLE_OPTIONS.map((option) => ({\n                    label: option.description ? (\n                      <Space align=\"center\">\n                        <Text>{option.label}</Text>\n                        <Text type=\"secondary\">{option.description}</Text>\n                      </Space>\n                    ) : (\n                      <Text>{option.label}</Text>\n                    ),\n                    value: option.value,\n                  }))}\n                  rules={[{ required: true, message: \"ËØ∑ÈÄâÊã©Ê≠åÊõ≤È£éÊ†º\" }]}\n                  colProps={{ xxl: 12, xl: 24, lg: 24, md: 24, sm: 24, xs: 24 }}\n                  fieldProps={{ popupMatchSelectWidth: false }}\n                />\n\n                <ProFormSelect\n                  name=\"song_structure\"\n                  label=\"Êõ≤ÂºèÁªìÊûÑ\"\n                  placeholder=\"ËØ∑ÈÄâÊã©Êõ≤ÂºèÁªìÊûÑ\"\n                  options={SONG_STRUCTURE_OPTIONS.map((option) => ({\n                    label: option.description ? (\n                      <Space align=\"center\">\n                        <Text>{option.label}</Text>\n                        <Text type=\"secondary\">{option.description}</Text>\n                      </Space>\n                    ) : (\n                      <Text>{option.label}</Text>\n                    ),\n                    value: option.value,\n                  }))}\n                  rules={[{ required: true, message: \"ËØ∑ÈÄâÊã©Êõ≤ÂºèÁªìÊûÑ\" }]}\n                  colProps={{ xxl: 12, xl: 24, lg: 24, md: 24, sm: 24, xs: 24 }}\n                  fieldProps={{ popupMatchSelectWidth: false }}\n                />\n                <ProFormSelect\n                  name=\"persona\"\n                  label=\"Âèô‰∫ã‰∫∫ËÆæ\"\n                  placeholder=\"ËØ∑ÈÄâÊã©Âèô‰∫ã‰∫∫ËÆæ\"\n                  options={PERSONA_OPTIONS.map((option) => ({\n                    label: option.description ? (\n                      <Space align=\"center\">\n                        <Text>{option.label}</Text>\n                        <Text type=\"secondary\">{option.description}</Text>\n                      </Space>\n                    ) : (\n                      <Text>{option.label}</Text>\n                    ),\n                    value: option.value,\n                  }))}\n                  rules={[{ required: true, message: \"ËØ∑ÈÄâÊã©Âèô‰∫ã‰∫∫ËÆæ\" }]}\n                  colProps={{ xxl: 12, xl: 24, lg: 24, md: 24, sm: 24, xs: 24 }}\n                  fieldProps={{ popupMatchSelectWidth: false }}\n                />\n                <ProFormTextArea\n                  name=\"raw_material\"\n                  label=\"ÂéüÂßãÁ¥†Êùê\"\n                  placeholder=\"ËØ∑ËæìÂÖ•ÂéüÂßãÁ¥†ÊùêÔºà‰∏ªÈ¢ò„ÄÅÂ§ßÊÑè„ÄÅÊ≠åËØçÁâáÊÆµÁ≠âÔºâÔºåÊØè‰∏ÄË°åËßÜ‰∏∫‰∏Ä‰∏™ÂèÇËÄÉÁ¥†Êùê\"\n                  rules={[\n                    { required: true, message: \"ËØ∑ËæìÂÖ•ÂéüÂßãÁ¥†Êùê\" },\n                    { max: 1000, message: \"ÂéüÂßãÁ¥†ÊùêÊúÄÂ§ö1000Â≠ó\" },\n                  ]}\n                  fieldProps={{\n                    rows: 6,\n                    showCount: true,\n                    maxLength: 1000,\n                  }}\n                  colProps={{ xxl: 12, xl: 24, lg: 24, md: 24, sm: 24, xs: 24 }}\n                />\n                <ProFormTextArea\n                  name=\"reference_lyrics\"\n                  label=\"ÂèÇËÄÉÊ≠åÊõ≤ÂíåÊ≠åËØçÔºàÂèØÈÄâÔºâ\"\n                  placeholder=\"ËØ∑ËæìÂÖ•ÂèÇËÄÉÊ≠åÊõ≤ÂêçÁß∞ÂíåÊ≠åËØçÂÖ®ÊñáÔºå‰ªÖ‰Ωú‰∏∫ÊäÄÊ≥ïÂèÇËÄÉÔºå‰∏çË¶ÅÊ±ÇÁªìÊûÑÂØπÈΩê\"\n                  rules={[{ max: 1000, message: \"ÂèÇËÄÉÊ≠åÊõ≤ÂíåÊ≠åËØçÊúÄÂ§ö1000Â≠ó\" }]}\n                  fieldProps={{\n                    rows: 6,\n                    showCount: true,\n                    maxLength: 1000,\n                  }}\n                  colProps={{ xxl: 12, xl: 24, lg: 24, md: 24, sm: 24, xs: 24 }}\n                />\n                <ProFormTextArea\n                  name=\"requirements\"\n                  label=\"Âàõ‰ΩúË¶ÅÊ±ÇÔºàÂèØÈÄâÔºâ\"\n                  placeholder=\"ËØ∑ËæìÂÖ•Âàõ‰ΩúË¶ÅÊ±ÇÔºàÊÉÖÁª™Ëµ∞Âêë„ÄÅÁ¶ÅÊ≠¢Âá∫Áé∞ÁöÑÂÜÖÂÆπÁ≠âÔºâ\"\n                  rules={[{ max: 1000, message: \"Âàõ‰ΩúË¶ÅÊ±ÇÊúÄÂ§ö1000Â≠ó\" }]}\n                  fieldProps={{\n                    rows: 4,\n                    showCount: true,\n                    maxLength: 1000,\n                  }}\n                  colProps={{ span: 24 }}\n                />\n                <ProFormSelect\n                  name=\"rhyme_type\"\n                  label=\"ÊäºÈüµÁ±ªÂûã\"\n                  placeholder=\"ËØ∑ÈÄâÊã©ÊäºÈüµÁ±ªÂûã\"\n                  options={RHYME_TYPE_OPTIONS.map((option) => ({\n                    label: option.description ? (\n                      <Space align=\"center\">\n                        <Text>{option.label}</Text>\n                        <Text type=\"secondary\">{option.description}</Text>\n                      </Space>\n                    ) : (\n                      <Text>{option.label}</Text>\n                    ),\n                    value: option.value,\n                  }))}\n                  rules={[{ required: true, message: \"ËØ∑ÈÄâÊã©ÊäºÈüµÁ±ªÂûã\" }]}\n                  colProps={{ xxl: 12, xl: 24, lg: 24, md: 24, sm: 24, xs: 24 }}\n                  fieldProps={{ popupMatchSelectWidth: false }}\n                />\n                <ProFormText\n                  name=\"rhyme_tone\"\n                  label=\"ÈüµËÑöÔºàÂèØÈÄâÔºâ\"\n                  placeholder=\"ËØ∑ËæìÂÖ•ÈüµËÑöÔºåÁïôÁ©∫ÂàôÁ≥ªÁªüÊé®Ëçê\"\n                  colProps={{ xxl: 6, xl: 12, lg: 12, md: 12, sm: 12, xs: 12 }}\n                />\n                <ProFormSwitch\n                  name=\"rhyme_strict\"\n                  label=\"‰∏•Ê†ºÊäºÈüµ\"\n                  tooltip=\"ÂºÄÂêØÊó∂ÔºåÂøÖÈ°ª‰∏•Ê†ºÊâßË°åÈüµËÑöÔºå‰∏çÂæóÂá∫Áé∞ËøëÈü≥Â≠ó‰ª£Êõø\"\n                  colProps={{ xxl: 6, xl: 12, lg: 12, md: 12, sm: 12, xs: 12 }}\n                />\n              </ProForm>\n            </ProCard>\n          </Col>\n\n          <Col xxl={8} xl={12} lg={12} md={12} sm={12} xs={12}>\n            <ProCard\n              title=\"ÁîüÊàêÁöÑÊ≠åËØç\"\n              extra={\n                generatedLyrics && (\n                  <Button\n                    size=\"small\"\n                    onClick={() => copyToClipboard(generatedLyrics, \"Ê≠åËØç\")}\n                  >\n                    Â§çÂà∂Ê≠åËØç\n                  </Button>\n                )\n              }\n              style={{ height: \"100%\" }}\n            >\n              {!generatedLyrics ? (\n                <Empty\n                  description=\"ËØ∑Â°´ÂÜôÂ∑¶‰æßË°®ÂçïÂπ∂ÁÇπÂáªÁîüÊàêÊåâÈíÆ\"\n                  style={{ marginTop: 80 }}\n                />\n              ) : (\n                <XMarkdown\n                  className={markdownThemeClass}\n                  config={{ breaks: true }}\n                >\n                  {generatedLyrics}\n                </XMarkdown>\n              )}\n            </ProCard>\n          </Col>\n        </Row>\n      </PageContainer>\n    </>\n  );\n};\n\nexport default LyricsCraftPage;\n"],"names":[],"mappings":"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"}