(("undefined"!=typeof globalThis?globalThis:self)["makoChunk_suno-cover-arranger"]=("undefined"!=typeof globalThis?globalThis:self)["makoChunk_suno-cover-arranger"]||[]).push([["85e77387"],{"85e77387":function(e,t,a){a.d(t,"__esModule",{value:!0}),a.e(t,{default:function(){return V;}});var l=a("777fffbe"),r=a("852bbaa9"),i=a("c1fced07"),n=a("84f5357b"),o=l._(n),s=a("b0f18a1c"),d=l._(s),c=a("47efa787"),f=a("45004c4f"),u=a("ccf5e343"),_=a("e2ac26b8"),m=l._(_),g=a("d6eb4b7e"),h=l._(g),S=a("09b6fc98"),b=l._(S),v=a("07eb4429"),x=l._(v),p=a("067db9e2"),y=r._(p),j=a("0f735289"),T=a("fe3d5853"),I=a("3e67ba2c"),O=a("e236400f"),P=a("f01a4669"),E=l._(P),w=a("43c9c291"),N=a("721da618"),C=a("abff8881"),D=l._(C),L=a("e95ef079"),k=l._(L),A=a("e69718f6"),R=l._(A),z=a("605702f6"),G=l._(z),M=a("43a7723a"),Y=l._(M),B=a("ecb5eef8"),H=l._(B);let{Paragraph:U,Text:q}=G.default,$=({record:e,onClose:t})=>{var a,l,r,n,o,s,d,c;let{initialState:f}=(0,u.useModel)("@@initialState"),_=(null==f?void 0:null===(a=f.settings)||void 0===a?void 0:a.navTheme)==="realDark"?"markdown-body-dark":"markdown-body-light",m=async e=>{try{await navigator.clipboard.writeText(e),b.default.success("\u590D\u5236\u6210\u529F");}catch(e){b.default.error("\u590D\u5236\u5931\u8D25");}};if(!e)return(0,i.jsx)(k.default,{title:"\u6B4C\u8BCD\u751F\u6210\u8BE6\u60C5",placement:"right",open:!0,size:992,onClose:t,children:(0,i.jsx)("div",{style:{textAlign:"center",padding:"100px 0"},children:"\u8BB0\u5F55\u4E0D\u5B58\u5728"})});let g=(e=>{if(e)return j.MASTER_STYLE_CARDS.find(t=>t.id===e);})(e.form_data.master_id),S=[{label:"\u57FA\u672C\u4FE1\u606F",value:"basic-info"},{label:"\u5927\u5E08\u6B4C\u8BCD",value:"generated-lyrics"},{label:"\u539F\u59CB\u7D20\u6750",value:"raw-material"},{label:"\u53C2\u8003\u6B4C\u8BCD",value:"reference-lyrics"},{label:"\u521B\u4F5C\u53C2\u6570",value:"creation-parameters"}],[v,x]=y.default.useState("basic-info"),p=e=>{let t=document.getElementById(e);if(t){let e=t.closest(".ant-drawer");if(e){let a=e.querySelector(".ant-drawer-body");if(a instanceof HTMLElement){let e=t.offsetTop-57-24;a.scrollTo({top:e,behavior:"smooth"});}}}};return y.default.useEffect(()=>{let e=document.getElementById("basic-info");if(!e)return;let t=e.closest(".ant-drawer");if(!t)return;let a=t.querySelector(".ant-drawer-body");if(!(a instanceof HTMLElement))return;let l=()=>{let e=a.scrollTop+50;for(let t of S){let a=document.getElementById(t.value);if(a){let l=a.offsetTop,r=l+a.offsetHeight;if(e>=l&&e<r){x(t.value);break;}}}};return a.addEventListener("scroll",l),()=>{a.removeEventListener("scroll",l);};},[S]),(0,i.jsxs)(k.default,{title:"\u6B4C\u8BCD\u751F\u6210\u8BE6\u60C5",placement:"right",open:!0,size:992,onClose:t,extra:(0,i.jsx)(H.default,{options:S,value:v,onChange:e=>{x(e),p(e);}}),children:[(0,i.jsxs)(N.ProDescriptions,{id:"basic-info",column:2,title:"\u57FA\u672C\u4FE1\u606F",children:[(0,i.jsx)(N.ProDescriptions.Item,{label:"\u6B4C\u66F2\u540D\u79F0",children:e.form_data.song_name}),(0,i.jsx)(N.ProDescriptions.Item,{label:"\u6B4C\u66F2\u8BED\u8A00",children:(null===(l=T.SONG_LANGUAGE_OPTIONS.find(t=>String(t.value)===String(e.form_data.song_language)))||void 0===l?void 0:l.label)||e.form_data.song_language}),(0,i.jsx)(N.ProDescriptions.Item,{label:"\u5927\u5E08\u98CE\u683C",children:g?(0,i.jsxs)(R.default,{children:[(0,i.jsx)(q,{children:g.name}),(0,i.jsx)(q,{type:"secondary",children:g.description})]}):(0,i.jsx)(q,{children:"\u65E0"})}),(0,i.jsx)(N.ProDescriptions.Item,{label:"\u6B4C\u66F2\u98CE\u683C",children:(null===(r=T.SONG_STYLE_OPTIONS.find(t=>String(t.value)===String(e.form_data.song_style)))||void 0===r?void 0:r.label)||e.form_data.song_style})]}),(0,i.jsx)(Y.default,{}),(0,i.jsx)(w.ProCard,{id:"generated-lyrics",title:"\u5927\u5E08\u6B4C\u8BCD",ghost:!0,extra:(0,i.jsx)(h.default,{size:"small",type:"text",icon:(0,i.jsx)(E.default,{}),onClick:()=>m(e.ai_result.lyrics),children:"\u590D\u5236\u6B4C\u8BCD"}),children:(0,i.jsx)(D.default,{className:_,config:{breaks:!0},children:e.ai_result.lyrics})}),(0,i.jsx)(Y.default,{}),(0,i.jsx)(w.ProCard,{id:"raw-material",title:"\u539F\u59CB\u7D20\u6750",ghost:!0,children:(0,i.jsx)(D.default,{className:_,config:{breaks:!0},children:e.form_data.raw_material})}),(0,i.jsx)(Y.default,{}),(0,i.jsx)(w.ProCard,{id:"reference-lyrics",title:"\u53C2\u8003\u6B4C\u8BCD",ghost:!0,children:(0,i.jsx)(D.default,{className:_,config:{breaks:!0},children:e.form_data.reference_lyrics||"\u65E0"})}),(0,i.jsx)(Y.default,{}),(0,i.jsxs)(N.ProDescriptions,{id:"creation-parameters",column:2,title:"\u521B\u4F5C\u53C2\u6570",children:[(0,i.jsx)(N.ProDescriptions.Item,{label:"\u53C2\u8003\u6B4C\u8BCD",span:2}),(0,i.jsx)(N.ProDescriptions.Item,{label:"\u63AA\u8F9E\u8981\u6C42",children:Array.isArray(e.form_data.wording_style)?e.form_data.wording_style.map(e=>{var t;return(null===(t=T.WORDING_STYLE_OPTIONS.find(t=>String(t.value)===String(e)))||void 0===t?void 0:t.label)||e;}).join("\u3001"):e.form_data.wording_style||"\u65E0"}),(0,i.jsx)(N.ProDescriptions.Item,{label:"\u8D34\u8FD1\u5EA6",children:(null===(n=T.CLOSENESS_LEVEL_OPTIONS.find(t=>String(t.value)===String(e.form_data.closeness)))||void 0===n?void 0:n.label)||`${e.form_data.closeness}`}),(0,i.jsx)(N.ProDescriptions.Item,{label:"\u521B\u4F5C\u6A21\u5F0F",children:(null===(o=T.CREATION_MODE_OPTIONS.find(t=>String(t.value)===String(e.form_data.creation_mode)))||void 0===o?void 0:o.label)||e.form_data.creation_mode}),(0,i.jsx)(N.ProDescriptions.Item,{label:"\u66F2\u5F0F\u7ED3\u6784",children:(null===(s=T.SONG_STRUCTURE_OPTIONS.find(t=>String(t.value)===String(e.form_data.song_structure)))||void 0===s?void 0:s.label)||e.form_data.song_structure}),(0,i.jsx)(N.ProDescriptions.Item,{label:"\u53D9\u4E8B\u4EBA\u8BBE",children:(null===(d=T.PERSONA_OPTIONS.find(t=>String(t.value)===String(e.form_data.persona)))||void 0===d?void 0:d.label)||e.form_data.persona}),(0,i.jsx)(N.ProDescriptions.Item,{label:"\u62BC\u97F5\u7C7B\u578B",children:(null===(c=T.RHYME_TYPE_OPTIONS.find(t=>String(t.value)===String(e.form_data.rhyme_type)))||void 0===c?void 0:c.label)||e.form_data.rhyme_type}),(0,i.jsx)(N.ProDescriptions.Item,{label:"\u8F93\u51FA\u6570\u91CF",children:e.form_data.output_count}),(0,i.jsx)(N.ProDescriptions.Item,{label:"AI\u6A21\u578B",children:e.ai_result.model}),(0,i.jsx)(N.ProDescriptions.Item,{label:"\u751F\u6210\u65F6\u95F4",children:new Date(e.created_at).toLocaleString("zh-CN")})]})]});},V=()=>{let e=(0,u.useNavigate)(),{deleteRecord:t}=(0,I.useLyricsRecords)(),a=(0,y.useRef)(null),[l,r]=(0,y.useState)(!1),[n,s]=(0,y.useState)(!1),[_,g]=(0,y.useState)(null),S=async e=>{try{if((await t(e)).success){var l;b.default.success("\u5220\u9664\u6210\u529F"),null===(l=a.current)||void 0===l||l.reload(),s(!1),g(null);}else b.default.error("\u5220\u9664\u5931\u8D25");}catch(e){b.default.error("\u5220\u9664\u5931\u8D25");}},v=e=>{g(e),s(!0);},p=async(e,t)=>{r(!0);try{let a=await O.db.getAllLyricsRecords(),l=[...a];if(e.current&&e.pageSize){let t=(e.current-1)*e.pageSize,a=t+e.pageSize;l=l.slice(t,a);}if(t&&Object.keys(t).length>0){let e=Object.keys(t)[0],a=t[e];l.sort((t,l)=>{let r=t[e],i=l[e];return void 0===r&&void 0===i?0:void 0===r?1:void 0===i?-1:"ascend"===a?r>i?1:-1:r<i?1:-1;});}return{data:l,success:!0,total:a.length};}catch(e){return b.default.error("\u52A0\u8F7D\u6570\u636E\u5931\u8D25"),{data:[],success:!1,total:0};}finally{r(!1);}},P=[{title:"\u6B4C\u66F2\u540D\u79F0",dataIndex:["form_data","song_name"],width:150,fixed:"left",ellipsis:!0},{title:"\u98CE\u683C\u5927\u5E08",dataIndex:["form_data","master_id"],width:120,render:(e,t)=>{let a=t.form_data.master_id;if(!a)return"\u65E0";let l=j.MASTER_STYLE_CARDS.find(e=>e.id===a);return l?l.name:a;}},{title:"\u8BED\u8A00",dataIndex:["form_data","song_language"],width:100,render:(e,t)=>{let a=T.SONG_LANGUAGE_OPTIONS.find(e=>String(e.value)===String(t.form_data.song_language));return(null==a?void 0:a.label)||t.form_data.song_language;}},{title:"\u98CE\u683C",dataIndex:["form_data","song_style"],width:100,render:(e,t)=>{let a=T.SONG_STYLE_OPTIONS.find(e=>String(e.value)===String(t.form_data.song_style));return(null==a?void 0:a.label)||t.form_data.song_style;}},{title:"\u8D34\u8FD1\u5EA6",dataIndex:["form_data","closeness"],width:100,render:(e,t)=>{let a=t.form_data.closeness,l=T.CLOSENESS_LEVEL_OPTIONS.find(e=>String(e.value)===String(a));return(null==l?void 0:l.label)||`${a}\u{7EA7}`;}},{title:"\u751F\u6210\u65F6\u95F4",dataIndex:"created_at",width:180,valueType:"dateTime",sorter:!0,defaultSortOrder:"descend"},{title:"\u64CD\u4F5C",valueType:"option",width:150,fixed:"right",render:(e,t)=>[(0,i.jsx)(h.default,{type:"primary",size:"small",icon:(0,i.jsx)(d.default,{}),onClick:()=>v(t),children:"\u67E5\u770B"},"view"),(0,i.jsx)(x.default,{title:"\u786E\u8BA4\u5220\u9664",description:"\u786E\u5B9A\u8981\u5220\u9664\u8FD9\u6761\u8BB0\u5F55\u5417\uFF1F",onConfirm:()=>t.id&&S(t.id),okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88",children:(0,i.jsx)(h.default,{size:"small",danger:!0,icon:(0,i.jsx)(o.default,{}),children:"\u5220\u9664"})},"delete")]}];return(0,i.jsxs)(c.PageContainer,{children:[(0,i.jsx)(m.default,{title:"\u751F\u6210\u8BB0\u5F55\u4EC5\u4FDD\u5B58\u5728\u672C\u5730\u8BBE\u5907\uFF0C\u4E0D\u4F1A\u4E0A\u4F20\u81F3\u670D\u52A1\u5668\uFF0C\u66F4\u6362\u8BBE\u5907\u6216\u6D4F\u89C8\u5668\u540E\u8BB0\u5F55\u5C06\u65E0\u6CD5\u67E5\u770B\u3002",banner:!0,style:{marginBottom:24}}),(0,i.jsx)(f.ProTable,{headerTitle:"\u5927\u5E08\u5199\u6B4C\u8BCD\u751F\u6210\u8BB0\u5F55",columns:P,actionRef:a,request:p,rowKey:"id",search:!1,pagination:{defaultPageSize:20,showSizeChanger:!0,showQuickJumper:!0,showTotal:e=>`\u{5171} ${e} \u{6761}\u{8BB0}\u{5F55}`},scroll:{x:"max-content"},loading:l,toolBarRender:()=>[(0,i.jsx)(h.default,{type:"primary",onClick:()=>e("/lyrics-craft"),children:"\u521B\u5EFA\u65B0\u6B4C\u8BCD"},"create")]}),_&&(0,i.jsx)($,{record:_,onClose:()=>{s(!1),g(null);}})]});};}}]);
//# sourceMappingURL=85e77387-async.2e6637f8.js.map