{"version":3,"sources":["src/hooks/useApiKey.ts","src/services/db.ts"],"sourcesContent":["import { useEffect, useState } from 'react';\nimport { db } from '@/services/db';\n\nexport const useApiKey = () => {\n  const [apiKey, setApiKey] = useState<string>('');\n  const [model, setModel] = useState<string>('deepseek');\n  const [isLoading, setIsLoading] = useState<boolean>(true);\n\n  // 加载指定模型的API Key\n  const loadApiKeyForModel = async (targetModel: string) => {\n    try {\n      console.log('Loading API Key for model:', targetModel);\n      const userApiKeys = await db.getUserApiKeys(1);\n      console.log('All user API Keys:', userApiKeys);\n\n      // 查找指定模型的API Key\n      const modelApiKey = userApiKeys.find((key) => key.model === targetModel);\n      console.log('Found API Key for model', targetModel, ':', modelApiKey);\n\n      setApiKey(modelApiKey?.api_key || '');\n      setModel(targetModel);\n\n      // 将所有API Key的isCurrent设置为false，然后将指定模型的API Key设置为当前\n      console.log('Updating current API Key status for model', targetModel);\n      for (const key of userApiKeys) {\n        await db.updateApiKey(key.id!, {\n          is_current: key.model === targetModel,\n        });\n      }\n    } catch (error) {\n      console.error('Failed to load API Key for model:', targetModel, error);\n      setApiKey('');\n      setModel(targetModel);\n    }\n  };\n\n  // 加载初始API Key和模型\n  useEffect(() => {\n    const loadInitialApiKeyAndModel = async () => {\n      try {\n        console.log('Loading initial API Key and Model...');\n\n        // 首先尝试获取当前设置的API Key\n        const currentApiKey = await db.getCurrentApiKey(1);\n\n        if (currentApiKey) {\n          console.log('Found current API Key:', currentApiKey);\n          setApiKey(currentApiKey.api_key);\n          setModel(currentApiKey.model);\n        } else {\n          // 如果没有当前API Key，默认使用deepseek并尝试加载其API Key\n          console.log('No current API Key found, using default model deepseek');\n          await loadApiKeyForModel('deepseek');\n        }\n      } catch (error) {\n        console.error('Failed to load initial API Key and Model:', error);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n\n    loadInitialApiKeyAndModel();\n  }, []);\n\n  // 切换模型的方法\n  const switchModel = async (newModel: string) => {\n    if (newModel === model) return; // 如果是同一个模型，不做任何操作\n\n    setIsLoading(true);\n    await loadApiKeyForModel(newModel);\n    setIsLoading(false);\n  };\n\n  // 保存 API Key 和模型（暂时使用用户ID 1，实际应用中需要从用户登录状态获取）\n  const saveApiKey = async (\n    newApiKey: string,\n    newModel: string = 'deepseek',\n  ) => {\n    try {\n      console.log('Saving API Key and Model:', {\n        apiKey: newApiKey,\n        model: newModel,\n      });\n      const savedApiKey = await db.createApiKey({\n        user_id: 1,\n        api_key: newApiKey,\n        model: newModel,\n        is_current: true,\n      });\n      console.log('Saved API Key and Model to DB:', savedApiKey);\n      setApiKey(newApiKey);\n      setModel(newModel);\n      return true;\n    } catch (error) {\n      console.error('Failed to save API Key and Model:', error);\n      return false;\n    }\n  };\n\n  // 删除 API Key（删除当前模型对应的API Key）\n  const deleteApiKey = async () => {\n    try {\n      console.log('Deleting API Key for model:', model);\n      // 获取当前用户该模型对应的API Key\n      const userApiKeys = await db.getUserApiKeys(1);\n      const modelApiKey = userApiKeys.find((key) => key.model === model);\n\n      if (modelApiKey) {\n        console.log('Deleting API Key with ID:', modelApiKey.id);\n        await db.deleteApiKey(modelApiKey.id!);\n      }\n\n      setApiKey('');\n      console.log('API Key deleted successfully');\n      return true;\n    } catch (error) {\n      console.error('Failed to delete API Key:', error);\n      return false;\n    }\n  };\n\n  // 验证API Key格式（支持不同模型的API Key格式）\n  const validateApiKey = (apiKeyToValidate: string) => {\n    // DeepSeek API Key格式：sk-开头的字符串\n    // Google Gemini API Key格式：AIza开头的字符串\n    // 小米MiMo API Key格式：sk-开头的字符串\n    const deepSeekRegex = /^sk-/;\n    const geminiRegex = /^AIza/;\n    const mimoRegex = /^sk-/;\n\n    const trimmedApiKey = apiKeyToValidate.trim();\n    return (\n      deepSeekRegex.test(trimmedApiKey) ||\n      geminiRegex.test(trimmedApiKey) ||\n      mimoRegex.test(trimmedApiKey)\n    );\n  };\n\n  return {\n    apiKey,\n    model,\n    isLoading,\n    saveApiKey,\n    deleteApiKey,\n    validateApiKey,\n    switchModel, // 新增切换模型的方法\n  };\n};\n","/**\n * 数据库服务模块\n * 负责处理应用程序的本地数据库操作，使用 Dexie.js 作为数据库管理工具\n * 主要功能：\n * 1. 用户数据的增删改查\n * 2. 项目数据的管理\n * 3. 风格配置的存储和管理\n * 4. 提示词记录的保存和查询\n */\n\nimport Dexie from 'dexie';\nimport type { User, Project, StyleConfig } from '@/shared/types';\nimport type { ApiKey } from '@/shared/types/types';\nimport type { PromptRecord } from '@/shared/types/types';\n\n/**\n * 应用数据库类\n * 继承自 Dexie，用于管理应用程序的本地数据库\n */\nclass AppDatabase extends Dexie {\n  users: Dexie.Table<User, number>;         // 用户表\n  projects: Dexie.Table<Project, number>;   // 项目表\n  styleConfigs: Dexie.Table<StyleConfig, number>; // 风格配置表\n  promptRecords: Dexie.Table<PromptRecord & { ai_result?: { styles: string; lyrics: string; model: string } }, number>; // 提示词记录表\n  apiKeys: Dexie.Table<ApiKey, number>; // API Key 表\n\n  /**\n   * 数据库类构造函数\n   * 初始化数据库连接和表结构\n   */\n  constructor() {\n    super('SunoCoverArrangerDB');\n\n    // 定义数据库版本和表结构\n    this.version(1).stores({\n      users: '++id, name, email, created_at',\n      projects: '++id, title, user_id, created_at, updated_at',\n      styleConfigs: '++id, name, user_id, is_default, created_at, updated_at',\n      promptRecords: '++id, user_id, created_at',\n      apiKeys: '++id, user_id, api_key, model, is_current, created_at'\n    });\n    \n    // 版本2：更新提示词记录表结构，移除可能导致问题的嵌套字段索引\n    this.version(2).stores({\n      promptRecords: '++id, userId, createdAt'\n    });\n\n    // 版本3：重新创建所有表，解决表结构不一致问题\n    this.version(3)\n      .stores({\n        users: '++id, name, email, created_at',\n        projects: '++id, title, user_id, created_at, updated_at',\n        styleConfigs: '++id, name, user_id, is_default, created_at, updated_at',\n        promptRecords: '++id, user_id, created_at',\n        apiKeys: '++id, user_id, api_key, model, is_current, created_at'\n      })\n      .upgrade(async (tx) => {\n        // 重新创建所有表，解决可能的表结构不一致问题\n        // 这里我们不做任何数据转换，只是让Dexie重新创建表结构\n        console.log('数据库升级到版本3，重新创建表结构');\n      });\n\n    // 版本4：统一所有字段名为snake_case命名规范\n    this.version(4)\n      .stores({\n        users: '++id, name, email, created_at',\n        projects: '++id, title, user_id, created_at, updated_at',\n        styleConfigs: '++id, name, user_id, is_default, created_at, updated_at',\n        promptRecords: '++id, user_id, created_at',\n        apiKeys: '++id, user_id, api_key, model, is_current, created_at'\n      })\n      .upgrade(async (tx) => {\n        // 由于历史数据中可能没有正确的参考歌曲数据，我们不需要做数据迁移\n        // 只是重新创建表结构以匹配新的字段命名规范\n        console.log('数据库升级到版本4，统一字段命名规范为snake_case');\n      });\n\n    // 初始化表\n    this.users = this.table('users');\n    this.projects = this.table('projects');\n    this.styleConfigs = this.table('styleConfigs');\n    this.promptRecords = this.table('promptRecords');\n    this.apiKeys = this.table('apiKeys');\n  }\n\n  // 用户相关操作\n  /**\n   * 创建新用户\n   * @param user - 用户信息（不包含id和createdAt）\n   * @returns 包含id和createdAt的完整用户信息\n   */\n  async createUser(user: Omit<User, 'id' | 'createdAt'>): Promise<User> {\n    const newUser = {\n      ...user,\n      createdAt: new Date()\n    };\n    const id = await this.users.add(newUser);\n    return { ...newUser, id };\n  }\n\n  /**\n   * 根据ID获取用户信息\n   * @param id - 用户ID\n   * @returns 用户信息或undefined（如果用户不存在）\n   */\n  async getUser(id: number): Promise<User | undefined> {\n    return this.users.get(id);\n  }\n\n  /**\n   * 更新用户信息\n   * @param id - 用户ID\n   * @param updates - 要更新的用户信息部分\n   * @returns 更新的记录数\n   */\n  async updateUser(id: number, updates: Partial<User>): Promise<number> {\n    return this.users.update(id, updates);\n  }\n\n  /**\n   * 根据ID删除用户\n   * @param id - 用户ID\n   */\n  async deleteUser(id: number): Promise<void> {\n    await this.users.delete(id);\n  }\n\n  /**\n   * 获取所有用户信息\n   * @returns 用户信息数组\n   */\n  async getAllUsers(): Promise<User[]> {\n    return this.users.toArray();\n  }\n\n  // 项目相关操作\n  async createProject(project: Omit<Project, 'id' | 'createdAt' | 'updatedAt'>): Promise<Project> {\n    const now = new Date();\n    const newProject = {\n      ...project,\n      createdAt: now,\n      updatedAt: now\n    };\n    const id = await this.projects.add(newProject);\n    return { ...newProject, id };\n  }\n\n  async getProject(id: number): Promise<Project | undefined> {\n    return this.projects.get(id);\n  }\n\n  async updateProject(id: number, updates: Partial<Project>): Promise<number> {\n    return this.projects.update(id, { ...updates, updatedAt: new Date() });\n  }\n\n  async deleteProject(id: number): Promise<void> {\n    await this.projects.delete(id);\n  }\n\n  async getUserProjects(userId: number): Promise<Project[]> {\n    return this.projects.where('userId').equals(userId).toArray();\n  }\n\n  // 风格配置相关操作\n  async createStyleConfig(config: Omit<StyleConfig, 'id' | 'createdAt' | 'updatedAt'>): Promise<StyleConfig> {\n    const now = new Date();\n    const newConfig = {\n      ...config,\n      createdAt: now,\n      updatedAt: now\n    };\n    \n    // 如果设置为默认，取消其他默认配置\n    if (newConfig.isDefault) {\n      await this.styleConfigs\n        .where({ userId: newConfig.userId, isDefault: true })\n        .modify({ isDefault: false, updatedAt: now });\n    }\n    \n    const id = await this.styleConfigs.add(newConfig);\n    return { ...newConfig, id };\n  }\n\n  async getStyleConfig(id: number): Promise<StyleConfig | undefined> {\n    return this.styleConfigs.get(id);\n  }\n\n  async updateStyleConfig(id: number, updates: Partial<StyleConfig>): Promise<number> {\n    const now = new Date();\n    \n    // 如果设置为默认，取消其他默认配置\n    if (updates.isDefault) {\n      const config = await this.styleConfigs.get(id);\n      if (config) {\n        await this.styleConfigs\n          .where({ userId: config.userId, isDefault: true })\n          .modify({ isDefault: false, updatedAt: now });\n      }\n    }\n    \n    return this.styleConfigs.update(id, { ...updates, updatedAt: now });\n  }\n\n  async deleteStyleConfig(id: number): Promise<void> {\n    await this.styleConfigs.delete(id);\n  }\n\n  async getUserStyleConfigs(userId: number): Promise<StyleConfig[]> {\n    return this.styleConfigs.where('userId').equals(userId).toArray();\n  }\n\n  async getDefaultStyleConfig(userId: number): Promise<StyleConfig | undefined> {\n    return this.styleConfigs\n      .where({ userId, isDefault: true })\n      .first();\n  }\n\n  // 提示词生成记录相关操作\n  async createPromptRecord(record: Omit<PromptRecord, 'id' | 'created_at'>): Promise<PromptRecord> {\n    const newRecord = {\n      ...record,\n      created_at: new Date()\n    };\n    const id = await this.promptRecords.add(newRecord);\n    return { ...newRecord, id };\n  }\n\n  async getPromptRecord(id: number): Promise<PromptRecord | undefined> {\n    return this.promptRecords.get(id);\n  }\n\n  async updatePromptRecord(id: number, updates: Partial<PromptRecord>): Promise<number> {\n    return this.promptRecords.update(id, updates);\n  }\n\n  async deletePromptRecord(id: number): Promise<void> {\n    await this.promptRecords.delete(id);\n  }\n\n  async getUserPromptRecords(user_id: number, limit?: number): Promise<PromptRecord[]> {\n    const query = this.promptRecords\n      .where('user_id')\n      .equals(user_id)\n      .sortBy('created_at')\n      .then(records => records.reverse()); // 先排序，再反转，实现倒序\n\n    if (limit) {\n      return (await query).slice(0, limit);\n    }\n    return query;\n  }\n\n  async searchPromptRecords(user_id: number, keyword: string, limit?: number): Promise<PromptRecord[]> {\n    const allRecords = await this.getUserPromptRecords(user_id);\n    \n    const filteredRecords = allRecords.filter(record => {\n      const searchText = JSON.stringify(record).toLowerCase();\n      return searchText.includes(keyword.toLowerCase());\n    });\n\n    if (limit) {\n      return filteredRecords.slice(0, limit);\n    }\n    return filteredRecords;\n  }\n\n  async getRecentPromptRecords(user_id: number, days: number = 7): Promise<PromptRecord[]> {\n    const cutoffDate = new Date();\n    cutoffDate.setDate(cutoffDate.getDate() - days);\n\n    return this.promptRecords\n      .where('user_id')\n      .equals(user_id)\n      .and(record => (record.created_at || new Date(0)) >= cutoffDate)\n      .sortBy('created_at')\n      .then(records => records.reverse());\n  }\n\n  // API Key 相关操作\n  async createApiKey(apiKey: Omit<ApiKey, 'id' | 'created_at'>): Promise<ApiKey> {\n    console.log('Creating new API Key:', apiKey);\n    const newApiKey = {\n      ...apiKey,\n      created_at: new Date()\n    };\n    \n    // 如果设置为当前使用的 API Key，取消其他 API Key 的当前状态\n    if (newApiKey.is_current) {\n      console.log('Setting new API Key as current, updating existing current keys...');\n      await this.apiKeys\n        .where({ user_id: newApiKey.user_id, is_current: true })\n        .modify({ is_current: false });\n    }\n    \n    const id = await this.apiKeys.add(newApiKey);\n    const createdApiKey = { ...newApiKey, id };\n    console.log('Created API Key:', createdApiKey);\n    return createdApiKey;\n  }\n\n  async getApiKey(id: number): Promise<ApiKey | undefined> {\n    return this.apiKeys.get(id);\n  }\n\n  async updateApiKey(id: number, updates: Partial<ApiKey>): Promise<number> {\n    // 如果设置为当前使用的 API Key，取消其他 API Key 的当前状态\n    if (updates.is_current) {\n      const apiKey = await this.apiKeys.get(id);\n      if (apiKey) {\n        await this.apiKeys\n          .where({ user_id: apiKey.user_id, is_current: true })\n          .modify({ is_current: false });\n      }\n    }\n    \n    return this.apiKeys.update(id, updates);\n  }\n\n  async deleteApiKey(id: number): Promise<void> {\n    await this.apiKeys.delete(id);\n  }\n\n  async getUserApiKeys(user_id: number): Promise<ApiKey[]> {\n    return this.apiKeys.where('user_id').equals(user_id).toArray();\n  }\n\n  async getCurrentApiKey(user_id: number): Promise<ApiKey | undefined> {\n    console.log('Getting current API Key for user:', user_id);\n    // 先获取所有该用户的API Key，然后找到is_current为true的那个\n    const userApiKeys = await this.apiKeys.where('user_id').equals(user_id).toArray();\n    console.log('All user API Keys:', userApiKeys);\n    const currentApiKey = userApiKeys.find(key => key.is_current);\n    console.log('Found current API Key:', currentApiKey);\n    return currentApiKey;\n  }\n}\n\n// 导出类\nexport default AppDatabase;\n\n// 导出单例实例\nexport const db = new AppDatabase();\n\n// 导出类型\nexport type { User, Project, StyleConfig, PromptRecord, ApiKey };\n"],"names":[],"mappings":"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"}