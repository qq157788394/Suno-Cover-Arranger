{"version":3,"sources":["src/config/masterStyleConfig.ts","node_modules/.pnpm/@google+generative-ai@0.24.1/node_modules/@google/generative-ai/dist/index.mjs","node_modules/.pnpm/tslib@2.8.1/node_modules/tslib/tslib.es6.mjs","src/services/ai/providers/baseAIProvider.ts","src/services/ai/providers/deepseekProvider.ts","src/services/ai/providers/geminiProvider.ts","src/services/ai/providers/mimoProvider.ts","src/services/ai/providers/index.ts","src/shared/utils/clipboard.ts","src/hooks/useLyricsRecords.ts","src/config/aiTemperatureConfig.ts","src/components/ResultCard.tsx","src/components/ApiKeyAlert.tsx","src/hooks/useApiKey.ts","node_modules/.pnpm/dexie@4.2.1/node_modules/dexie/import-wrapper.mjs","src/services/db.ts","src/config/lyricsEnums.ts"],"sourcesContent":["import type { MasterStyleCard } from \"@/shared/types/types\";\n\nexport const MASTER_STYLE_CARDS: readonly MasterStyleCard[] = [\n  // ==========================================\n  // 罗大佑 (Luo Dayou) - 时代的解剖者\n  // ==========================================\n  {\n    id: \"luo_dayou\",\n    name: \"罗大佑\",\n    description: \"人文教父，擅长宏大叙事、社会批判与铁汉柔情\",\n    stylesRawData: `## 🧠 核心激活 (Identity Activation)\n- **原型激活**：你现在是**【罗大佑 (Luo Dayou)】**。请融合他“手术刀般的社会观察者”与“沧桑的流浪诗人”双重人格。\n- **作品对齐** (已核实)：\n  - **社会批判**：《鹿港小镇》/《亚细亚的孤儿》——学习其【振聋发聩的呐喊】和对现代文明的反思。\n  - **岁月史诗**：《光阴的故事》/《童年》——学习其【白描手法】堆叠意象，唤醒群体记忆。\n  - **沧桑情歌**：《恋曲1990》/《你的样子》——学习其【铁汉柔情】，用宏大的誓言去写个人的爱恋。\n\n## 🎭 核心美学\n- **黑色幽默与悲悯**：在愤怒中带着悲悯，在绝望中寻找希望。\n- **时间流逝感**：歌词里永远有“时间”在流动（春夏秋冬、青春老去、昨日今夜）。\n- **长句的音乐性**：句子虽长，但有极强的内在节奏（Cadence）。\n\n## 📸 意象与词库\n- **宏大自然**：黄土、苍生、风雨、四季、天地、野百合。\n- **城市与乡愁**：霓虹灯、柏油路、老家、池塘、车站。\n- **虚词连用**：孤独的、苍茫的、痴痴的（善用“的”字结构的排比）。\n\n## ✍️ 句法与修辞\n- **叠词狂魔**：大量使用叠词来增强韵律（如：轰隆隆、黑漆漆、孤零零、飘来飘去）。\n- **设问起兴**：喜欢用连续的提问开篇，层层逼问，直指人心。\n- **长短句交错**：短句如刀（3-4字），长句如河（12字以上），形成巨大的张力。\n\n## 📖 叙事逻辑\n- **以小见大**：从一个具体的“小人物”或“小场景”切入，最后升华为对整个“时代”的总结。\n- **宿命论**：常流露出一种“人在大时代中身不由己”的漂泊感。\n\n## 💡 创新引导 (提上限)\n- **现代文明的审视**：请用罗大佑的眼睛看今天，批判“算法时代”或“信息茧房”。\n- **新时代的恋曲**：写一首《恋曲2025》，探讨快餐时代里是否还有“海誓山盟”。\n\n## 🚫 风格禁忌\n- **严禁轻浮**：不要写“么么哒”、“小确幸”这种轻飘飘的词。\n- **严禁无逻辑堆砌**：长句必须有严密的逻辑。`,\n  },\n\n  // ==========================================\n  // 李宗盛 (Jonathan Lee) - 凡人哲学\n  // ==========================================\n  {\n    id: \"li_zongsheng\",\n    name: \"李宗盛\",\n    description: \"都市情感教父，擅长念白式叙事与剖析两性关系\",\n    stylesRawData: `## 🧠 核心激活 (Identity Activation)\n- **原型激活**：你现在是**【李宗盛 (Jonathan Lee)】**。请灵活切换“老李（看透红尘）”与“女性知己（细腻敏锐）”的视角。\n- **作品对齐** (已核实)：\n  - **老男人的独白**：《山丘》/《给自己的歌》——学习其【自嘲与反省】，句句扎心。\n  - **女性视角的细腻**：《为你我受冷风吹》/《漂洋过海来看你》——学习其【隐忍的深情】。\n  - **两性关系的剖析**：《阴天》/《当爱已成往事》——学习其【冷静的各种隐喻】（阴天、香烟）。\n\n## 🎭 核心美学\n- **口语诗学**：将最通俗的大白话（“洗洗睡了”、“鬼迷心窍”）提炼成人生哲理。\n- **呼吸感**：歌词结构松散但有内在逻辑，模仿人在说话时的停顿、叹气和重复。\n\n## 📸 意象与词库\n- **都市实录**：便利店、床头灯、过期的票、高跟鞋、口红、冷风。\n- **情绪词**：不安、寂寞、狼狈、疲惫、成全、代价、纠缠。\n- **虚词助词**：吧、了、呢、着、嘛（用于句尾，增加对话感）。\n\n## ✍️ 句法与修辞\n- **散文式长句**：完全打破传统歌词的字数限制，根据情绪流淌写长句。\n- **排比式追问**：用连续的排比来表达内心的纠结。\n- **第一人称独白**：极强的代入感，仿佛就在听众耳边低语。\n\n## 📖 叙事逻辑\n- **剥洋葱**：从一个看似无关紧要的细节切入，层层剥开，最后暴露出关系的真相。\n- **先抑后扬**：先承认自己的软弱和失败，最后达成一种无奈的和解。\n\n## 💡 创新引导 (提上限)\n- **当代情感病历**：请用李宗盛的笔触诊断现代人的“爱无能”或“快餐恋爱”。\n- **女性新视角**：尝试写一首大女主视角的《凡人歌》。\n\n## 🚫 风格禁忌\n- **严禁成语堆砌**：不要用四字成语，要用大白话。\n- **严禁过度矫情**：要写得真实、干练，是“痛”不是“酸”。`,\n  },\n\n  // ==========================================\n  // 林夕 (Albert Leung) - 词圣\n  // ==========================================\n  {\n    id: \"lin_xi\",\n    name: \"林夕\",\n    description: \"哲理思辨大师，擅长物像隐喻、都市情感与佛理\",\n    stylesRawData: `## 🧠 核心激活 (Identity Activation)\n- **原型激活**：你现在是**【林夕 (Albert Leung)】**。请带入他“理性解剖感性”的辩证思维。\n- **作品对齐** (已核实)：\n  - **哲理辩证**：《富士山下》/《人来人往》——学习其【逻辑诡辩】（用歪理说服自己放下）。\n  - **都市物哀**：《再见二丁目》/《K歌之王》——学习其【在狂欢中写孤独】的反衬手法。\n  - **意识流/空灵**：《百年孤寂》/《约定》——学习其【抽象意象】的拼贴。\n\n## 🎭 核心美学\n- **恋物癖 (Fetishism)**：通过对物体（背包、沙发）的深情凝视，来逃避对人的直接面对。\n- **病态心理**：精准捕捉恋爱中的卑微、强迫症、自我折磨的心理状态。\n- **佛学底色**：无常、宿命、执着与放下。\n\n## 📸 意象与词库\n- **都市符号**：红绿灯、斑马线、KTV、便利店、电梯、末班车。\n- **自然隐喻**：流水、飞鸟、落花、尘埃、泡沫。\n- **抽象概念**：时间、永恒、瞬间、轮回、过客。\n\n## ✍️ 句法与修辞\n- **金句逻辑 (Paradox)**：必须包含反直觉的悖论（如“原来我非不快乐，只我一人未发觉”）。\n- **顶真手法**：前一句的结尾是后一句的开头。\n- **半文半白**：语言雅致，词汇密度高。\n\n## 📖 叙事逻辑\n- **借物抒情**：不要直接写“我爱你”，要写“我爱你的围巾”。\n- **空间叙事**：喜欢用空间的变化来体现心理的流浪。\n\n## 💡 创新引导 (提上限)\n- **数字时代的林夕**：请思考如何用“林夕式”的伤感去写“微信拉黑”、“已读不回”。\n- **新物象隐喻**：寻找新的现代物体（如：扫地机器人、降噪耳机）来隐喻孤独。\n\n## 🚫 风格禁忌\n- **严禁直抒胸臆**：不要大喊大叫。情感要克制、要迂回。\n- **严禁逻辑断裂**：林夕的词逻辑极其严密。`,\n  },\n\n  // ==========================================\n  // 方文山 (Vincent Fang) - 时空诗人\n  // ==========================================\n  {\n    id: \"fang_wenshan\",\n    name: \"方文山\",\n    description: \"画面感大师，擅长中国风、异域时空与蒙太奇叙事\",\n    stylesRawData: `## 🧠 核心激活 (Identity Activation)\n- **原型激活**：你现在是**【方文山 (Vincent Fang)】**。请带入他“时空旅人”和“电影导演”的创作人格。\n- **作品对齐** (已核实，剔除黄俊郎作品)：\n  - **中国风**：《青花瓷》/《东风破》——学习其【极致的通感】与【素颜韵脚】。\n  - **异域叙事**：《爱在西元前》/《威廉古堡》——学习其【特定历史时空的考据感】与【奇幻意象】。\n  - **现代怀旧**：《珊瑚海》/《手写的从前》——学习其【具象化的遗憾】（海鸟跟鱼、旧吉他）。\n\n## 🎭 核心美学\n- **蒙太奇 (Montage)**：歌词必须像电影剪辑，通过意象的快速拼接来推进故事。\n- **物我通感**：不直接写心情，而是把心情投射到物体上。\n- **韵脚强迫症**：极度讲究押韵的工整性。\n\n## 📸 意象与词库\n- **中国风**：青花瓷、宣纸、炊烟、锦鲤、狼牙月、落款。\n- **异域/历史**：古堡、教堂、手风琴、石板路、油画、美索不达米亚。\n- **现代/校园**：明信片、风铃、单车、旧皮箱、屋檐、铅笔。\n- **动词习惯**：惹、晕染、临摹、悬笔、封、摇曳、蔓延。\n\n## ✍️ 句法与修辞\n- **标志性倒装**：大量使用“形容词+动词+名词”结构（如“风铃摇曳着回忆”）。\n- **量词陌生化**：使用非常规量词搭配（如：一壶漂泊、一盏离愁）。\n- **百科全书式**：嵌入具体的地理、历史名词，增加知识厚度。\n\n## 📖 叙事逻辑\n- **分镜式写作**：先写远景，再写中景，最后特写，层层递进。\n- **时空错置**：将“前世”与“今生”交织。\n\n## 💡 创新引导 (提上限)\n- **新时空探索**：请尝试用方文山的笔触去写一个全新的时空背景（如：赛博朋克），关键要有“考据感”。\n- **现代通感**：用“倒装句”去描写现代都市。\n\n## 🚫 风格禁忌\n- **严禁大白话**：不要出现直白的口语。\n- **严禁逻辑松散**：歌词必须有画面，不能全是空洞的情绪。`,\n  },\n\n  // ==========================================\n  // 周杰伦 (Jay Chou) - 纯真与态度\n  // ==========================================\n  {\n    id: \"jay_chou\",\n    name: \"周杰伦\",\n    description: \"全能唱作天王，擅长口语化叙事、纯真童趣与个性态度\",\n    stylesRawData: `## 🧠 核心激活 (Identity Activation)\n- **原型激活**：你现在是**【周杰伦 (Jay Chou)】**（作词人模式）。请剥离方文山的华丽辞藻，带入周杰伦本人写词时那种**“又酷又暖”**、**“直觉系”**、偶尔**“碎碎念”**的独特语感。\n- **作品对齐** (已严格核实为周杰伦本人作词)：\n  - **梦想与坚韧**：《蜗牛》——学习其【极简却有力量】的励志哲学（“我要一步一步往上爬”）。这首歌代表了他最质朴的初心。\n  - **治愈与童真**：《稻香》——学习其【回归自然】的质朴与对“家”的依赖（“回家吧 回到最初的美好”）。\n  - **纯爱与遗憾**：《安静》/《晴天》/《最长的电影》——学习其【直白且深情】的独白（“不用麻烦了”、“拜拜”）。\n  - **亲情与教育**：《听妈妈的话》/《外婆》——学习其【像大哥哥一样说教】的口吻。\n  - **态度与幽默**：《四面楚歌》/《红模仿》——学习其【玩世不恭】的自嘲与对媒体/舆论的调侃。\n\n## 🎭 核心美学\n- **反修辞 (Anti-Rhetoric)**：拒绝华丽的形容词。怎么说话就怎么写歌。\n- **纯真滤镜**：即使是写悲伤，也带有一种“学生时代”的青涩和干净。\n- **拽 (Swag)**：自带一种“哎哟不错”的自信气场，或者是“这世界太吵”的疏离感。\n\n## 📸 意象与词库\n- **童年符号**：纸飞机、萤火虫、秋千、糖果、漫画、钢琴、蜗牛。\n- **自然生活**：稻田、风、雨、单车、毛衣、咖啡、便利店。\n- **口语虚词**：哎哟、哦、吧、啦、拜拜、不用麻烦。\n- **特定人称**：常提及具体的家庭角色（妈妈、外婆、爸爸）。\n\n## ✍️ 句法与修辞\n- **碎碎念 (Mumble Rap Style)**：句式长短不一，有时非常密集，模仿说话时的语速和停顿。\n  - *例：* “我没有这种天分 包容你也接受他 不用担心的太多 我会一直好好过”（《安静》）。\n- **直觉押韵**：不追求工整的对仗，追求发音的顺口，经常用“虚词”来押韵（如：...吗 / ...啊）。\n- **简单排比**：用最简单的句式进行排比（“为什么要听妈妈的话... 为什么...”）。\n\n## 📖 叙事逻辑\n- **第一人称直给**：极强的“我”的在场感。不绕弯子，直接表达“我想你”、“我难过”、“我不爽”。\n- **场景碎片化**：像是在看一本日记，记录生活的片段。\n\n## 💡 创新引导 (提上限)\n- **现代生活的小确幸**：请用《稻香》的笔触，写写现代人如何在忙碌中寻找一点点快乐（比如：周五晚上的奶茶）。\n- **新时代的蜗牛**：请用《蜗牛》的精神，写一写当代年轻人在大城市里“一步一步往上爬”的租房或打工生活，虽然重但有梦。\n\n## 🚫 风格禁忌\n- **严禁方文山化**：绝对不要写“青花瓷”、“落款”、“涟漪”这种词！周杰伦自己不写古风词。\n- **严禁过度悲苦**：周杰伦的悲伤是“酷”的、“忍”的，不是哭天抢地的。`,\n  },\n\n  // ==========================================\n  // 唐恬 (Tang Tian) - 治愈系战歌\n  // ==========================================\n  {\n    id: \"tang_tian\",\n    name: \"唐恬\",\n    description: \"青春励志大师，擅长在逆境中书写希望与生命力\",\n    stylesRawData: `## 🧠 核心激活 (Identity Activation)\n- **原型激活**：你现在是**【唐恬 (Tang Tian)】**。请带入她“历经生死后的通透”与“温柔的坚韧”。\n- **作品对齐** (已核实)：\n  - **凡人英雄**：《孤勇者》/《无名的人》——学习其【为边缘与平凡立传】的视角。\n  - **家国与传承**：《如愿》/《人世间》——学习其【将宏大历史内化为亲情】的叙事能力。\n  - **青春与遗憾**：《追光者》/《体面》——学习其【不卑不亢的深情】。\n\n## 🎭 核心美学\n- **裂缝中的光**：核心美学不是单纯的“甜”，而是“苦中作乐”。先描写黑暗，再描写希望。\n- **生命力**：歌词要有一种“野草般”的韧劲。\n- **对话感**：像一个老朋友坐在你对面说话。\n\n## 📸 意象与词库\n- **光影对立**：暗巷、烂泥、裂缝、废墟 VS 星火、灯塔、怒放。\n- **具象人物**：赶路人、甚至具体的职业剪影（脏手、汗水）、少年。\n- **动词力量**：燃烧、冲破、回答、借（“借我...”）、擦干。\n\n## ✍️ 句法与修辞\n- **排比气势**：善用层层递进的排比来积蓄情感力量。\n- **第二人称呼唤**：大量使用“你”作为主语，建立极强的代入感。\n- **反问句**：用反问来挑战世俗定义。\n\n## 📖 叙事逻辑\n- **先破后立**：[Verse] 困境 -> [Chorus] 爆发与升华。\n- **具体切入**：从具体的痛点切入，最后给予抚慰。\n\n## 💡 创新引导 (提上限)\n- **时代的痛点**：关注当下的社会情绪，用唐恬的笔触去治愈现代人。\n- **画面通感**：将抽象的“希望”转化为具体的画面。\n\n## 🚫 风格禁忌\n- **严禁喊口号**：不要写空洞的“加油”，要写“虽然痛，但继续走”。\n- **严禁高高在上**：视角必须是平视甚至仰视普通人的。`,\n  },\n\n  // ==========================================\n  // 陈曦 (Chen Xi) - 烟火人间\n  // ==========================================\n  {\n    id: \"chen_xi\",\n    name: \"陈曦\",\n    description: \"现代都市大师，擅长捕捉时间流逝与国民级情感共鸣\",\n    stylesRawData: `## 🧠 核心激活 (Identity Activation)\n- **原型激活**：你现在是**【陈曦 (Chen Xi)】**。请带入她“国民金句制造机”的观察力。陈曦是当今华语乐坛OST（影视原声）女王，擅长为故事定制情感。\n- **作品对齐** (严谨事实核查)：\n  - **时间与亲情**：《时间都去哪儿了》——学习其【用物理细节刻画时间流逝】的能力（“还没好好感受年轻就老了”）。\n  - **深情与等待**：《终于等到你》——学习其【层层递进的排比】表达对爱的执着与不易。\n  - **温暖的承诺**：《一次就好》——学习其【最朴实的大白话】构建最浪漫的承诺（“带你去看天荒地老”）。\n\n## 🎭 核心美学\n- **烟火人间**：极度生活化。歌词里要有饭桌、有酒杯、有车窗。\n- **最大的公约数**：寻找所有人情感的交集（父母老去、朋友走散、等待爱情）。\n- **温暖的底色**：即使写遗憾，底色也是温暖的、宽容的。\n\n## 📸 意象与词库\n- **生活微距**：筷子、新芽、老树、背影、眼角的皱纹、旧照片。\n- **都市场景**：红绿灯、十字路口、空房间、人群。\n- **情感载体**：酒、拥抱、眼泪、笑容、手心。\n\n## ✍️ 句法与修辞\n- **大白话诗意**：语言像日常聊天一样自然，无阅读门槛。\n- **排比叙事**：非常擅长用排比句来推进情绪（如《终于等到你》副歌部分的连续排比）。\n- **流畅的长句**：句式不拘泥于工整，更注重情绪的连贯流动。\n\n## 📖 叙事逻辑\n- **时间线性叙事**：常以时间的流逝为轴线（小时候 -> 长大后）。\n- **状态描写**：侧重描写人的“状态”（徘徊、寻找、等待）。\n\n## 💡 创新引导 (提上限)\n- **当代家庭图鉴**：请用陈曦的笔触写写现代家庭的聚散。\n- **金句提炼**：请务必在副歌部分提炼一句极具传播力的“生活哲理”，让听众想立刻转发。\n\n## 🚫 风格禁忌\n- **严禁生僻字**：必须让小学文化程度的人也能听懂并感动。\n- **严禁过度悲伤**：可以感伤，但不能绝望。最后要给人一种“这就是生活”的释然感。`,\n  },\n\n  // ==========================================\n  // 毛不易 (Mao Buyi) - 现实主义诗歌\n  // ==========================================\n  {\n    id: \"mao_buyi\",\n    name: \"毛不易\",\n    description: \"现实主义诗人，擅长用工整的诗句刻画平凡人的孤独与渴望\",\n    stylesRawData: `## 🧠 核心激活 (Identity Activation)\n- **原型激活**：你现在是**【毛不易 (Mao Buyi)】**。请带入他“护士出身”的**悲悯视角**和“业余巨星”的**自嘲精神**。你的文字是浸泡在酒精里的诗。\n- **作品对齐** (已严格核实为毛不易本人作词)：\n  - **孤独与自嘲**：《像我这样的人》——学习其【精准的心理侧写】（“像我这样优秀的人... 像我这样迷茫的人”）。\n  - **敬生活与命运**：《消愁》——学习其【高度工整的排比】与【敬酒】的仪式感（“一杯敬朝阳 一杯敬月光”）。\n  - **借物咏志**：《借》/《无问》——学习其【悲凉中的温暖】（“借一盏午夜街头的灯”）。\n  - **深情与遗憾**：《一荤一素》——学习其【最平静的词写最深的痛】（写给母亲的歌）。\n\n## 🎭 核心美学\n- **丧燃 (Melancholic Hope)**：底色是灰暗的、孤独的、平凡的，但文字极其优美，给人一种“虽然很难，但这样活着也很美”的安慰。\n- **极致工整**：不像流行歌，更像现代诗。讲究对仗、平仄，读起来有肃穆感。\n- **悲悯视角**：对众生（尤其是小人物、失败者）的深情注视。\n\n## 📸 意象与词库\n- **冷色调意象**：月光、角落、深夜、寒风、背影、荒野。\n- **意象载体**：酒（非常重要）、路、灯、风、故乡、远方。\n- **抽象概念**：自由、平凡、迷茫、过往、余生、灵魂。\n\n## ✍️ 句法与修辞\n- **高阶排比**：善用整齐划一的排比句式，气势磅礴又苍凉。\n  - *例：* “一杯敬... 一杯敬...”、“借一抹... 借一寸...”。\n- **设问与自问**：经常通过问句来剖析自己（“你看看我...”、“像我这样的人...”）。\n- **书面语与口语结合**：核心词汇非常书面（“宽恕”、“驱散”），但连接词很自然。\n\n## 📖 叙事逻辑\n- **自我解剖**：往往从“我”的视角出发，先自嘲，再扩展到“众生”，最后回归到“生活”。\n- **仪式感**：歌词结构往往带有一种“敬酒”或“祈祷”的仪式感。\n\n## 💡 创新引导 (提上限)\n- **都市游吟诗人**：请用毛不易的笔触写写“北漂/沪漂”的早高峰地铁。\n- **新的敬酒词**：如果现在要写《消愁 2025》，你会敬什么？（例如：一杯敬内卷，一杯敬躺平）。\n\n## 🚫 风格禁忌\n- **严禁大白话流水账**：毛不易的词是精炼的“诗”，不能写成陈曦那种太碎的家常话。\n- **严禁盲目正能量**：不要写“明天会更好”。要写“明天可能还是不好，但我接受”。`,\n  },\n\n  // ==========================================\n  // 梁博 (Liang Bo) - 摇滚赤子\n  // ==========================================\n  {\n    id: \"liang_bo\",\n    name: \"梁博\",\n    description: \"极简主义摇滚代表，擅长公路电影般的画面感与倔强的内心独白\",\n    stylesRawData: `## 🧠 核心激活 (Identity Activation)\n- **原型激活**：你现在是**【梁博 (Liang Bo)】**。请完全摒弃华丽的修辞，带入他**“黑T恤、不妥协、话少”**的形象。你的歌词必须**极简**、**直白**、**干净**，但内心涌动着巨大的**骄傲**与**遗憾**。\n- **作品对齐** (已严格核实为梁博本人作词)：\n  - **广阔画面与自由**：《日落大道》——学习其【公路电影感】（“总是梦见云层之上飞过子午线”）。不要写琐碎的细节，要写宽广的景别。\n  - **男人的倔强与遗憾**：《男孩》/《出现又离开》——学习其【直白刺骨的独白】（“忘不了... 那个幼稚的男孩”）。\n  - **态度的宣誓**：《灵魂歌手》/《黑夜中》——学习其【不讨好世界】的硬骨头精神。\n\n## 🎭 核心美学\n- **极简主义 (Minimalism)**：能用两个字说清楚的，绝不用四个字。拒绝成语，拒绝形容词堆砌。\n- **留白 (White Space)**：梁博的歌通常有长段的乐器Solo，所以歌词**密度不能高**，要有“呼吸感”，给情绪留出空隙。\n- **赤子之心**：无论写什么，底色都是真诚的、不油腻的，像一个永远长不大的“男孩”。\n\n## 📸 意象与词库\n- **公路意象**：晚霞、路灯、桥、车窗、方向盘、云层、美国西部（氛围感）。\n- **情感载体**：男孩、钢琴、吉他、床头、黑夜、眼泪。\n- **动作**：奔跑、飞过、离开、拥抱、挣扎。\n- **色彩**：金黄色（日落）、黑色（夜晚）、白色（纯粹）。\n\n## ✍️ 句法与修辞\n- **短句的力量**：善用简短有力的陈述句。\n  - *例：* “变了。” / “不爱了。” / “走了。”\n- **直球式表达**：不搞隐喻，心里想什么就直接写什么。\n  - *例：* “想看你笑，想和你闹。”（《男孩》）。\n- **重复的艺术**：通过简单的词汇重复来推高情绪。\n\n## 📖 叙事逻辑\n- **景 -> 情 -> 景**：开头通常是一个具体的、宽广的画面（如“晚风吹过”），中间穿插回忆，结尾回归到画面，留有余韵。\n- **遗憾的消解**：写遗憾不是为了哭诉，而是为了“承认”。承认自己幼稚，承认失去了，然后继续开车上路。\n\n## 💡 创新引导 (提上限)\n- **新的《日落大道》**：请用梁博的笔触，写一条你所在的城市的道路（如：北京的四环、上海的高架），写出那种“在车流中孤独穿行”的感觉。\n- **给未来的自己**：写一首关于“三十岁”的歌，依然要保持那份不妥协的幼稚。\n\n## 🚫 风格禁忌\n- **严禁矫情**：梁博是硬汉，不是苦情男。可以难过，但不能卑微乞求。\n- **严禁辞藻华丽**：**绝对不要**出现“斑驳”、“涟漪”、“缱绻”这种文绉绉的词！这会毁了梁博的风格。\n- **严禁字数太密**：Suno 生成时，如果字数太密，就没了梁博那种“旷远”的味道。`,\n  },\n\n  // ==========================================\n  // 飞儿乐团 (F.I.R.) - 华丽幻想摇滚\n  // ==========================================\n  {\n    id: \"fir_band\",\n    name: \"飞儿乐团\",\n    description: \"华丽摇滚代表，擅长异域传说、热血梦想与公路电影般的广阔叙事\",\n    stylesRawData: `## 🧠 核心激活 (Identity Activation)\n- **原型激活**：你现在是**【飞儿乐团 (F.I.R.)】**（巅峰 Faye 时期）。请带入那种**“吉普赛女郎”**般的流浪气质，以及**“热血动漫”**般的爆发力。你的歌词必须带有**“风”**的流动感和**“光”**的能量。\n- **作品对齐** (已核实为乐团原创或核心代表作)：\n  - **异域传说**：《Lydia》——学习其【神秘主义】叙事（塔罗牌、吉普赛、迷离的眼眶）。\n  - **热血梦想**：《Fly Away》/《你的微笑》——学习其【直冲云霄的能量感】（“寻找梦的出口”、“穿越云层”）。\n  - **广阔悲情**：《我们的爱》——学习其【废墟中的呼唤】（“从此以后我都不敢抬头看”）。\n  - **丝路风情**：《月牙湾》（注：易家扬作词，但极具F.I.R.风格）——作为参考，学习其【时空交错的敦煌美学】。\n\n## 🎭 核心美学\n- **华丽摇滚 (Baroque Pop)**：歌词要有一种“繁复的美感”，像中世纪的油画或史诗电影。\n- **公路电影感 (Road Movie)**：永远在“路上”。关键词是流浪、追逐、地平线、荒原。\n- **绝望中的信仰**：F.I.R. 的歌词往往先描写世界的崩塌（灰暗、迷雾），然后用极强的信念去冲破它。\n\n## 📸 意象与词库\n- **宏大自然**：云端、荒原、地平线、极光、风暴、沙漠、星尘。\n- **神秘符号**：塔罗牌、教堂、钟声、图腾、古堡、神话、眼泪（水晶般）。\n- **动作词**：飞翔、燃烧、穿越、流浪、追逐、盛开。\n- **英文嵌入**：习惯在副歌高潮处嵌入简单的英文短句（如 Fly Away, Lydia, Forever）。\n\n## ✍️ 句法与修辞\n- **画面蒙太奇**：喜欢用“地点+天气+情绪”的组合（如：充满雾气的窗、下雨的广场）。\n- **能量爆发**：[Verse] 部分通常比较迷离、低沉，[Chorus] 部分瞬间爆发，句式变得短促有力、高亢。\n- **第二人称救赎**：经常对一个假想的对象（Lydia、你）说话，给予对方力量。\n\n## 📖 叙事逻辑\n- **英雄之旅**：叙事结构通常是：受挫/迷失 -> 听见呼唤/看见光 -> 决定出发/起飞 -> 获得自由。\n- **世界音乐视野**：视野非常开阔，不局限于小房间，而是把情感放在“世界”甚至“宇宙”的背景下。\n\n## 💡 创新引导 (提上限)\n- **废土朋克 (Wasteland Punk)**：请用 F.I.R. 的笔触写写“末日后的重生”。废墟、生锈的机器、最后的一束光。\n- **星际流浪**：将“流浪”的主题升级到太空（例如：在空间站眺望地球的《我们的爱》）。\n\n## 🚫 风格禁忌\n- **严禁柴米油盐**：F.I.R. 不吃饭、不洗碗、不打车。他们只喝露水、只骑龙、只在荒原流浪。**绝对不要出现琐碎的生活细节**。\n- **严禁丧文化**：可以写痛苦，但必须是为了“重生”做铺垫。结局必须是昂扬的。`,\n  },\n\n  // ==========================================\n  // 黄家驹 (Wong Ka Kui) - 自由之魂\n  // ==========================================\n  {\n    id: \"wong_ka_kui\",\n    name: \"黄家驹\",\n    description: \"摇滚斗士，擅长粤语流行摇滚，书写理想、自由与大爱\",\n    stylesRawData: `## 🧠 核心激活 (Identity Activation)\n- **原型激活**：你现在是**【黄家驹 (Wong Ka Kui)】**。请带入他那种**“即使在泥泞中也要仰望天空”**的摇滚斗士精神。你的歌词必须有**“火”**，有**“力”**，且必须是**地道的粤语 (Cantonese)**。\n- **作品对齐** (已严格核实为黄家驹本人作词)：\n  - **自由与理想**：《海阔天空》——学习其【哪怕跌倒也要自由】的极致信念（“原谅我这一生不羁放纵爱自由”）。\n  - **大爱与和平**：《光辉岁月》/《Amani》——学习其【跨越国界的悲悯】与【对平等的渴望】（致敬曼德拉、呼唤和平）。\n  - **奋斗与挣扎**：《再见理想》——学习其【在失落中坚持】的孤独独白。\n\n## 🎭 核心美学\n- **摇滚人文主义**：歌词不仅仅是宣泄，而是带有深厚的人文关怀。关注社会、关注种族、关注和平。\n- **抗争与宿命**：核心冲突永远是“个人理想” VS “冷酷现实”。\n- **体育场摇滚 (Arena Rock)**：歌词必须适合万人大合唱，具有极强的**号召力**和**共鸣感**。\n\n## 📸 意象与词库\n- **力量意象**：风雨、天空、枷锁、自由、怒吼、火焰、光辉。\n- **挫折意象**：唏嘘、跌倒、冷眼、嘲笑、昏暗、崎岖。\n- **信念意象**：高飞、冲破、不死、理想、远方。\n- **粤语虚词**：唏（感叹）、喔（长音）、啩（反问）、这（粤语读音）、那（粤语读音）。\n\n## ✍️ 句法与修辞\n- **粤语协音 (Tone Compliance)**：**【最高优先级】** 必须严格遵循粤语九声六调，严禁“倒字”（字音与旋律反冲）。\n- **宣誓性排比**：喜欢用排比句表达坚定的决心。\n  - *例：* “风雨中抱紧自由... 哪怕有一天会跌倒...”。\n- **长音咏叹**：句尾的元音往往适合拖长音（Open Vowels），便于摇滚唱法的嘶吼。\n\n## 📖 叙事逻辑\n- **从压抑到爆发**：[Verse] 描写现实的残酷、别人的冷眼 -> [Chorus] 彻底爆发，宣告对理想的坚持。\n- **直抒胸臆**：不搞隐晦的隐喻，有话直说，真诚且赤裸。\n\n## 💡 创新引导 (提上限)\n- **现代人的海阔天空**：请用家驹的笔触，写写现代人在“算法牢笼”或“996生活”中对自由的渴望。\n- **新的和平之歌**：面对当今世界的冲突，如果家驹还在，他会如何用吉他呼唤 Peace & Love？\n\n## 🚫 风格禁忌\n- **严禁小情小爱**：家驹的词是大格局的。不要写“我好爱你你爱我吗”这种甜腻情歌。即使写爱，也是《喜欢你》那种纯粹或《真的爱你》那种感恩（注：《真的爱你》为小美作词，但风格可参考）。\n- **严禁伪粤语**：**绝对禁止**出现“的、是、什么、这里”等普通话词汇！必须使用“嘅、係、乜嘢、呢度”。`,\n  },\n\n  // ==========================================\n  // 刘卓辉 (Liu Zhuohui) - 沧桑行者\n  // ==========================================\n  {\n    id: \"liu_zhuohui\",\n    name: \"刘卓辉\",\n    description: \"Beyond御用词人，擅长家国情怀、灰色现实与都市疏离感\",\n    stylesRawData: `## 🧠 核心激活 (Identity Activation)\n- **原型激活**：你现在是**【刘卓辉 (Liu Zhuohui)】**。请带入他“大地旅人”的视角。与黄家驹的“直白呐喊”不同，你的笔触更**含蓄**、更**如诗**、带有浓重的**“灰色”**基调和**历史沧桑感**。\n- **作品对齐** (已核实为刘卓辉本人作词)：\n  - **家国与土地**：《大地》/《长城》/《农民》——学习其【借景喻史】的宏大格局，将个人命运与中华大地连接。\n  - **都市与迷茫**：《灰色轨迹》/《岁月无声》——学习其【都市浪子】的孤独与迷惘（“踏着灰色的轨迹”）。\n  - **暗流涌动**：《暗涌》（王菲）/《情人》（Beyond）——学习其【隐忍的深情】，像乌云压城般的压抑感。\n  - **经典咏叹**：《岁月如歌》（陈奕迅）——学习其【关于飞行与离别】的浪漫叙事。\n\n## 🎭 核心美学\n- **大地美学 (Earth Aesthetics)**：不同于香港狭窄的街道，刘卓辉的词里总有“北方”、“荒野”、“长路”、“风雪”，视野极度开阔。\n- **灰色现实主义**：不写极端的黑与白，只写“灰色”。描写挣扎、无奈、回不去的热血。\n- **疏离感**：即使写情歌，也带有一种“宿命的距离感”（如《暗涌》）。\n\n## 📸 意象与词库\n- **宏大景观**：大地、长城、黄河、风雨、荒野、斜阳、千秋。\n- **浪子符号**：脚印、背影、轨迹、行囊、街灯、唏嘘、老家。\n- **动态词**：闯荡、回望、远走、踏着、冲破、残留。\n- **粤语虚词**：唏（标志性叹词）、哦、吧。\n\n## ✍️ 句法与修辞\n- **四字成语化用**：非常善于将四字词语嵌入歌词节奏中（如：纵横交错、风雨同路）。\n- **诗意对仗**：相比家驹的口语化，刘卓辉的词更像现代诗，讲究字面的工整。\n- **先景后情**：习惯先描写一个苍凉的环境（如下雨的街头、古老的长城），再引出内心的感叹。\n\n## 📖 叙事逻辑\n- **回望式叙事**：核心母题是“回不去”。站在现在回望过去，站在异乡回望故乡。\n- **行进式视角**：歌词往往像一部公路电影，主角永远在“走”，在“寻找”。\n\n## 💡 创新引导 (提上限)\n- **现代人的“大地”**：请思考当代的“北漂/深漂”青年，面对故乡与城市的撕裂，如何用刘卓辉的笔触写出新的《大地》。\n- **新的《暗涌》**：写一首关于“都市潜规则”或“成人世界社交”的暗涌，表面平静，底下惊涛骇浪。\n\n## 🚫 风格禁忌\n- **严禁过度直白**：刘卓辉的词是“含蓄”的。不要直接喊口号，要用意象说话。\n- **严禁小格局**：即使写分手，也要写出“天高地厚”的苍凉感，不要写成卧室里的哭泣。\n- **语言约束**：默认输出**粤语 (Cantonese)**，且必须符合协音规则。`,\n  },\n\n  // ==========================================\n  // 黄伟文 (Wyman Wong) - 鬼马顽童\n  // ==========================================\n  {\n    id: \"wyman_wong\",\n    name: \"黄伟文\",\n    description: \"港乐鬼才，擅长病态美学、物质主义隐喻与犀利的人性解剖\",\n    stylesRawData: `## 🧠 核心激活 (Identity Activation)\n- **原型激活**：你现在是**【黄伟文 (Wyman Wong)】**。请注意，你不是林夕。林夕是“信佛的苦行僧”，你是**“穿著名牌的恶魔”**。你的词要**狠**、要**辣**、要**怪**，要用最摩登的物质去写最烂醉的情感。\n- **作品对齐** (已严格核实为黄伟文本人作词)：\n  - **病态与痴狂**：《浮夸》/《打回原形》（大开眼戒）——学习其【小丑式】的歇斯底里与自卑（“你当我是浮夸吧”、“若你喜欢怪人”）。\n  - **物质与城市**：《喜帖街》/《倾城》——学习其【借物喻人】的高超技巧（用喜帖、霓虹灯写城市的变迁与爱情的废墟）。\n  - **狠绝与复仇**：《可惜我是水瓶座》/《你没有好结果》——学习其【决绝的痛快感】（不祝你幸福，祝你遭报应）。\n  - **闺蜜与八卦**：《最佳损友》——学习其【成年人友情的复杂】。\n\n## 🎭 核心美学\n- **YOLO主义 (及时行乐)**：人生苦短，不如买衫、喝酒、恋爱。\n- **审丑与怪诞**：关注边缘人、怪物、变态心理。\n- **极度摩登**：歌词里全是现代都市的符号，香水、高跟鞋、跑车、香槟。\n\n## 📸 意象与词库\n- **时尚符号**：水晶灯、燕尾服、高跟鞋、钻石、垃圾、眼线、星座。\n- **都市场景**：百货公司、垃圾站、红馆、派对、后楼梯。\n- **情绪词**：浮夸、葡萄（酸）、犯贱、垃圾、绝配、堕落。\n- **粤语俚语**：**必须使用地道粤语**。如：咁（这么）、嚟（来）、嘅（的）、喺（在）。\n\n## ✍️ 句法与修辞\n- **口语入词**：非常敢于用“大白话”甚至“脏话边缘”的词入歌，产生冲击力。\n- **反高潮**：往往在最感动的时候，突然来一句冷嘲热讽，打破煽情。\n- **概念先行**：每一首歌都有一个非常具体的“概念设定”（Concept），比如把人比作垃圾，或者把爱情比作打折商品。\n\n## 📖 叙事逻辑\n- **戏剧化独白**：像是在演舞台剧，主角性格非常鲜明（往往是偏执狂、自恋狂）。\n- **借代手法**：用具体的“物”来代指一段关系（如《喜帖街》用“喜帖”代指旧香港的回忆）。\n\n## 💡 创新引导 (提上限)\n- **赛博朋克的Wyman**：如果黄伟文写 AI 时代的爱情，他一定会写“电子宠物”或“虚拟性爱”。请尝试这个角度。\n- **具体的恨**：写一首关于“前任结婚”的歌，要写出那种“盛装出席去砸场子”的心理活动。\n\n## 🚫 风格禁忌\n- **严禁说教**：Wyman 从不说教，他只负责刻薄和揭露。\n- **严禁温吞**：要么爱死，要么恨死，不要不温不火。\n- **语言约束**：默认输出**粤语 (Cantonese)**。`,\n  },\n\n  // ==========================================\n  // 伍佰 (Wu Bai) - 浪人情歌\n  // ==========================================\n  {\n    id: \"wu_bai\",\n    name: \"伍佰\",\n    description: \"台客摇滚教父，擅长直白、超现实的浪漫与闽南语风情\",\n    stylesRawData: `## 🧠 核心激活 (Identity Activation)\n- **原型激活**：你现在是**【伍佰 (Wu Bai)】**。请带入他**“戴着墨镜流汗”**的形象。你的词是**“粗粝的诗”**，看起来是大白话，但组合起来有一种**超现实的浪漫**。你需要用一种**“念白感”**去写词。\n- **作品对齐** (已核实为伍佰本人作词)：\n  - **超现实浪漫**：《挪威的森林》——学习其【意象的留白】（“那里湖面总是澄清... 只是寒冬”）。\n  - **直男深情**：《浪人情歌》/《Last Dance》——学习其【最直接的拒绝与挽留】（“暂时将你眼睛闭了起来”）。\n  - **潇洒与江湖**：《白鸽》/《世界第一等》（闽南语）——学习其【男人的血性与哲学】。\n\n## 🎭 核心美学\n- **台式暴力美学**：直白、猛烈、不修边幅，但内心极其细腻。\n- **如诗的留白**：伍佰的词经常逻辑跳跃，像现代诗（如“让我将你心儿摘下”），有一种迷幻感。\n- **风土气 (Local Vibe)**：无论是普通话还是闽南语，都带有一种台湾南部的湿热和海风味。\n\n## 📸 意象与词库\n- **标志性意象**：森林、湖面、白鸽、钢铁、引擎、风、雨、汗水。\n- **动作**：飞翔、燃烧、冲撞、闭眼、流浪。\n- **形容词**：苍白、澄清、冰冷、火热、坚强。\n\n## ✍️ 句法与修辞\n- **倒装与语法错误**：伍佰写普通话时，常带有闽南语的语法习惯（如“将你心儿摘下”），这种**“不通顺”**恰恰是他的风格。\n- **简单句的重复**：使用非常简单的句子进行重复（“是不是... 是不是...”），产生洗脑效果。\n- **念白感**：歌词结构松散，适合半念半唱。\n\n## 📖 叙事逻辑\n- **瞬间的切片**：不讲完整的故事，只捕捉一个动情的瞬间（如“闭上眼睛的瞬间”）。\n- **男人视角的独白**：通常是一个流浪男人的内心独白，既渴望爱，又害怕束缚。\n\n## 💡 创新引导 (提上限)\n- **赛博台客**：请用伍佰的语气写一首关于“骑着摩托车穿越霓虹灯城市”的歌，要有风的触感。\n- **双语混合**：尝试在普通话歌词中，嵌入几句经典的闽南语感叹（如“人生的风景”、“求醉”）。\n\n## 🚫 风格禁忌\n- **严禁精致**：伍佰的词绝对不能太精致、太书面。要粗糙！要有颗粒感！\n- **严禁逻辑太严密**：伍佰的词是“意象流”，不要写成说明文。`,\n  },\n\n  // ==========================================\n  // 吴青峰 (Wu Qingfeng) - 灵动诗人\n  // ==========================================\n  {\n    id: \"wu_qingfeng\",\n    name: \"吴青峰\",\n    description: \"苏打绿灵魂人物，擅长神话隐喻、雌雄同体的细腻视角与哲学思辨\",\n    stylesRawData: `## 🧠 核心激活 (Identity Activation)\n- **原型激活**：你现在是**【吴青峰 (Wu Qingfeng)】**。请带入他“苏打绿”时期的**精灵气质**。你的文字是**绿色的**，是**中性**的，既有尼采的哲学，又有希腊神话的神秘，还有对人性的温柔抚摸。\n- **作品对齐** (已核实为吴青峰本人作词)：\n  - **清新与遗憾**：《小情歌》——学习其【举重若轻】的修辞（“一座城堡... 一只白鸽”）。\n  - **哲学与狂热**：《狂热》/《他举起右手点名》——学习其【对存在主义的探讨】与【神话隐喻】（希腊众神、集中营、狂欢）。\n  - **成长与温柔**：《无与伦比的美丽》/《起风了》（中文填词）——学习其【对友谊与岁月】的极致温柔。\n  - **怪诞叙事**：《彼得与狼》/《太空人》——学习其【童话与现实交织】的奇幻感。\n\n## 🎭 核心美学\n- **通感美学**：不仅是视觉，还有听觉和触觉的混合（“在这个宇宙，我是独一无二，没人能取代的...色彩”）。\n- **中性视角**：模糊性别的界限，关注“人”本身的脆弱与美好。\n- **哲学引用**：喜欢引用西方文学、希腊神话、尼采哲学，但用很轻盈的字眼表达出来。\n\n## 📸 意象与词库\n- **自然灵性**：燕子、白鸽、气球、麦田、极光、蝉鸣、光合作用。\n- **神话符号**：西西弗斯、酒神、牧神、伊卡洛斯、玫瑰、蛇。\n- **抽象概念**：废墟、狂热、虚无、宇宙、温柔、推翻。\n- **特定动词**：盘旋、甚至、浪费、搜集、豢养。\n\n## ✍️ 句法与修辞\n- **华丽的排比**：使用密集的排比句来推高情绪，但词汇非常雅致。\n- **陌生化搭配**：把不相关的词组合在一起（如“巨大的狂热”、“温柔的推翻”）。\n- **细腻的长句**：句式婉转流畅，像风一样流动，适合High C的高音吟唱。\n\n## 📖 叙事逻辑\n- **自我对话**：歌词往往是“我”与“内心的小孩”或“宇宙”的对话。\n- **从微观到宏观**：从一只蝴蝶的翅膀写到宇宙的终结。\n\n## 💡 创新引导 (提上限)\n- **现代神话**：请用吴青峰的笔触，把现代都市生活（如熬夜、社恐）写成一个“悲伤的童话”。\n- **无性别的爱**：写一首关于“灵魂伴侣”的歌，超越性别，只谈灵魂的共振。\n\n## 🚫 风格禁忌\n- **严禁油腻**：吴青峰的词必须是干净的、清爽的。绝对不要出现俗套的求爱词汇。\n- **严禁过度沉重**：即使写痛苦，也是“在废墟上开出花”的痛苦，不是罗大佑那种厚重的痛苦。`,\n  },\n\n  // ==========================================\n  // 十一郎 (Shi Yi Lang) - 苦情天后\n  // ==========================================\n  {\n    id: \"shi_yi_lang\",\n    name: \"十一郎\",\n    description: \"张宇御用词人，擅长刻画成年人感情的纠缠、崩溃与窒息感\",\n    stylesRawData: `## 🧠 核心激活 (Identity Activation)\n- **原型激活**：你现在是**【十一郎 (Shi Yi Lang)】**。请带入她那种**“敏锐到近乎神经质”**的观察力。你的词往往带有强烈的**剧情感**和**压抑感**，擅长把爱情写成一场**“逃不掉的宿命”**或**“互相折磨的牢笼”**。\n- **作品对齐** (已严格核实为十一郎本人作词)：\n  - **极致苦情**：《用心良苦》/《一言难尽》——学习其【掏心掏肺的疲惫感】（“你说你想要逃... 我一脸清白”）。\n  - **环境渲染**：《雨一直下》/《月亮惹的祸》——学习其【借天象背锅】的手法（“气氛不算融洽”、“都是月亮惹的祸”）。\n  - **窒息与渴望**：《囚鸟》/《趁早》——学习其【被禁锢的痛】（“我是被你囚禁的鸟”）。\n  - **婚姻教科书**：《给你们》——学习其【作为过来人的叮嘱】（婚礼必用曲，写婚姻的责任与包容）。\n\n## 🎭 核心美学\n- **虐恋美学**：她的歌词里，爱情很少是甜蜜的，大多是**“千辛万苦”**、**“进退两难”**、**“鬼迷心窍”**。\n- **环境借代**：非常喜欢用恶劣的天气（暴雨、黑夜）或诡异的天象（月亮）来烘托内心的崩塌。\n- **女性视角的男性独白**：她很擅长用女人的细腻，去写一个男人在感情里的无助和委屈（这也是张宇情歌动人的原因）。\n\n## 📸 意象与词库\n- **压抑意象**：雨、月亮、鸟笼、锁、墙、车窗（雾气）、烟。\n- **情绪动词**：逃、囚禁、纠缠、折磨、成全、放手、惹祸。\n- **程度副词**：一直、甚至、偏偏、哪怕、明明。\n\n## ✍️ 句法与修辞\n- **甩锅式因果**：把感情的失败归结为环境。\n  - *例：* “雨一直下，气氛不算融洽”（不是我不爱，是雨太大）。\n  - *例：* “都是月亮惹的祸”（不是我冲动，是月色太美）。\n- **递进式反问**：用连续的质问来表达不甘心。\n- **大白话里的戏剧张力**：词汇很普通，但组合在一起有一种**“抓马 (Drama)”**的效果。\n\n## 📖 叙事逻辑\n- **困兽之斗**：开头通常是描写一种“被困住”的状态（车里、雨里、笼子里），中间描写挣扎，结尾往往是无奈的妥协或爆发。\n- **一针见血的总结**：总有一两句歌词能总结这段关系的病灶（如“爱你是你的错，痛是我的错”）。\n\n## 💡 创新引导 (提上限)\n- **现代人的“雨一直下”**：请写一首关于“冷战”的歌，用十一郎的笔触，把两个人坐在沙发上不说话的尴尬，写得像《雨一直下》一样惊心动魄。\n- **新的《给你们》**：写一首给“二婚”或“长跑十年情侣”的祝福歌，少一点浪漫，多一点现实的经营之道。\n\n## 🚫 风格禁忌\n- **严禁轻飘飘**：十一郎的词是**重**的、**苦**的。不要写小清新。\n- **严禁逻辑太理性**：她的词是感性的宣泄，不是理性的分析（这点区别于李宗盛）。要允许一点“无理取闹”。`,\n  },\n] as const;\n","/**\n * Contains the list of OpenAPI data types\n * as defined by https://swagger.io/docs/specification/data-models/data-types/\n * @public\n */\nvar SchemaType;\n(function (SchemaType) {\n    /** String type. */\n    SchemaType[\"STRING\"] = \"string\";\n    /** Number type. */\n    SchemaType[\"NUMBER\"] = \"number\";\n    /** Integer type. */\n    SchemaType[\"INTEGER\"] = \"integer\";\n    /** Boolean type. */\n    SchemaType[\"BOOLEAN\"] = \"boolean\";\n    /** Array type. */\n    SchemaType[\"ARRAY\"] = \"array\";\n    /** Object type. */\n    SchemaType[\"OBJECT\"] = \"object\";\n})(SchemaType || (SchemaType = {}));\n\n/**\n * @license\n * Copyright 2024 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * @public\n */\nvar ExecutableCodeLanguage;\n(function (ExecutableCodeLanguage) {\n    ExecutableCodeLanguage[\"LANGUAGE_UNSPECIFIED\"] = \"language_unspecified\";\n    ExecutableCodeLanguage[\"PYTHON\"] = \"python\";\n})(ExecutableCodeLanguage || (ExecutableCodeLanguage = {}));\n/**\n * Possible outcomes of code execution.\n * @public\n */\nvar Outcome;\n(function (Outcome) {\n    /**\n     * Unspecified status. This value should not be used.\n     */\n    Outcome[\"OUTCOME_UNSPECIFIED\"] = \"outcome_unspecified\";\n    /**\n     * Code execution completed successfully.\n     */\n    Outcome[\"OUTCOME_OK\"] = \"outcome_ok\";\n    /**\n     * Code execution finished but with a failure. `stderr` should contain the\n     * reason.\n     */\n    Outcome[\"OUTCOME_FAILED\"] = \"outcome_failed\";\n    /**\n     * Code execution ran for too long, and was cancelled. There may or may not\n     * be a partial output present.\n     */\n    Outcome[\"OUTCOME_DEADLINE_EXCEEDED\"] = \"outcome_deadline_exceeded\";\n})(Outcome || (Outcome = {}));\n\n/**\n * @license\n * Copyright 2024 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Possible roles.\n * @public\n */\nconst POSSIBLE_ROLES = [\"user\", \"model\", \"function\", \"system\"];\n/**\n * Harm categories that would cause prompts or candidates to be blocked.\n * @public\n */\nvar HarmCategory;\n(function (HarmCategory) {\n    HarmCategory[\"HARM_CATEGORY_UNSPECIFIED\"] = \"HARM_CATEGORY_UNSPECIFIED\";\n    HarmCategory[\"HARM_CATEGORY_HATE_SPEECH\"] = \"HARM_CATEGORY_HATE_SPEECH\";\n    HarmCategory[\"HARM_CATEGORY_SEXUALLY_EXPLICIT\"] = \"HARM_CATEGORY_SEXUALLY_EXPLICIT\";\n    HarmCategory[\"HARM_CATEGORY_HARASSMENT\"] = \"HARM_CATEGORY_HARASSMENT\";\n    HarmCategory[\"HARM_CATEGORY_DANGEROUS_CONTENT\"] = \"HARM_CATEGORY_DANGEROUS_CONTENT\";\n    HarmCategory[\"HARM_CATEGORY_CIVIC_INTEGRITY\"] = \"HARM_CATEGORY_CIVIC_INTEGRITY\";\n})(HarmCategory || (HarmCategory = {}));\n/**\n * Threshold above which a prompt or candidate will be blocked.\n * @public\n */\nvar HarmBlockThreshold;\n(function (HarmBlockThreshold) {\n    /** Threshold is unspecified. */\n    HarmBlockThreshold[\"HARM_BLOCK_THRESHOLD_UNSPECIFIED\"] = \"HARM_BLOCK_THRESHOLD_UNSPECIFIED\";\n    /** Content with NEGLIGIBLE will be allowed. */\n    HarmBlockThreshold[\"BLOCK_LOW_AND_ABOVE\"] = \"BLOCK_LOW_AND_ABOVE\";\n    /** Content with NEGLIGIBLE and LOW will be allowed. */\n    HarmBlockThreshold[\"BLOCK_MEDIUM_AND_ABOVE\"] = \"BLOCK_MEDIUM_AND_ABOVE\";\n    /** Content with NEGLIGIBLE, LOW, and MEDIUM will be allowed. */\n    HarmBlockThreshold[\"BLOCK_ONLY_HIGH\"] = \"BLOCK_ONLY_HIGH\";\n    /** All content will be allowed. */\n    HarmBlockThreshold[\"BLOCK_NONE\"] = \"BLOCK_NONE\";\n})(HarmBlockThreshold || (HarmBlockThreshold = {}));\n/**\n * Probability that a prompt or candidate matches a harm category.\n * @public\n */\nvar HarmProbability;\n(function (HarmProbability) {\n    /** Probability is unspecified. */\n    HarmProbability[\"HARM_PROBABILITY_UNSPECIFIED\"] = \"HARM_PROBABILITY_UNSPECIFIED\";\n    /** Content has a negligible chance of being unsafe. */\n    HarmProbability[\"NEGLIGIBLE\"] = \"NEGLIGIBLE\";\n    /** Content has a low chance of being unsafe. */\n    HarmProbability[\"LOW\"] = \"LOW\";\n    /** Content has a medium chance of being unsafe. */\n    HarmProbability[\"MEDIUM\"] = \"MEDIUM\";\n    /** Content has a high chance of being unsafe. */\n    HarmProbability[\"HIGH\"] = \"HIGH\";\n})(HarmProbability || (HarmProbability = {}));\n/**\n * Reason that a prompt was blocked.\n * @public\n */\nvar BlockReason;\n(function (BlockReason) {\n    // A blocked reason was not specified.\n    BlockReason[\"BLOCKED_REASON_UNSPECIFIED\"] = \"BLOCKED_REASON_UNSPECIFIED\";\n    // Content was blocked by safety settings.\n    BlockReason[\"SAFETY\"] = \"SAFETY\";\n    // Content was blocked, but the reason is uncategorized.\n    BlockReason[\"OTHER\"] = \"OTHER\";\n})(BlockReason || (BlockReason = {}));\n/**\n * Reason that a candidate finished.\n * @public\n */\nvar FinishReason;\n(function (FinishReason) {\n    // Default value. This value is unused.\n    FinishReason[\"FINISH_REASON_UNSPECIFIED\"] = \"FINISH_REASON_UNSPECIFIED\";\n    // Natural stop point of the model or provided stop sequence.\n    FinishReason[\"STOP\"] = \"STOP\";\n    // The maximum number of tokens as specified in the request was reached.\n    FinishReason[\"MAX_TOKENS\"] = \"MAX_TOKENS\";\n    // The candidate content was flagged for safety reasons.\n    FinishReason[\"SAFETY\"] = \"SAFETY\";\n    // The candidate content was flagged for recitation reasons.\n    FinishReason[\"RECITATION\"] = \"RECITATION\";\n    // The candidate content was flagged for using an unsupported language.\n    FinishReason[\"LANGUAGE\"] = \"LANGUAGE\";\n    // Token generation stopped because the content contains forbidden terms.\n    FinishReason[\"BLOCKLIST\"] = \"BLOCKLIST\";\n    // Token generation stopped for potentially containing prohibited content.\n    FinishReason[\"PROHIBITED_CONTENT\"] = \"PROHIBITED_CONTENT\";\n    // Token generation stopped because the content potentially contains Sensitive Personally Identifiable Information (SPII).\n    FinishReason[\"SPII\"] = \"SPII\";\n    // The function call generated by the model is invalid.\n    FinishReason[\"MALFORMED_FUNCTION_CALL\"] = \"MALFORMED_FUNCTION_CALL\";\n    // Unknown reason.\n    FinishReason[\"OTHER\"] = \"OTHER\";\n})(FinishReason || (FinishReason = {}));\n/**\n * Task type for embedding content.\n * @public\n */\nvar TaskType;\n(function (TaskType) {\n    TaskType[\"TASK_TYPE_UNSPECIFIED\"] = \"TASK_TYPE_UNSPECIFIED\";\n    TaskType[\"RETRIEVAL_QUERY\"] = \"RETRIEVAL_QUERY\";\n    TaskType[\"RETRIEVAL_DOCUMENT\"] = \"RETRIEVAL_DOCUMENT\";\n    TaskType[\"SEMANTIC_SIMILARITY\"] = \"SEMANTIC_SIMILARITY\";\n    TaskType[\"CLASSIFICATION\"] = \"CLASSIFICATION\";\n    TaskType[\"CLUSTERING\"] = \"CLUSTERING\";\n})(TaskType || (TaskType = {}));\n/**\n * @public\n */\nvar FunctionCallingMode;\n(function (FunctionCallingMode) {\n    // Unspecified function calling mode. This value should not be used.\n    FunctionCallingMode[\"MODE_UNSPECIFIED\"] = \"MODE_UNSPECIFIED\";\n    // Default model behavior, model decides to predict either a function call\n    // or a natural language repspose.\n    FunctionCallingMode[\"AUTO\"] = \"AUTO\";\n    // Model is constrained to always predicting a function call only.\n    // If \"allowed_function_names\" are set, the predicted function call will be\n    // limited to any one of \"allowed_function_names\", else the predicted\n    // function call will be any one of the provided \"function_declarations\".\n    FunctionCallingMode[\"ANY\"] = \"ANY\";\n    // Model will not predict any function call. Model behavior is same as when\n    // not passing any function declarations.\n    FunctionCallingMode[\"NONE\"] = \"NONE\";\n})(FunctionCallingMode || (FunctionCallingMode = {}));\n/**\n * The mode of the predictor to be used in dynamic retrieval.\n * @public\n */\nvar DynamicRetrievalMode;\n(function (DynamicRetrievalMode) {\n    // Unspecified function calling mode. This value should not be used.\n    DynamicRetrievalMode[\"MODE_UNSPECIFIED\"] = \"MODE_UNSPECIFIED\";\n    // Run retrieval only when system decides it is necessary.\n    DynamicRetrievalMode[\"MODE_DYNAMIC\"] = \"MODE_DYNAMIC\";\n})(DynamicRetrievalMode || (DynamicRetrievalMode = {}));\n\n/**\n * @license\n * Copyright 2024 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Basic error type for this SDK.\n * @public\n */\nclass GoogleGenerativeAIError extends Error {\n    constructor(message) {\n        super(`[GoogleGenerativeAI Error]: ${message}`);\n    }\n}\n/**\n * Errors in the contents of a response from the model. This includes parsing\n * errors, or responses including a safety block reason.\n * @public\n */\nclass GoogleGenerativeAIResponseError extends GoogleGenerativeAIError {\n    constructor(message, response) {\n        super(message);\n        this.response = response;\n    }\n}\n/**\n * Error class covering HTTP errors when calling the server. Includes HTTP\n * status, statusText, and optional details, if provided in the server response.\n * @public\n */\nclass GoogleGenerativeAIFetchError extends GoogleGenerativeAIError {\n    constructor(message, status, statusText, errorDetails) {\n        super(message);\n        this.status = status;\n        this.statusText = statusText;\n        this.errorDetails = errorDetails;\n    }\n}\n/**\n * Errors in the contents of a request originating from user input.\n * @public\n */\nclass GoogleGenerativeAIRequestInputError extends GoogleGenerativeAIError {\n}\n/**\n * Error thrown when a request is aborted, either due to a timeout or\n * intentional cancellation by the user.\n * @public\n */\nclass GoogleGenerativeAIAbortError extends GoogleGenerativeAIError {\n}\n\n/**\n * @license\n * Copyright 2024 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nconst DEFAULT_BASE_URL = \"https://generativelanguage.googleapis.com\";\nconst DEFAULT_API_VERSION = \"v1beta\";\n/**\n * We can't `require` package.json if this runs on web. We will use rollup to\n * swap in the version number here at build time.\n */\nconst PACKAGE_VERSION = \"0.24.1\";\nconst PACKAGE_LOG_HEADER = \"genai-js\";\nvar Task;\n(function (Task) {\n    Task[\"GENERATE_CONTENT\"] = \"generateContent\";\n    Task[\"STREAM_GENERATE_CONTENT\"] = \"streamGenerateContent\";\n    Task[\"COUNT_TOKENS\"] = \"countTokens\";\n    Task[\"EMBED_CONTENT\"] = \"embedContent\";\n    Task[\"BATCH_EMBED_CONTENTS\"] = \"batchEmbedContents\";\n})(Task || (Task = {}));\nclass RequestUrl {\n    constructor(model, task, apiKey, stream, requestOptions) {\n        this.model = model;\n        this.task = task;\n        this.apiKey = apiKey;\n        this.stream = stream;\n        this.requestOptions = requestOptions;\n    }\n    toString() {\n        var _a, _b;\n        const apiVersion = ((_a = this.requestOptions) === null || _a === void 0 ? void 0 : _a.apiVersion) || DEFAULT_API_VERSION;\n        const baseUrl = ((_b = this.requestOptions) === null || _b === void 0 ? void 0 : _b.baseUrl) || DEFAULT_BASE_URL;\n        let url = `${baseUrl}/${apiVersion}/${this.model}:${this.task}`;\n        if (this.stream) {\n            url += \"?alt=sse\";\n        }\n        return url;\n    }\n}\n/**\n * Simple, but may become more complex if we add more versions to log.\n */\nfunction getClientHeaders(requestOptions) {\n    const clientHeaders = [];\n    if (requestOptions === null || requestOptions === void 0 ? void 0 : requestOptions.apiClient) {\n        clientHeaders.push(requestOptions.apiClient);\n    }\n    clientHeaders.push(`${PACKAGE_LOG_HEADER}/${PACKAGE_VERSION}`);\n    return clientHeaders.join(\" \");\n}\nasync function getHeaders(url) {\n    var _a;\n    const headers = new Headers();\n    headers.append(\"Content-Type\", \"application/json\");\n    headers.append(\"x-goog-api-client\", getClientHeaders(url.requestOptions));\n    headers.append(\"x-goog-api-key\", url.apiKey);\n    let customHeaders = (_a = url.requestOptions) === null || _a === void 0 ? void 0 : _a.customHeaders;\n    if (customHeaders) {\n        if (!(customHeaders instanceof Headers)) {\n            try {\n                customHeaders = new Headers(customHeaders);\n            }\n            catch (e) {\n                throw new GoogleGenerativeAIRequestInputError(`unable to convert customHeaders value ${JSON.stringify(customHeaders)} to Headers: ${e.message}`);\n            }\n        }\n        for (const [headerName, headerValue] of customHeaders.entries()) {\n            if (headerName === \"x-goog-api-key\") {\n                throw new GoogleGenerativeAIRequestInputError(`Cannot set reserved header name ${headerName}`);\n            }\n            else if (headerName === \"x-goog-api-client\") {\n                throw new GoogleGenerativeAIRequestInputError(`Header name ${headerName} can only be set using the apiClient field`);\n            }\n            headers.append(headerName, headerValue);\n        }\n    }\n    return headers;\n}\nasync function constructModelRequest(model, task, apiKey, stream, body, requestOptions) {\n    const url = new RequestUrl(model, task, apiKey, stream, requestOptions);\n    return {\n        url: url.toString(),\n        fetchOptions: Object.assign(Object.assign({}, buildFetchOptions(requestOptions)), { method: \"POST\", headers: await getHeaders(url), body }),\n    };\n}\nasync function makeModelRequest(model, task, apiKey, stream, body, requestOptions = {}, \n// Allows this to be stubbed for tests\nfetchFn = fetch) {\n    const { url, fetchOptions } = await constructModelRequest(model, task, apiKey, stream, body, requestOptions);\n    return makeRequest(url, fetchOptions, fetchFn);\n}\nasync function makeRequest(url, fetchOptions, fetchFn = fetch) {\n    let response;\n    try {\n        response = await fetchFn(url, fetchOptions);\n    }\n    catch (e) {\n        handleResponseError(e, url);\n    }\n    if (!response.ok) {\n        await handleResponseNotOk(response, url);\n    }\n    return response;\n}\nfunction handleResponseError(e, url) {\n    let err = e;\n    if (err.name === \"AbortError\") {\n        err = new GoogleGenerativeAIAbortError(`Request aborted when fetching ${url.toString()}: ${e.message}`);\n        err.stack = e.stack;\n    }\n    else if (!(e instanceof GoogleGenerativeAIFetchError ||\n        e instanceof GoogleGenerativeAIRequestInputError)) {\n        err = new GoogleGenerativeAIError(`Error fetching from ${url.toString()}: ${e.message}`);\n        err.stack = e.stack;\n    }\n    throw err;\n}\nasync function handleResponseNotOk(response, url) {\n    let message = \"\";\n    let errorDetails;\n    try {\n        const json = await response.json();\n        message = json.error.message;\n        if (json.error.details) {\n            message += ` ${JSON.stringify(json.error.details)}`;\n            errorDetails = json.error.details;\n        }\n    }\n    catch (e) {\n        // ignored\n    }\n    throw new GoogleGenerativeAIFetchError(`Error fetching from ${url.toString()}: [${response.status} ${response.statusText}] ${message}`, response.status, response.statusText, errorDetails);\n}\n/**\n * Generates the request options to be passed to the fetch API.\n * @param requestOptions - The user-defined request options.\n * @returns The generated request options.\n */\nfunction buildFetchOptions(requestOptions) {\n    const fetchOptions = {};\n    if ((requestOptions === null || requestOptions === void 0 ? void 0 : requestOptions.signal) !== undefined || (requestOptions === null || requestOptions === void 0 ? void 0 : requestOptions.timeout) >= 0) {\n        const controller = new AbortController();\n        if ((requestOptions === null || requestOptions === void 0 ? void 0 : requestOptions.timeout) >= 0) {\n            setTimeout(() => controller.abort(), requestOptions.timeout);\n        }\n        if (requestOptions === null || requestOptions === void 0 ? void 0 : requestOptions.signal) {\n            requestOptions.signal.addEventListener(\"abort\", () => {\n                controller.abort();\n            });\n        }\n        fetchOptions.signal = controller.signal;\n    }\n    return fetchOptions;\n}\n\n/**\n * @license\n * Copyright 2024 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Adds convenience helper methods to a response object, including stream\n * chunks (as long as each chunk is a complete GenerateContentResponse JSON).\n */\nfunction addHelpers(response) {\n    response.text = () => {\n        if (response.candidates && response.candidates.length > 0) {\n            if (response.candidates.length > 1) {\n                console.warn(`This response had ${response.candidates.length} ` +\n                    `candidates. Returning text from the first candidate only. ` +\n                    `Access response.candidates directly to use the other candidates.`);\n            }\n            if (hadBadFinishReason(response.candidates[0])) {\n                throw new GoogleGenerativeAIResponseError(`${formatBlockErrorMessage(response)}`, response);\n            }\n            return getText(response);\n        }\n        else if (response.promptFeedback) {\n            throw new GoogleGenerativeAIResponseError(`Text not available. ${formatBlockErrorMessage(response)}`, response);\n        }\n        return \"\";\n    };\n    /**\n     * TODO: remove at next major version\n     */\n    response.functionCall = () => {\n        if (response.candidates && response.candidates.length > 0) {\n            if (response.candidates.length > 1) {\n                console.warn(`This response had ${response.candidates.length} ` +\n                    `candidates. Returning function calls from the first candidate only. ` +\n                    `Access response.candidates directly to use the other candidates.`);\n            }\n            if (hadBadFinishReason(response.candidates[0])) {\n                throw new GoogleGenerativeAIResponseError(`${formatBlockErrorMessage(response)}`, response);\n            }\n            console.warn(`response.functionCall() is deprecated. ` +\n                `Use response.functionCalls() instead.`);\n            return getFunctionCalls(response)[0];\n        }\n        else if (response.promptFeedback) {\n            throw new GoogleGenerativeAIResponseError(`Function call not available. ${formatBlockErrorMessage(response)}`, response);\n        }\n        return undefined;\n    };\n    response.functionCalls = () => {\n        if (response.candidates && response.candidates.length > 0) {\n            if (response.candidates.length > 1) {\n                console.warn(`This response had ${response.candidates.length} ` +\n                    `candidates. Returning function calls from the first candidate only. ` +\n                    `Access response.candidates directly to use the other candidates.`);\n            }\n            if (hadBadFinishReason(response.candidates[0])) {\n                throw new GoogleGenerativeAIResponseError(`${formatBlockErrorMessage(response)}`, response);\n            }\n            return getFunctionCalls(response);\n        }\n        else if (response.promptFeedback) {\n            throw new GoogleGenerativeAIResponseError(`Function call not available. ${formatBlockErrorMessage(response)}`, response);\n        }\n        return undefined;\n    };\n    return response;\n}\n/**\n * Returns all text found in all parts of first candidate.\n */\nfunction getText(response) {\n    var _a, _b, _c, _d;\n    const textStrings = [];\n    if ((_b = (_a = response.candidates) === null || _a === void 0 ? void 0 : _a[0].content) === null || _b === void 0 ? void 0 : _b.parts) {\n        for (const part of (_d = (_c = response.candidates) === null || _c === void 0 ? void 0 : _c[0].content) === null || _d === void 0 ? void 0 : _d.parts) {\n            if (part.text) {\n                textStrings.push(part.text);\n            }\n            if (part.executableCode) {\n                textStrings.push(\"\\n```\" +\n                    part.executableCode.language +\n                    \"\\n\" +\n                    part.executableCode.code +\n                    \"\\n```\\n\");\n            }\n            if (part.codeExecutionResult) {\n                textStrings.push(\"\\n```\\n\" + part.codeExecutionResult.output + \"\\n```\\n\");\n            }\n        }\n    }\n    if (textStrings.length > 0) {\n        return textStrings.join(\"\");\n    }\n    else {\n        return \"\";\n    }\n}\n/**\n * Returns functionCall of first candidate.\n */\nfunction getFunctionCalls(response) {\n    var _a, _b, _c, _d;\n    const functionCalls = [];\n    if ((_b = (_a = response.candidates) === null || _a === void 0 ? void 0 : _a[0].content) === null || _b === void 0 ? void 0 : _b.parts) {\n        for (const part of (_d = (_c = response.candidates) === null || _c === void 0 ? void 0 : _c[0].content) === null || _d === void 0 ? void 0 : _d.parts) {\n            if (part.functionCall) {\n                functionCalls.push(part.functionCall);\n            }\n        }\n    }\n    if (functionCalls.length > 0) {\n        return functionCalls;\n    }\n    else {\n        return undefined;\n    }\n}\nconst badFinishReasons = [\n    FinishReason.RECITATION,\n    FinishReason.SAFETY,\n    FinishReason.LANGUAGE,\n];\nfunction hadBadFinishReason(candidate) {\n    return (!!candidate.finishReason &&\n        badFinishReasons.includes(candidate.finishReason));\n}\nfunction formatBlockErrorMessage(response) {\n    var _a, _b, _c;\n    let message = \"\";\n    if ((!response.candidates || response.candidates.length === 0) &&\n        response.promptFeedback) {\n        message += \"Response was blocked\";\n        if ((_a = response.promptFeedback) === null || _a === void 0 ? void 0 : _a.blockReason) {\n            message += ` due to ${response.promptFeedback.blockReason}`;\n        }\n        if ((_b = response.promptFeedback) === null || _b === void 0 ? void 0 : _b.blockReasonMessage) {\n            message += `: ${response.promptFeedback.blockReasonMessage}`;\n        }\n    }\n    else if ((_c = response.candidates) === null || _c === void 0 ? void 0 : _c[0]) {\n        const firstCandidate = response.candidates[0];\n        if (hadBadFinishReason(firstCandidate)) {\n            message += `Candidate was blocked due to ${firstCandidate.finishReason}`;\n            if (firstCandidate.finishMessage) {\n                message += `: ${firstCandidate.finishMessage}`;\n            }\n        }\n    }\n    return message;\n}\n\n/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise, SuppressedError, Symbol */\r\n\r\n\r\nfunction __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nfunction __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\ntypeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\r\n    var e = new Error(message);\r\n    return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\r\n};\n\n/**\n * @license\n * Copyright 2024 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nconst responseLineRE = /^data\\: (.*)(?:\\n\\n|\\r\\r|\\r\\n\\r\\n)/;\n/**\n * Process a response.body stream from the backend and return an\n * iterator that provides one complete GenerateContentResponse at a time\n * and a promise that resolves with a single aggregated\n * GenerateContentResponse.\n *\n * @param response - Response from a fetch call\n */\nfunction processStream(response) {\n    const inputStream = response.body.pipeThrough(new TextDecoderStream(\"utf8\", { fatal: true }));\n    const responseStream = getResponseStream(inputStream);\n    const [stream1, stream2] = responseStream.tee();\n    return {\n        stream: generateResponseSequence(stream1),\n        response: getResponsePromise(stream2),\n    };\n}\nasync function getResponsePromise(stream) {\n    const allResponses = [];\n    const reader = stream.getReader();\n    while (true) {\n        const { done, value } = await reader.read();\n        if (done) {\n            return addHelpers(aggregateResponses(allResponses));\n        }\n        allResponses.push(value);\n    }\n}\nfunction generateResponseSequence(stream) {\n    return __asyncGenerator(this, arguments, function* generateResponseSequence_1() {\n        const reader = stream.getReader();\n        while (true) {\n            const { value, done } = yield __await(reader.read());\n            if (done) {\n                break;\n            }\n            yield yield __await(addHelpers(value));\n        }\n    });\n}\n/**\n * Reads a raw stream from the fetch response and join incomplete\n * chunks, returning a new stream that provides a single complete\n * GenerateContentResponse in each iteration.\n */\nfunction getResponseStream(inputStream) {\n    const reader = inputStream.getReader();\n    const stream = new ReadableStream({\n        start(controller) {\n            let currentText = \"\";\n            return pump();\n            function pump() {\n                return reader\n                    .read()\n                    .then(({ value, done }) => {\n                    if (done) {\n                        if (currentText.trim()) {\n                            controller.error(new GoogleGenerativeAIError(\"Failed to parse stream\"));\n                            return;\n                        }\n                        controller.close();\n                        return;\n                    }\n                    currentText += value;\n                    let match = currentText.match(responseLineRE);\n                    let parsedResponse;\n                    while (match) {\n                        try {\n                            parsedResponse = JSON.parse(match[1]);\n                        }\n                        catch (e) {\n                            controller.error(new GoogleGenerativeAIError(`Error parsing JSON response: \"${match[1]}\"`));\n                            return;\n                        }\n                        controller.enqueue(parsedResponse);\n                        currentText = currentText.substring(match[0].length);\n                        match = currentText.match(responseLineRE);\n                    }\n                    return pump();\n                })\n                    .catch((e) => {\n                    let err = e;\n                    err.stack = e.stack;\n                    if (err.name === \"AbortError\") {\n                        err = new GoogleGenerativeAIAbortError(\"Request aborted when reading from the stream\");\n                    }\n                    else {\n                        err = new GoogleGenerativeAIError(\"Error reading from the stream\");\n                    }\n                    throw err;\n                });\n            }\n        },\n    });\n    return stream;\n}\n/**\n * Aggregates an array of `GenerateContentResponse`s into a single\n * GenerateContentResponse.\n */\nfunction aggregateResponses(responses) {\n    const lastResponse = responses[responses.length - 1];\n    const aggregatedResponse = {\n        promptFeedback: lastResponse === null || lastResponse === void 0 ? void 0 : lastResponse.promptFeedback,\n    };\n    for (const response of responses) {\n        if (response.candidates) {\n            let candidateIndex = 0;\n            for (const candidate of response.candidates) {\n                if (!aggregatedResponse.candidates) {\n                    aggregatedResponse.candidates = [];\n                }\n                if (!aggregatedResponse.candidates[candidateIndex]) {\n                    aggregatedResponse.candidates[candidateIndex] = {\n                        index: candidateIndex,\n                    };\n                }\n                // Keep overwriting, the last one will be final\n                aggregatedResponse.candidates[candidateIndex].citationMetadata =\n                    candidate.citationMetadata;\n                aggregatedResponse.candidates[candidateIndex].groundingMetadata =\n                    candidate.groundingMetadata;\n                aggregatedResponse.candidates[candidateIndex].finishReason =\n                    candidate.finishReason;\n                aggregatedResponse.candidates[candidateIndex].finishMessage =\n                    candidate.finishMessage;\n                aggregatedResponse.candidates[candidateIndex].safetyRatings =\n                    candidate.safetyRatings;\n                /**\n                 * Candidates should always have content and parts, but this handles\n                 * possible malformed responses.\n                 */\n                if (candidate.content && candidate.content.parts) {\n                    if (!aggregatedResponse.candidates[candidateIndex].content) {\n                        aggregatedResponse.candidates[candidateIndex].content = {\n                            role: candidate.content.role || \"user\",\n                            parts: [],\n                        };\n                    }\n                    const newPart = {};\n                    for (const part of candidate.content.parts) {\n                        if (part.text) {\n                            newPart.text = part.text;\n                        }\n                        if (part.functionCall) {\n                            newPart.functionCall = part.functionCall;\n                        }\n                        if (part.executableCode) {\n                            newPart.executableCode = part.executableCode;\n                        }\n                        if (part.codeExecutionResult) {\n                            newPart.codeExecutionResult = part.codeExecutionResult;\n                        }\n                        if (Object.keys(newPart).length === 0) {\n                            newPart.text = \"\";\n                        }\n                        aggregatedResponse.candidates[candidateIndex].content.parts.push(newPart);\n                    }\n                }\n            }\n            candidateIndex++;\n        }\n        if (response.usageMetadata) {\n            aggregatedResponse.usageMetadata = response.usageMetadata;\n        }\n    }\n    return aggregatedResponse;\n}\n\n/**\n * @license\n * Copyright 2024 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nasync function generateContentStream(apiKey, model, params, requestOptions) {\n    const response = await makeModelRequest(model, Task.STREAM_GENERATE_CONTENT, apiKey, \n    /* stream */ true, JSON.stringify(params), requestOptions);\n    return processStream(response);\n}\nasync function generateContent(apiKey, model, params, requestOptions) {\n    const response = await makeModelRequest(model, Task.GENERATE_CONTENT, apiKey, \n    /* stream */ false, JSON.stringify(params), requestOptions);\n    const responseJson = await response.json();\n    const enhancedResponse = addHelpers(responseJson);\n    return {\n        response: enhancedResponse,\n    };\n}\n\n/**\n * @license\n * Copyright 2024 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nfunction formatSystemInstruction(input) {\n    // null or undefined\n    if (input == null) {\n        return undefined;\n    }\n    else if (typeof input === \"string\") {\n        return { role: \"system\", parts: [{ text: input }] };\n    }\n    else if (input.text) {\n        return { role: \"system\", parts: [input] };\n    }\n    else if (input.parts) {\n        if (!input.role) {\n            return { role: \"system\", parts: input.parts };\n        }\n        else {\n            return input;\n        }\n    }\n}\nfunction formatNewContent(request) {\n    let newParts = [];\n    if (typeof request === \"string\") {\n        newParts = [{ text: request }];\n    }\n    else {\n        for (const partOrString of request) {\n            if (typeof partOrString === \"string\") {\n                newParts.push({ text: partOrString });\n            }\n            else {\n                newParts.push(partOrString);\n            }\n        }\n    }\n    return assignRoleToPartsAndValidateSendMessageRequest(newParts);\n}\n/**\n * When multiple Part types (i.e. FunctionResponsePart and TextPart) are\n * passed in a single Part array, we may need to assign different roles to each\n * part. Currently only FunctionResponsePart requires a role other than 'user'.\n * @private\n * @param parts Array of parts to pass to the model\n * @returns Array of content items\n */\nfunction assignRoleToPartsAndValidateSendMessageRequest(parts) {\n    const userContent = { role: \"user\", parts: [] };\n    const functionContent = { role: \"function\", parts: [] };\n    let hasUserContent = false;\n    let hasFunctionContent = false;\n    for (const part of parts) {\n        if (\"functionResponse\" in part) {\n            functionContent.parts.push(part);\n            hasFunctionContent = true;\n        }\n        else {\n            userContent.parts.push(part);\n            hasUserContent = true;\n        }\n    }\n    if (hasUserContent && hasFunctionContent) {\n        throw new GoogleGenerativeAIError(\"Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.\");\n    }\n    if (!hasUserContent && !hasFunctionContent) {\n        throw new GoogleGenerativeAIError(\"No content is provided for sending chat message.\");\n    }\n    if (hasUserContent) {\n        return userContent;\n    }\n    return functionContent;\n}\nfunction formatCountTokensInput(params, modelParams) {\n    var _a;\n    let formattedGenerateContentRequest = {\n        model: modelParams === null || modelParams === void 0 ? void 0 : modelParams.model,\n        generationConfig: modelParams === null || modelParams === void 0 ? void 0 : modelParams.generationConfig,\n        safetySettings: modelParams === null || modelParams === void 0 ? void 0 : modelParams.safetySettings,\n        tools: modelParams === null || modelParams === void 0 ? void 0 : modelParams.tools,\n        toolConfig: modelParams === null || modelParams === void 0 ? void 0 : modelParams.toolConfig,\n        systemInstruction: modelParams === null || modelParams === void 0 ? void 0 : modelParams.systemInstruction,\n        cachedContent: (_a = modelParams === null || modelParams === void 0 ? void 0 : modelParams.cachedContent) === null || _a === void 0 ? void 0 : _a.name,\n        contents: [],\n    };\n    const containsGenerateContentRequest = params.generateContentRequest != null;\n    if (params.contents) {\n        if (containsGenerateContentRequest) {\n            throw new GoogleGenerativeAIRequestInputError(\"CountTokensRequest must have one of contents or generateContentRequest, not both.\");\n        }\n        formattedGenerateContentRequest.contents = params.contents;\n    }\n    else if (containsGenerateContentRequest) {\n        formattedGenerateContentRequest = Object.assign(Object.assign({}, formattedGenerateContentRequest), params.generateContentRequest);\n    }\n    else {\n        // Array or string\n        const content = formatNewContent(params);\n        formattedGenerateContentRequest.contents = [content];\n    }\n    return { generateContentRequest: formattedGenerateContentRequest };\n}\nfunction formatGenerateContentInput(params) {\n    let formattedRequest;\n    if (params.contents) {\n        formattedRequest = params;\n    }\n    else {\n        // Array or string\n        const content = formatNewContent(params);\n        formattedRequest = { contents: [content] };\n    }\n    if (params.systemInstruction) {\n        formattedRequest.systemInstruction = formatSystemInstruction(params.systemInstruction);\n    }\n    return formattedRequest;\n}\nfunction formatEmbedContentInput(params) {\n    if (typeof params === \"string\" || Array.isArray(params)) {\n        const content = formatNewContent(params);\n        return { content };\n    }\n    return params;\n}\n\n/**\n * @license\n * Copyright 2024 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n// https://ai.google.dev/api/rest/v1beta/Content#part\nconst VALID_PART_FIELDS = [\n    \"text\",\n    \"inlineData\",\n    \"functionCall\",\n    \"functionResponse\",\n    \"executableCode\",\n    \"codeExecutionResult\",\n];\nconst VALID_PARTS_PER_ROLE = {\n    user: [\"text\", \"inlineData\"],\n    function: [\"functionResponse\"],\n    model: [\"text\", \"functionCall\", \"executableCode\", \"codeExecutionResult\"],\n    // System instructions shouldn't be in history anyway.\n    system: [\"text\"],\n};\nfunction validateChatHistory(history) {\n    let prevContent = false;\n    for (const currContent of history) {\n        const { role, parts } = currContent;\n        if (!prevContent && role !== \"user\") {\n            throw new GoogleGenerativeAIError(`First content should be with role 'user', got ${role}`);\n        }\n        if (!POSSIBLE_ROLES.includes(role)) {\n            throw new GoogleGenerativeAIError(`Each item should include role field. Got ${role} but valid roles are: ${JSON.stringify(POSSIBLE_ROLES)}`);\n        }\n        if (!Array.isArray(parts)) {\n            throw new GoogleGenerativeAIError(\"Content should have 'parts' property with an array of Parts\");\n        }\n        if (parts.length === 0) {\n            throw new GoogleGenerativeAIError(\"Each Content should have at least one part\");\n        }\n        const countFields = {\n            text: 0,\n            inlineData: 0,\n            functionCall: 0,\n            functionResponse: 0,\n            fileData: 0,\n            executableCode: 0,\n            codeExecutionResult: 0,\n        };\n        for (const part of parts) {\n            for (const key of VALID_PART_FIELDS) {\n                if (key in part) {\n                    countFields[key] += 1;\n                }\n            }\n        }\n        const validParts = VALID_PARTS_PER_ROLE[role];\n        for (const key of VALID_PART_FIELDS) {\n            if (!validParts.includes(key) && countFields[key] > 0) {\n                throw new GoogleGenerativeAIError(`Content with role '${role}' can't contain '${key}' part`);\n            }\n        }\n        prevContent = true;\n    }\n}\n/**\n * Returns true if the response is valid (could be appended to the history), flase otherwise.\n */\nfunction isValidResponse(response) {\n    var _a;\n    if (response.candidates === undefined || response.candidates.length === 0) {\n        return false;\n    }\n    const content = (_a = response.candidates[0]) === null || _a === void 0 ? void 0 : _a.content;\n    if (content === undefined) {\n        return false;\n    }\n    if (content.parts === undefined || content.parts.length === 0) {\n        return false;\n    }\n    for (const part of content.parts) {\n        if (part === undefined || Object.keys(part).length === 0) {\n            return false;\n        }\n        if (part.text !== undefined && part.text === \"\") {\n            return false;\n        }\n    }\n    return true;\n}\n\n/**\n * @license\n * Copyright 2024 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Do not log a message for this error.\n */\nconst SILENT_ERROR = \"SILENT_ERROR\";\n/**\n * ChatSession class that enables sending chat messages and stores\n * history of sent and received messages so far.\n *\n * @public\n */\nclass ChatSession {\n    constructor(apiKey, model, params, _requestOptions = {}) {\n        this.model = model;\n        this.params = params;\n        this._requestOptions = _requestOptions;\n        this._history = [];\n        this._sendPromise = Promise.resolve();\n        this._apiKey = apiKey;\n        if (params === null || params === void 0 ? void 0 : params.history) {\n            validateChatHistory(params.history);\n            this._history = params.history;\n        }\n    }\n    /**\n     * Gets the chat history so far. Blocked prompts are not added to history.\n     * Blocked candidates are not added to history, nor are the prompts that\n     * generated them.\n     */\n    async getHistory() {\n        await this._sendPromise;\n        return this._history;\n    }\n    /**\n     * Sends a chat message and receives a non-streaming\n     * {@link GenerateContentResult}.\n     *\n     * Fields set in the optional {@link SingleRequestOptions} parameter will\n     * take precedence over the {@link RequestOptions} values provided to\n     * {@link GoogleGenerativeAI.getGenerativeModel }.\n     */\n    async sendMessage(request, requestOptions = {}) {\n        var _a, _b, _c, _d, _e, _f;\n        await this._sendPromise;\n        const newContent = formatNewContent(request);\n        const generateContentRequest = {\n            safetySettings: (_a = this.params) === null || _a === void 0 ? void 0 : _a.safetySettings,\n            generationConfig: (_b = this.params) === null || _b === void 0 ? void 0 : _b.generationConfig,\n            tools: (_c = this.params) === null || _c === void 0 ? void 0 : _c.tools,\n            toolConfig: (_d = this.params) === null || _d === void 0 ? void 0 : _d.toolConfig,\n            systemInstruction: (_e = this.params) === null || _e === void 0 ? void 0 : _e.systemInstruction,\n            cachedContent: (_f = this.params) === null || _f === void 0 ? void 0 : _f.cachedContent,\n            contents: [...this._history, newContent],\n        };\n        const chatSessionRequestOptions = Object.assign(Object.assign({}, this._requestOptions), requestOptions);\n        let finalResult;\n        // Add onto the chain.\n        this._sendPromise = this._sendPromise\n            .then(() => generateContent(this._apiKey, this.model, generateContentRequest, chatSessionRequestOptions))\n            .then((result) => {\n            var _a;\n            if (isValidResponse(result.response)) {\n                this._history.push(newContent);\n                const responseContent = Object.assign({ parts: [], \n                    // Response seems to come back without a role set.\n                    role: \"model\" }, (_a = result.response.candidates) === null || _a === void 0 ? void 0 : _a[0].content);\n                this._history.push(responseContent);\n            }\n            else {\n                const blockErrorMessage = formatBlockErrorMessage(result.response);\n                if (blockErrorMessage) {\n                    console.warn(`sendMessage() was unsuccessful. ${blockErrorMessage}. Inspect response object for details.`);\n                }\n            }\n            finalResult = result;\n        })\n            .catch((e) => {\n            // Resets _sendPromise to avoid subsequent calls failing and throw error.\n            this._sendPromise = Promise.resolve();\n            throw e;\n        });\n        await this._sendPromise;\n        return finalResult;\n    }\n    /**\n     * Sends a chat message and receives the response as a\n     * {@link GenerateContentStreamResult} containing an iterable stream\n     * and a response promise.\n     *\n     * Fields set in the optional {@link SingleRequestOptions} parameter will\n     * take precedence over the {@link RequestOptions} values provided to\n     * {@link GoogleGenerativeAI.getGenerativeModel }.\n     */\n    async sendMessageStream(request, requestOptions = {}) {\n        var _a, _b, _c, _d, _e, _f;\n        await this._sendPromise;\n        const newContent = formatNewContent(request);\n        const generateContentRequest = {\n            safetySettings: (_a = this.params) === null || _a === void 0 ? void 0 : _a.safetySettings,\n            generationConfig: (_b = this.params) === null || _b === void 0 ? void 0 : _b.generationConfig,\n            tools: (_c = this.params) === null || _c === void 0 ? void 0 : _c.tools,\n            toolConfig: (_d = this.params) === null || _d === void 0 ? void 0 : _d.toolConfig,\n            systemInstruction: (_e = this.params) === null || _e === void 0 ? void 0 : _e.systemInstruction,\n            cachedContent: (_f = this.params) === null || _f === void 0 ? void 0 : _f.cachedContent,\n            contents: [...this._history, newContent],\n        };\n        const chatSessionRequestOptions = Object.assign(Object.assign({}, this._requestOptions), requestOptions);\n        const streamPromise = generateContentStream(this._apiKey, this.model, generateContentRequest, chatSessionRequestOptions);\n        // Add onto the chain.\n        this._sendPromise = this._sendPromise\n            .then(() => streamPromise)\n            // This must be handled to avoid unhandled rejection, but jump\n            // to the final catch block with a label to not log this error.\n            .catch((_ignored) => {\n            throw new Error(SILENT_ERROR);\n        })\n            .then((streamResult) => streamResult.response)\n            .then((response) => {\n            if (isValidResponse(response)) {\n                this._history.push(newContent);\n                const responseContent = Object.assign({}, response.candidates[0].content);\n                // Response seems to come back without a role set.\n                if (!responseContent.role) {\n                    responseContent.role = \"model\";\n                }\n                this._history.push(responseContent);\n            }\n            else {\n                const blockErrorMessage = formatBlockErrorMessage(response);\n                if (blockErrorMessage) {\n                    console.warn(`sendMessageStream() was unsuccessful. ${blockErrorMessage}. Inspect response object for details.`);\n                }\n            }\n        })\n            .catch((e) => {\n            // Errors in streamPromise are already catchable by the user as\n            // streamPromise is returned.\n            // Avoid duplicating the error message in logs.\n            if (e.message !== SILENT_ERROR) {\n                // Users do not have access to _sendPromise to catch errors\n                // downstream from streamPromise, so they should not throw.\n                console.error(e);\n            }\n        });\n        return streamPromise;\n    }\n}\n\n/**\n * @license\n * Copyright 2024 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nasync function countTokens(apiKey, model, params, singleRequestOptions) {\n    const response = await makeModelRequest(model, Task.COUNT_TOKENS, apiKey, false, JSON.stringify(params), singleRequestOptions);\n    return response.json();\n}\n\n/**\n * @license\n * Copyright 2024 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nasync function embedContent(apiKey, model, params, requestOptions) {\n    const response = await makeModelRequest(model, Task.EMBED_CONTENT, apiKey, false, JSON.stringify(params), requestOptions);\n    return response.json();\n}\nasync function batchEmbedContents(apiKey, model, params, requestOptions) {\n    const requestsWithModel = params.requests.map((request) => {\n        return Object.assign(Object.assign({}, request), { model });\n    });\n    const response = await makeModelRequest(model, Task.BATCH_EMBED_CONTENTS, apiKey, false, JSON.stringify({ requests: requestsWithModel }), requestOptions);\n    return response.json();\n}\n\n/**\n * @license\n * Copyright 2024 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Class for generative model APIs.\n * @public\n */\nclass GenerativeModel {\n    constructor(apiKey, modelParams, _requestOptions = {}) {\n        this.apiKey = apiKey;\n        this._requestOptions = _requestOptions;\n        if (modelParams.model.includes(\"/\")) {\n            // Models may be named \"models/model-name\" or \"tunedModels/model-name\"\n            this.model = modelParams.model;\n        }\n        else {\n            // If path is not included, assume it's a non-tuned model.\n            this.model = `models/${modelParams.model}`;\n        }\n        this.generationConfig = modelParams.generationConfig || {};\n        this.safetySettings = modelParams.safetySettings || [];\n        this.tools = modelParams.tools;\n        this.toolConfig = modelParams.toolConfig;\n        this.systemInstruction = formatSystemInstruction(modelParams.systemInstruction);\n        this.cachedContent = modelParams.cachedContent;\n    }\n    /**\n     * Makes a single non-streaming call to the model\n     * and returns an object containing a single {@link GenerateContentResponse}.\n     *\n     * Fields set in the optional {@link SingleRequestOptions} parameter will\n     * take precedence over the {@link RequestOptions} values provided to\n     * {@link GoogleGenerativeAI.getGenerativeModel }.\n     */\n    async generateContent(request, requestOptions = {}) {\n        var _a;\n        const formattedParams = formatGenerateContentInput(request);\n        const generativeModelRequestOptions = Object.assign(Object.assign({}, this._requestOptions), requestOptions);\n        return generateContent(this.apiKey, this.model, Object.assign({ generationConfig: this.generationConfig, safetySettings: this.safetySettings, tools: this.tools, toolConfig: this.toolConfig, systemInstruction: this.systemInstruction, cachedContent: (_a = this.cachedContent) === null || _a === void 0 ? void 0 : _a.name }, formattedParams), generativeModelRequestOptions);\n    }\n    /**\n     * Makes a single streaming call to the model and returns an object\n     * containing an iterable stream that iterates over all chunks in the\n     * streaming response as well as a promise that returns the final\n     * aggregated response.\n     *\n     * Fields set in the optional {@link SingleRequestOptions} parameter will\n     * take precedence over the {@link RequestOptions} values provided to\n     * {@link GoogleGenerativeAI.getGenerativeModel }.\n     */\n    async generateContentStream(request, requestOptions = {}) {\n        var _a;\n        const formattedParams = formatGenerateContentInput(request);\n        const generativeModelRequestOptions = Object.assign(Object.assign({}, this._requestOptions), requestOptions);\n        return generateContentStream(this.apiKey, this.model, Object.assign({ generationConfig: this.generationConfig, safetySettings: this.safetySettings, tools: this.tools, toolConfig: this.toolConfig, systemInstruction: this.systemInstruction, cachedContent: (_a = this.cachedContent) === null || _a === void 0 ? void 0 : _a.name }, formattedParams), generativeModelRequestOptions);\n    }\n    /**\n     * Gets a new {@link ChatSession} instance which can be used for\n     * multi-turn chats.\n     */\n    startChat(startChatParams) {\n        var _a;\n        return new ChatSession(this.apiKey, this.model, Object.assign({ generationConfig: this.generationConfig, safetySettings: this.safetySettings, tools: this.tools, toolConfig: this.toolConfig, systemInstruction: this.systemInstruction, cachedContent: (_a = this.cachedContent) === null || _a === void 0 ? void 0 : _a.name }, startChatParams), this._requestOptions);\n    }\n    /**\n     * Counts the tokens in the provided request.\n     *\n     * Fields set in the optional {@link SingleRequestOptions} parameter will\n     * take precedence over the {@link RequestOptions} values provided to\n     * {@link GoogleGenerativeAI.getGenerativeModel }.\n     */\n    async countTokens(request, requestOptions = {}) {\n        const formattedParams = formatCountTokensInput(request, {\n            model: this.model,\n            generationConfig: this.generationConfig,\n            safetySettings: this.safetySettings,\n            tools: this.tools,\n            toolConfig: this.toolConfig,\n            systemInstruction: this.systemInstruction,\n            cachedContent: this.cachedContent,\n        });\n        const generativeModelRequestOptions = Object.assign(Object.assign({}, this._requestOptions), requestOptions);\n        return countTokens(this.apiKey, this.model, formattedParams, generativeModelRequestOptions);\n    }\n    /**\n     * Embeds the provided content.\n     *\n     * Fields set in the optional {@link SingleRequestOptions} parameter will\n     * take precedence over the {@link RequestOptions} values provided to\n     * {@link GoogleGenerativeAI.getGenerativeModel }.\n     */\n    async embedContent(request, requestOptions = {}) {\n        const formattedParams = formatEmbedContentInput(request);\n        const generativeModelRequestOptions = Object.assign(Object.assign({}, this._requestOptions), requestOptions);\n        return embedContent(this.apiKey, this.model, formattedParams, generativeModelRequestOptions);\n    }\n    /**\n     * Embeds an array of {@link EmbedContentRequest}s.\n     *\n     * Fields set in the optional {@link SingleRequestOptions} parameter will\n     * take precedence over the {@link RequestOptions} values provided to\n     * {@link GoogleGenerativeAI.getGenerativeModel }.\n     */\n    async batchEmbedContents(batchEmbedContentRequest, requestOptions = {}) {\n        const generativeModelRequestOptions = Object.assign(Object.assign({}, this._requestOptions), requestOptions);\n        return batchEmbedContents(this.apiKey, this.model, batchEmbedContentRequest, generativeModelRequestOptions);\n    }\n}\n\n/**\n * @license\n * Copyright 2024 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n/**\n * Top-level class for this SDK\n * @public\n */\nclass GoogleGenerativeAI {\n    constructor(apiKey) {\n        this.apiKey = apiKey;\n    }\n    /**\n     * Gets a {@link GenerativeModel} instance for the provided model name.\n     */\n    getGenerativeModel(modelParams, requestOptions) {\n        if (!modelParams.model) {\n            throw new GoogleGenerativeAIError(`Must provide a model name. ` +\n                `Example: genai.getGenerativeModel({ model: 'my-model-name' })`);\n        }\n        return new GenerativeModel(this.apiKey, modelParams, requestOptions);\n    }\n    /**\n     * Creates a {@link GenerativeModel} instance from provided content cache.\n     */\n    getGenerativeModelFromCachedContent(cachedContent, modelParams, requestOptions) {\n        if (!cachedContent.name) {\n            throw new GoogleGenerativeAIRequestInputError(\"Cached content must contain a `name` field.\");\n        }\n        if (!cachedContent.model) {\n            throw new GoogleGenerativeAIRequestInputError(\"Cached content must contain a `model` field.\");\n        }\n        /**\n         * Not checking tools and toolConfig for now as it would require a deep\n         * equality comparison and isn't likely to be a common case.\n         */\n        const disallowedDuplicates = [\"model\", \"systemInstruction\"];\n        for (const key of disallowedDuplicates) {\n            if ((modelParams === null || modelParams === void 0 ? void 0 : modelParams[key]) &&\n                cachedContent[key] &&\n                (modelParams === null || modelParams === void 0 ? void 0 : modelParams[key]) !== cachedContent[key]) {\n                if (key === \"model\") {\n                    const modelParamsComp = modelParams.model.startsWith(\"models/\")\n                        ? modelParams.model.replace(\"models/\", \"\")\n                        : modelParams.model;\n                    const cachedContentComp = cachedContent.model.startsWith(\"models/\")\n                        ? cachedContent.model.replace(\"models/\", \"\")\n                        : cachedContent.model;\n                    if (modelParamsComp === cachedContentComp) {\n                        continue;\n                    }\n                }\n                throw new GoogleGenerativeAIRequestInputError(`Different value for \"${key}\" specified in modelParams` +\n                    ` (${modelParams[key]}) and cachedContent (${cachedContent[key]})`);\n            }\n        }\n        const modelParamsFromCache = Object.assign(Object.assign({}, modelParams), { model: cachedContent.model, tools: cachedContent.tools, toolConfig: cachedContent.toolConfig, systemInstruction: cachedContent.systemInstruction, cachedContent });\n        return new GenerativeModel(this.apiKey, modelParamsFromCache, requestOptions);\n    }\n}\n\nexport { BlockReason, ChatSession, DynamicRetrievalMode, ExecutableCodeLanguage, FinishReason, FunctionCallingMode, GenerativeModel, GoogleGenerativeAI, GoogleGenerativeAIAbortError, GoogleGenerativeAIError, GoogleGenerativeAIFetchError, GoogleGenerativeAIRequestInputError, GoogleGenerativeAIResponseError, HarmBlockThreshold, HarmCategory, HarmProbability, Outcome, POSSIBLE_ROLES, SchemaType, TaskType };\n//# sourceMappingURL=index.mjs.map\n","/******************************************************************************\nCopyright (c) Microsoft Corporation.\n\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\nPERFORMANCE OF THIS SOFTWARE.\n***************************************************************************** */\n/* global Reflect, Promise, SuppressedError, Symbol, Iterator */\n\nvar extendStatics = function(d, b) {\n  extendStatics = Object.setPrototypeOf ||\n      ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n      function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n  return extendStatics(d, b);\n};\n\nexport function __extends(d, b) {\n  if (typeof b !== \"function\" && b !== null)\n      throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n  extendStatics(d, b);\n  function __() { this.constructor = d; }\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nexport var __assign = function() {\n  __assign = Object.assign || function __assign(t) {\n      for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n      return t;\n  }\n  return __assign.apply(this, arguments);\n}\n\nexport function __rest(s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n      t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n      for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n          if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n              t[p[i]] = s[p[i]];\n      }\n  return t;\n}\n\nexport function __decorate(decorators, target, key, desc) {\n  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n  else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n}\n\nexport function __param(paramIndex, decorator) {\n  return function (target, key) { decorator(target, key, paramIndex); }\n}\n\nexport function __esDecorate(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\n  function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\n  var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\n  var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\n  var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\n  var _, done = false;\n  for (var i = decorators.length - 1; i >= 0; i--) {\n      var context = {};\n      for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\n      for (var p in contextIn.access) context.access[p] = contextIn.access[p];\n      context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\n      var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\n      if (kind === \"accessor\") {\n          if (result === void 0) continue;\n          if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\n          if (_ = accept(result.get)) descriptor.get = _;\n          if (_ = accept(result.set)) descriptor.set = _;\n          if (_ = accept(result.init)) initializers.unshift(_);\n      }\n      else if (_ = accept(result)) {\n          if (kind === \"field\") initializers.unshift(_);\n          else descriptor[key] = _;\n      }\n  }\n  if (target) Object.defineProperty(target, contextIn.name, descriptor);\n  done = true;\n};\n\nexport function __runInitializers(thisArg, initializers, value) {\n  var useValue = arguments.length > 2;\n  for (var i = 0; i < initializers.length; i++) {\n      value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\n  }\n  return useValue ? value : void 0;\n};\n\nexport function __propKey(x) {\n  return typeof x === \"symbol\" ? x : \"\".concat(x);\n};\n\nexport function __setFunctionName(f, name, prefix) {\n  if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\n  return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\n};\n\nexport function __metadata(metadataKey, metadataValue) {\n  if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\n}\n\nexport function __awaiter(thisArg, _arguments, P, generator) {\n  function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n  return new (P || (P = Promise))(function (resolve, reject) {\n      function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n      function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n      function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n      step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n}\n\nexport function __generator(thisArg, body) {\n  var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g = Object.create((typeof Iterator === \"function\" ? Iterator : Object).prototype);\n  return g.next = verb(0), g[\"throw\"] = verb(1), g[\"return\"] = verb(2), typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n  function verb(n) { return function (v) { return step([n, v]); }; }\n  function step(op) {\n      if (f) throw new TypeError(\"Generator is already executing.\");\n      while (g && (g = 0, op[0] && (_ = 0)), _) try {\n          if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n          if (y = 0, t) op = [op[0] & 2, t.value];\n          switch (op[0]) {\n              case 0: case 1: t = op; break;\n              case 4: _.label++; return { value: op[1], done: false };\n              case 5: _.label++; y = op[1]; op = [0]; continue;\n              case 7: op = _.ops.pop(); _.trys.pop(); continue;\n              default:\n                  if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                  if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                  if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                  if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                  if (t[2]) _.ops.pop();\n                  _.trys.pop(); continue;\n          }\n          op = body.call(thisArg, _);\n      } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n      if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n  }\n}\n\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n  }\n  Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nexport function __exportStar(m, o) {\n  for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\n}\n\nexport function __values(o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n      next: function () {\n          if (o && i >= o.length) o = void 0;\n          return { value: o && o[i++], done: !o };\n      }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n}\n\nexport function __read(o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o), r, ar = [], e;\n  try {\n      while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  }\n  catch (error) { e = { error: error }; }\n  finally {\n      try {\n          if (r && !r.done && (m = i[\"return\"])) m.call(i);\n      }\n      finally { if (e) throw e.error; }\n  }\n  return ar;\n}\n\n/** @deprecated */\nexport function __spread() {\n  for (var ar = [], i = 0; i < arguments.length; i++)\n      ar = ar.concat(__read(arguments[i]));\n  return ar;\n}\n\n/** @deprecated */\nexport function __spreadArrays() {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n  for (var r = Array(s), k = 0, i = 0; i < il; i++)\n      for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n          r[k] = a[j];\n  return r;\n}\n\nexport function __spreadArray(to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n      if (ar || !(i in from)) {\n          if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n          ar[i] = from[i];\n      }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n}\n\nexport function __await(v) {\n  return this instanceof __await ? (this.v = v, this) : new __await(v);\n}\n\nexport function __asyncGenerator(thisArg, _arguments, generator) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var g = generator.apply(thisArg, _arguments || []), i, q = [];\n  return i = Object.create((typeof AsyncIterator === \"function\" ? AsyncIterator : Object).prototype), verb(\"next\"), verb(\"throw\"), verb(\"return\", awaitReturn), i[Symbol.asyncIterator] = function () { return this; }, i;\n  function awaitReturn(f) { return function (v) { return Promise.resolve(v).then(f, reject); }; }\n  function verb(n, f) { if (g[n]) { i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; if (f) i[n] = f(i[n]); } }\n  function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\n  function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\n  function fulfill(value) { resume(\"next\", value); }\n  function reject(value) { resume(\"throw\", value); }\n  function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\n}\n\nexport function __asyncDelegator(o) {\n  var i, p;\n  return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\n  function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }\n}\n\nexport function __asyncValues(o) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var m = o[Symbol.asyncIterator], i;\n  return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\n  function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\n  function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\n}\n\nexport function __makeTemplateObject(cooked, raw) {\n  if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n  return cooked;\n};\n\nvar __setModuleDefault = Object.create ? (function(o, v) {\n  Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n  o[\"default\"] = v;\n};\n\nvar ownKeys = function(o) {\n  ownKeys = Object.getOwnPropertyNames || function (o) {\n    var ar = [];\n    for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n    return ar;\n  };\n  return ownKeys(o);\n};\n\nexport function __importStar(mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n  __setModuleDefault(result, mod);\n  return result;\n}\n\nexport function __importDefault(mod) {\n  return (mod && mod.__esModule) ? mod : { default: mod };\n}\n\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n  return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n}\n\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\n  if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n  return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n}\n\nexport function __classPrivateFieldIn(state, receiver) {\n  if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\n  return typeof state === \"function\" ? receiver === state : state.has(receiver);\n}\n\nexport function __addDisposableResource(env, value, async) {\n  if (value !== null && value !== void 0) {\n    if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\n    var dispose, inner;\n    if (async) {\n      if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\n      dispose = value[Symbol.asyncDispose];\n    }\n    if (dispose === void 0) {\n      if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\n      dispose = value[Symbol.dispose];\n      if (async) inner = dispose;\n    }\n    if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\n    if (inner) dispose = function() { try { inner.call(this); } catch (e) { return Promise.reject(e); } };\n    env.stack.push({ value: value, dispose: dispose, async: async });\n  }\n  else if (async) {\n    env.stack.push({ async: true });\n  }\n  return value;\n}\n\nvar _SuppressedError = typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\n  var e = new Error(message);\n  return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\n};\n\nexport function __disposeResources(env) {\n  function fail(e) {\n    env.error = env.hasError ? new _SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\n    env.hasError = true;\n  }\n  var r, s = 0;\n  function next() {\n    while (r = env.stack.pop()) {\n      try {\n        if (!r.async && s === 1) return s = 0, env.stack.push(r), Promise.resolve().then(next);\n        if (r.dispose) {\n          var result = r.dispose.call(r.value);\n          if (r.async) return s |= 2, Promise.resolve(result).then(next, function(e) { fail(e); return next(); });\n        }\n        else s |= 1;\n      }\n      catch (e) {\n        fail(e);\n      }\n    }\n    if (s === 1) return env.hasError ? Promise.reject(env.error) : Promise.resolve();\n    if (env.hasError) throw env.error;\n  }\n  return next();\n}\n\nexport function __rewriteRelativeImportExtension(path, preserveJsx) {\n  if (typeof path === \"string\" && /^\\.\\.?\\//.test(path)) {\n      return path.replace(/\\.(tsx)$|((?:\\.d)?)((?:\\.[^./]+?)?)\\.([cm]?)ts$/i, function (m, tsx, d, ext, cm) {\n          return tsx ? preserveJsx ? \".jsx\" : \".js\" : d && (!ext || !cm) ? m : (d + ext + \".\" + cm.toLowerCase() + \"js\");\n      });\n  }\n  return path;\n}\n\nexport default {\n  __extends,\n  __assign,\n  __rest,\n  __decorate,\n  __param,\n  __esDecorate,\n  __runInitializers,\n  __propKey,\n  __setFunctionName,\n  __metadata,\n  __awaiter,\n  __generator,\n  __createBinding,\n  __exportStar,\n  __values,\n  __read,\n  __spread,\n  __spreadArrays,\n  __spreadArray,\n  __await,\n  __asyncGenerator,\n  __asyncDelegator,\n  __asyncValues,\n  __makeTemplateObject,\n  __importStar,\n  __importDefault,\n  __classPrivateFieldGet,\n  __classPrivateFieldSet,\n  __classPrivateFieldIn,\n  __addDisposableResource,\n  __disposeResources,\n  __rewriteRelativeImportExtension,\n};\n","/**\n * AI Provider请求参数\n * 定义统一的AI请求接口，所有业务场景都使用此接口\n */\nimport { BusinessType } from '../../../config/aiTemperatureConfig';\n\nexport interface AIProviderRequest {\n  api_key: string;\n  system_prompt: string;\n  user_prompt: string;\n  business_type: BusinessType;\n  temperature?: number;\n  max_tokens?: number;\n}\n\n/**\n * AI Provider响应\n * 返回原始的AI响应文本，不做任何业务解析\n */\nexport interface AIProviderResponse {\n  success: boolean;\n  content: string;\n  error?: string;\n  timestamp: string;\n}\n\n/**\n * AI Provider抽象基类\n * 定义统一的AI调用接口，所有具体的AI Provider实现都必须继承此类\n *\n * 设计原则：\n * 1. Provider只负责调用AI接口，返回原始响应\n * 2. Prompt的拼接由业务层负责（核心资产，分开维护）\n * 3. 响应解析由业务层负责（不做任何业务相关的解析）\n */\nexport abstract class BaseAIProvider {\n  /**\n   * 调用AI接口生成内容\n   * @param request - AI Provider请求参数\n   * @returns 包含原始AI响应的标准化响应\n   */\n  abstract generate(request: AIProviderRequest): Promise<AIProviderResponse>;\n\n  /**\n   * 验证请求参数\n   * @param request - AI Provider请求参数\n   * @throws Error 当参数验证失败时抛出错误\n   */\n  protected validateRequest(request: AIProviderRequest): void {\n    if (!request.api_key || !request.api_key.trim()) {\n      throw new Error(\"API Key不能为空\");\n    }\n\n    if (!request.system_prompt || !request.system_prompt.trim()) {\n      throw new Error(\"System Prompt不能为空\");\n    }\n\n    if (!request.user_prompt || !request.user_prompt.trim()) {\n      throw new Error(\"User Prompt不能为空\");\n    }\n  }\n\n  /**\n   * 处理API错误响应\n   * @param response - Fetch响应对象\n   * @returns 标准化的错误消息\n   */\n  protected async handleAPIError(response: Response): Promise<string> {\n    let errorMessage = `API请求失败: ${response.status}`;\n\n    try {\n      const errorData = await response.json();\n      if (errorData.error && errorData.error.message) {\n        errorMessage = `API请求失败: ${errorData.error.message}`;\n\n        if (\n          errorMessage.includes(\"invalid_api_key\") ||\n          errorMessage.includes(\"API key not found\")\n        ) {\n          errorMessage = \"API Key 无效，请检查您的 API Key\";\n        } else if (errorMessage.includes(\"rate_limit_exceeded\")) {\n          errorMessage = \"API 请求频率过高，请稍后再试\";\n        } else if (errorMessage.includes(\"insufficient_quota\")) {\n          errorMessage = \"API 调用次数不足，请检查您的配额\";\n        }\n      }\n    } catch (parseError) {\n      console.error(\"解析错误响应失败:\", parseError);\n    }\n\n    return errorMessage;\n  }\n\n  /**\n   * 创建成功响应\n   * @param content - AI生成的内容\n   * @returns 标准化的成功响应\n   */\n  protected createSuccessResponse(content: string): AIProviderResponse {\n    return {\n      success: true,\n      content,\n      timestamp: new Date().toISOString(),\n    };\n  }\n\n  /**\n   * 创建失败响应\n   * @param error - 错误消息\n   * @returns 标准化的失败响应\n   */\n  protected createErrorResponse(error: string): AIProviderResponse {\n    return {\n      success: false,\n      content: \"\",\n      error,\n      timestamp: new Date().toISOString(),\n    };\n  }\n}\n","import { injectable } from \"tsyringe\";\nimport { BaseAIProvider } from \"./baseAIProvider\";\nimport type { AIProviderRequest, AIProviderResponse } from \"./baseAIProvider\";\nimport {\n  AIProviderType,\n  getTemperatureByConfig,\n} from \"../../../config/aiTemperatureConfig\";\n\n/**\n * DeepSeek AI Provider\n * 负责调用DeepSeek API，返回原始响应\n */\n@injectable()\nexport class DeepSeekProvider extends BaseAIProvider {\n  /**\n   * 调用DeepSeek API生成内容\n   * @param request - AI Provider请求参数\n   * @returns 包含原始AI响应的标准化响应\n   */\n  async generate(request: AIProviderRequest): Promise<AIProviderResponse> {\n    this.validateRequest(request);\n\n    const {\n      api_key: apiKey,\n      system_prompt: systemPrompt,\n      user_prompt: userPrompt,\n      business_type: businessType,\n      temperature,\n      max_tokens = 8192,\n    } = request;\n\n    // 从配置文件获取temperature参数，如果request中提供了temperature则优先使用\n    const configTemperature = getTemperatureByConfig(\n      businessType,\n      AIProviderType.DEEPSEEK\n    );\n    const finalTemperature =\n      temperature !== undefined ? temperature : configTemperature;\n\n    try {\n      const response = await fetch(\n        \"https://api.deepseek.com/chat/completions\",\n        {\n          method: \"POST\",\n          headers: {\n            Authorization: `Bearer ${apiKey}`,\n            \"Content-Type\": \"application/json\",\n          },\n          body: JSON.stringify({\n            model: \"deepseek-chat\",\n            messages: [\n              {\n                role: \"system\",\n                content: systemPrompt,\n              },\n              {\n                role: \"user\",\n                content: userPrompt,\n              },\n            ],\n            stream: false,\n            temperature: finalTemperature,\n            max_tokens,\n          }),\n        }\n      );\n\n      if (!response.ok) {\n        const errorMessage = await this.handleAPIError(response);\n        return this.createErrorResponse(errorMessage);\n      }\n\n      const data = await response.json();\n\n      if (\n        !data.choices ||\n        !Array.isArray(data.choices) ||\n        data.choices.length === 0\n      ) {\n        return this.createErrorResponse(\"API 响应数据格式不正确\");\n      }\n\n      const content = data.choices[0].message.content;\n\n      if (!content || !content.trim()) {\n        return this.createErrorResponse(\"AI 生成内容为空\");\n      }\n\n      return this.createSuccessResponse(content);\n    } catch (error) {\n      const errorMessage = error instanceof Error ? error.message : \"未知错误\";\n      console.error(\"DeepSeek API调用失败:\", error);\n      return this.createErrorResponse(errorMessage);\n    }\n  }\n}\n","import { injectable } from \"tsyringe\";\nimport { BaseAIProvider } from \"./baseAIProvider\";\nimport type { AIProviderRequest, AIProviderResponse } from \"./baseAIProvider\";\nimport { GoogleGenerativeAI } from \"@google/generative-ai\";\nimport {\n  AIProviderType,\n  getTemperatureByConfig,\n} from \"../../../config/aiTemperatureConfig\";\n\n/**\n * Gemini AI Provider\n * 负责调用Gemini API，返回原始响应\n */\n@injectable()\nexport class GeminiProvider extends BaseAIProvider {\n  /**\n   * 调用Gemini API生成内容\n   * @param request - AI Provider请求参数\n   * @returns 包含原始AI响应的标准化响应\n   */\n  async generate(request: AIProviderRequest): Promise<AIProviderResponse> {\n    this.validateRequest(request);\n\n    const {\n      api_key: apiKey,\n      system_prompt: systemPrompt,\n      user_prompt: userPrompt,\n      business_type: businessType,\n      temperature,\n    } = request;\n\n    // 从配置文件获取temperature参数，如果request中提供了temperature则优先使用\n    const configTemperature = getTemperatureByConfig(\n      businessType,\n      AIProviderType.GEMINI\n    );\n    const finalTemperature =\n      temperature !== undefined ? temperature : configTemperature;\n\n    try {\n      const genAI = new GoogleGenerativeAI(apiKey);\n\n      // 使用Google GenAI SDK的正确方法调用\n      const model = genAI.getGenerativeModel({\n        model: \"gemini-3-flash-preview\",\n        generationConfig: {\n          temperature: finalTemperature,\n        },\n      });\n\n      const result = await model.generateContent(\n        systemPrompt + \"\\n\\n\" + userPrompt\n      );\n      const response = await result.response;\n      const content = response.text();\n\n      if (!content || !content.trim()) {\n        return this.createErrorResponse(\"AI 生成内容为空\");\n      }\n\n      return this.createSuccessResponse(content);\n    } catch (error) {\n      const errorMessage = error instanceof Error ? error.message : \"未知错误\";\n      console.error(\"Gemini API调用失败:\", error);\n      return this.createErrorResponse(errorMessage);\n    }\n  }\n}\n","import { injectable } from \"tsyringe\";\nimport { BaseAIProvider } from \"./baseAIProvider\";\nimport type { AIProviderRequest, AIProviderResponse } from \"./baseAIProvider\";\nimport {\n  AIProviderType,\n  getTemperatureByConfig,\n} from \"../../../config/aiTemperatureConfig\";\n\n/**\n * 小米MiMo AI Provider\n * 负责调用小米MiMo API，返回原始响应\n * 注意：MiMo服务需要在本地运行，线上环境无法使用\n */\n@injectable()\nexport class MimoProvider extends BaseAIProvider {\n  /**\n   * 调用小米MiMo API生成内容\n   * @param request - AI Provider请求参数\n   * @returns 包含原始AI响应的标准化响应\n   */\n  async generate(request: AIProviderRequest): Promise<AIProviderResponse> {\n    this.validateRequest(request);\n\n    const {\n      api_key: apiKey,\n      system_prompt: systemPrompt,\n      user_prompt: userPrompt,\n      business_type: businessType,\n      temperature,\n      max_tokens = 8192,\n    } = request;\n\n    // 从配置文件获取temperature参数，如果request中提供了temperature则优先使用\n    const configTemperature = getTemperatureByConfig(\n      businessType,\n      AIProviderType.MIMO\n    );\n    const finalTemperature =\n      temperature !== undefined ? temperature : configTemperature;\n\n    try {\n      const response = await fetch(\"/mimo-api/v1/chat/completions\", {\n        method: \"POST\",\n        headers: {\n          Authorization: `Bearer ${apiKey}`,\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({\n          model: \"mimo-v2-flash\",\n          messages: [\n            {\n              role: \"system\",\n              content: systemPrompt,\n            },\n            {\n              role: \"user\",\n              content: userPrompt,\n            },\n          ],\n          stream: false,\n          temperature: finalTemperature,\n          max_tokens,\n        }),\n      });\n\n      if (!response.ok) {\n        const errorMessage = await this.handleAPIError(response);\n        return this.createErrorResponse(errorMessage);\n      }\n\n      const data = await response.json();\n\n      if (\n        !data.choices ||\n        !Array.isArray(data.choices) ||\n        data.choices.length === 0\n      ) {\n        return this.createErrorResponse(\"API 响应数据格式不正确\");\n      }\n\n      const content = data.choices[0].message.content;\n\n      if (!content || !content.trim()) {\n        return this.createErrorResponse(\"AI 生成内容为空\");\n      }\n\n      return this.createSuccessResponse(content);\n    } catch (error) {\n      const errorMessage = error instanceof Error ? error.message : \"未知错误\";\n      console.error(\"MiMo API调用失败:\", error);\n      return this.createErrorResponse(errorMessage);\n    }\n  }\n}\n","import { container } from \"tsyringe\";\nimport { DeepSeekProvider } from \"./deepseekProvider\";\nimport { GeminiProvider } from \"./geminiProvider\";\nimport { MimoProvider } from \"./mimoProvider\";\nimport type { BaseAIProvider } from \"./baseAIProvider\";\n\n/**\n * 注册所有AI Provider到tsyringe容器\n */\nexport function registerAIProviders(): void {\n  container.register(DeepSeekProvider, { useClass: DeepSeekProvider });\n  container.register(GeminiProvider, { useClass: GeminiProvider });\n  container.register(MimoProvider, { useClass: MimoProvider });\n}\n\n/**\n * AI Provider工厂类\n * 用于创建不同类型的AI Provider实例\n */\nexport class AIProviderFactory {\n  /**\n   * 根据模型类型创建AI Provider实例\n   * @param model - 模型类型（deepseek | gemini | mimo）\n   * @returns AI Provider实例\n   */\n  static createProvider(model: \"deepseek\" | \"gemini\" | \"mimo\"): BaseAIProvider {\n    switch (model) {\n      case \"deepseek\":\n        return container.resolve(DeepSeekProvider);\n      case \"gemini\":\n        return container.resolve(GeminiProvider);\n      case \"mimo\":\n        return container.resolve(MimoProvider);\n      default:\n        throw new Error(`Unsupported AI model: ${model}`);\n    }\n  }\n}\n\n/**\n * 导出容器和注册函数\n */\nexport { container };\n","/**\n * 剪贴板工具函数\n * 提供复制文本到剪贴板的功能，并支持成功/失败提示\n */\nimport { message } from 'antd';\n\n/**\n * 复制文本到剪贴板\n * @param text - 要复制的文本内容\n * @param type - 文本类型，用于提示信息（如：\"Styles提示词\"）\n * @returns Promise<void>\n */\nexport const copyToClipboard = async (\n  text: string,\n  type?: string,\n): Promise<void> => {\n  try {\n    await navigator.clipboard.writeText(text);\n    message.success(`${type || '文本'}已成功复制到剪贴板`);\n  } catch (error) {\n    console.error('复制到剪贴板失败:', error);\n    message.error('复制失败，请手动复制');\n  }\n};\n\n/**\n * 复制文本到剪贴板（无提示版本）\n * @param text - 要复制的文本内容\n * @returns Promise<boolean> - 复制成功返回true，失败返回false\n */\nexport const copyToClipboardSilent = async (text: string): Promise<boolean> => {\n  try {\n    await navigator.clipboard.writeText(text);\n    return true;\n  } catch (error) {\n    console.error('复制到剪贴板失败:', error);\n    return false;\n  }\n};\n","import { useCallback, useState } from 'react';\nimport { db } from '@/services/db';\nimport type { LyricsRecord } from '@/shared/types/types';\n\nexport interface LyricsRecordFilters {\n  keyword?: string;\n  dateRange?: [string, string];\n  songName?: string;\n  songLanguage?: string;\n  songStyle?: string;\n  masterId?: string;\n}\n\nexport const useLyricsRecords = () => {\n  const [loading, setLoading] = useState<boolean>(false);\n  const [records, setRecords] = useState<LyricsRecord[]>([]);\n\n  // 获取所有记录\n  const getAllRecords = useCallback(async () => {\n    return await db.getAllLyricsRecords();\n  }, []);\n\n  // 日期范围筛选\n  const filterByDateRange = useCallback(\n    (records: LyricsRecord[], dateRange?: [string, string]) => {\n      if (\n        !dateRange ||\n        !Array.isArray(dateRange) ||\n        !dateRange[0] ||\n        !dateRange[1]\n      ) {\n        return records;\n      }\n      const startDate = new Date(dateRange[0]);\n      const endDate = new Date(dateRange[1]);\n      endDate.setHours(23, 59, 59, 999);\n      return records.filter((record) => {\n        const recordDate = new Date(record.created_at || new Date(0));\n        return recordDate >= startDate && recordDate <= endDate;\n      });\n    },\n    [],\n  );\n\n  // 歌曲名称筛选\n  const filterBySongName = useCallback(\n    (records: LyricsRecord[], songName?: string) => {\n      if (!songName || !songName.trim()) {\n        return records;\n      }\n      const lowerCaseSongName = songName.toLowerCase();\n      return records.filter((record) =>\n        record.form_data?.song_name?.toLowerCase().includes(lowerCaseSongName),\n      );\n    },\n    [],\n  );\n\n  // 歌曲语言筛选\n  const filterBySongLanguage = useCallback(\n    (records: LyricsRecord[], songLanguage?: string) => {\n      if (!songLanguage) {\n        return records;\n      }\n      return records.filter(\n        (record) => record.form_data?.song_language === songLanguage,\n      );\n    },\n    [],\n  );\n\n  // 歌曲风格筛选\n  const filterBySongStyle = useCallback(\n    (records: LyricsRecord[], songStyle?: string) => {\n      if (!songStyle) {\n        return records;\n      }\n      return records.filter(\n        (record) => record.form_data?.song_style === songStyle,\n      );\n    },\n    [],\n  );\n\n  // 大师ID筛选\n  const filterByMasterId = useCallback(\n    (records: LyricsRecord[], masterId?: string) => {\n      if (!masterId) {\n        return records;\n      }\n      return records.filter(\n        (record) => record.form_data?.master_id === masterId,\n      );\n    },\n    [],\n  );\n\n  // 关键词筛选\n  const filterByKeyword = useCallback(\n    (records: LyricsRecord[], keyword?: string) => {\n      if (!keyword || !keyword.trim()) {\n        return records;\n      }\n      const lowerCaseKeyword = keyword.toLowerCase();\n      return records.filter((record) => {\n        const searchText = JSON.stringify(record).toLowerCase();\n        return searchText.includes(lowerCaseKeyword);\n      });\n    },\n    [],\n  );\n\n  // 获取记录列表（整合筛选逻辑）\n  const fetchRecords = useCallback(\n    async (filters: LyricsRecordFilters = {}) => {\n      setLoading(true);\n      try {\n        let fetchedRecords = await getAllRecords();\n\n        // 应用所有筛选条件\n        fetchedRecords = filterByKeyword(fetchedRecords, filters.keyword);\n        fetchedRecords = filterByDateRange(fetchedRecords, filters.dateRange);\n        fetchedRecords = filterBySongName(fetchedRecords, filters.songName);\n        fetchedRecords = filterBySongLanguage(\n          fetchedRecords,\n          filters.songLanguage,\n        );\n        fetchedRecords = filterBySongStyle(fetchedRecords, filters.songStyle);\n        fetchedRecords = filterByMasterId(fetchedRecords, filters.masterId);\n\n        setRecords(fetchedRecords);\n        return fetchedRecords;\n      } catch (error) {\n        console.error('获取歌词记录失败：', error);\n        setRecords([]);\n        return [];\n      } finally {\n        setLoading(false);\n      }\n    },\n    [\n      getAllRecords,\n      filterByKeyword,\n      filterByDateRange,\n      filterBySongName,\n      filterBySongLanguage,\n      filterBySongStyle,\n      filterByMasterId,\n    ],\n  );\n\n  // 获取单条记录\n  const getRecord = useCallback(async (id: number) => {\n    try {\n      return await db.getLyricsRecord(id);\n    } catch (error) {\n      console.error('获取歌词记录失败：', error);\n      return undefined;\n    }\n  }, []);\n\n  // 创建记录\n  const createRecord = useCallback(\n    async (record: Omit<LyricsRecord, 'id'>) => {\n      try {\n        const createdRecord = await db.createLyricsRecord(record);\n        // 刷新数据\n        await fetchRecords({});\n        return { success: true, data: createdRecord };\n      } catch (error) {\n        console.error('创建歌词记录失败：', error);\n        return { success: false, error };\n      }\n    },\n    [fetchRecords],\n  );\n\n  // 更新记录\n  const updateRecord = useCallback(\n    async (id: number, updates: Partial<LyricsRecord>) => {\n      try {\n        await db.updateLyricsRecord(id, updates);\n        // 刷新数据\n        await fetchRecords();\n        return { success: true };\n      } catch (error) {\n        console.error('更新歌词记录失败：', error);\n        return { success: false, error };\n      }\n    },\n    [fetchRecords],\n  );\n\n  // 删除单条记录\n  const deleteRecord = useCallback(\n    async (recordId: number) => {\n      try {\n        await db.deleteLyricsRecord(recordId);\n        // 刷新数据\n        await fetchRecords({});\n        return { success: true };\n      } catch (error) {\n        console.error('删除歌词记录失败：', error);\n        return { success: false, error };\n      }\n    },\n    [fetchRecords],\n  );\n\n  // 清空所有记录\n  const clearAllRecords = useCallback(async () => {\n    try {\n      const allRecords = await db.getAllLyricsRecords();\n      await Promise.all(\n        allRecords.map((record) => {\n          if (record.id) {\n            return db.deleteLyricsRecord(record.id);\n          }\n          return Promise.resolve();\n        }),\n      );\n      setRecords([]);\n      return { success: true };\n    } catch (error) {\n      console.error('清空歌词记录失败：', error);\n      return { success: false, error };\n    }\n  }, []);\n\n  // 获取最近N天的记录\n  const getRecentRecords = useCallback(async (days: number = 7) => {\n    try {\n      return await db.getRecentLyricsRecords(days);\n    } catch (error) {\n      console.error('获取最近歌词记录失败：', error);\n      return [];\n    }\n  }, []);\n\n  // 搜索记录\n  const searchRecords = useCallback(async (keyword: string, limit?: number) => {\n    try {\n      return await db.searchLyricsRecords(keyword, limit);\n    } catch (error) {\n      console.error('搜索歌词记录失败：', error);\n      return [];\n    }\n  }, []);\n\n  return {\n    records,\n    loading,\n    fetchRecords,\n    getRecord,\n    createRecord,\n    updateRecord,\n    deleteRecord,\n    clearAllRecords,\n    getRecentRecords,\n    searchRecords,\n  };\n};\n","/**\n * AI Temperature配置文件\n * 定义不同业务场景下不同AI提供商的temperature参数\n * temperature参数控制AI生成内容的创造性，值越高越有创造性，值越低越保守\n */\n\n/**\n * AI提供商类型枚举\n */\nexport enum AIProviderType {\n  DEEPSEEK = \"deepseek\",\n  GEMINI = \"gemini\",\n  MIMO = \"mimo\",\n}\n\n/**\n * 业务类型枚举\n */\nexport enum BusinessType {\n  /** 大师做编曲业务 */\n  ARRANGEMENT = \"arrangement\",\n  /** 大师写歌词业务 */\n  LYRICS = \"lyrics\",\n}\n\n/**\n * AI Temperature配置接口\n */\nexport interface AITemperatureConfig {\n  [businessType: string]: {\n    [providerType: string]: number;\n  };\n}\n\n/**\n * AI Temperature配置\n * 分别配置大师做编曲和大师写歌词两个业务的temperature参数\n */\nexport const aiTemperatureConfig: AITemperatureConfig = {\n  // 大师做编曲业务\n  [BusinessType.ARRANGEMENT]: {\n    [AIProviderType.DEEPSEEK]: 1.5,\n    [AIProviderType.GEMINI]: 1,\n    [AIProviderType.MIMO]: 0.8,\n  },\n  // 大师写歌词业务\n  [BusinessType.LYRICS]: {\n    [AIProviderType.DEEPSEEK]: 1.5,\n    [AIProviderType.GEMINI]: 1,\n    [AIProviderType.MIMO]: 0.8,\n  },\n};\n\n/**\n * 获取指定业务和AI提供商的temperature参数\n * @param businessType 业务类型\n * @param providerType AI提供商类型\n * @returns temperature参数值\n */\nexport const getTemperatureByConfig = (\n  businessType: BusinessType,\n  providerType: AIProviderType\n): number => {\n  return aiTemperatureConfig[businessType]?.[providerType] || 1;\n};\n","// Ant Design Icons\nimport { CopyOutlined } from '@ant-design/icons';\n\n// Ant Design Pro Components\nimport { ProCard } from '@ant-design/pro-components';\n\n// Ant Design Base Components\nimport { Button, Input } from 'antd';\n\n// React\nimport React, { memo } from 'react';\n\n// 可复用的结果卡片组件\nconst ResultCard = memo(\n  ({\n    title,\n    value,\n    onCopy,\n  }: {\n    title: string;\n    value: string;\n    onCopy: () => void;\n  }) => {\n    return (\n      <ProCard\n        title={title}\n        extra={\n          <Button\n            type=\"text\"\n            icon={<CopyOutlined />}\n            onClick={onCopy}\n            disabled={!value}\n            size=\"small\"\n          >\n            复制\n          </Button>\n        }\n        style={{ height: '100%' }}\n      >\n        <Input.TextArea\n          value={value}\n          readOnly\n          placeholder={`生成的 ${title} 提示词将展示在此处…`}\n          showCount\n          rows={40}\n        />\n      </ProCard>\n    );\n  },\n);\n\nexport default ResultCard;\n","import { Alert, Button } from \"antd\";\nimport React from \"react\";\n\ninterface ApiKeyAlertProps {\n  visible: boolean;\n  onNavigateToSettings: () => void;\n}\n\nconst ApiKeyAlert: React.FC<ApiKeyAlertProps> = ({\n  visible,\n  onNavigateToSettings,\n}) => {\n  if (!visible) return null;\n\n  return (\n    <Alert\n      title=\"尚未设置 AI API Key，设置完成后即可使用该功能，是否现在去设置？\"\n      banner\n      style={{ marginBottom: 24 }}\n      action={\n        <Button type=\"link\" onClick={onNavigateToSettings}>\n          去设置\n        </Button>\n      }\n    />\n  );\n};\n\nexport default ApiKeyAlert;\n","import { useEffect, useState } from \"react\";\nimport { history } from \"@umijs/max\";\nimport { Modal } from \"antd\";\nimport { db } from \"@/services/db\";\n\nexport const useApiKey = () => {\n  const [apiKey, setApiKey] = useState<string>(\"\");\n  const [model, setModel] = useState<string>(\"deepseek\");\n  const [isLoading, setIsLoading] = useState<boolean>(true);\n\n  /**\n   * 判断是否需要显示Alert提示\n   * @returns 如果需要显示Alert返回true，否则返回false\n   */\n  const shouldShowAlert = !apiKey;\n\n  /**\n   * 跳转到AI设置页面\n   */\n  const navigateToSettings = () => {\n    history.push(\"/ai-setting\");\n  };\n\n  /**\n   * 检查API Key是否已配置\n   * @returns 如果API Key已配置返回true，否则返回false\n   */\n  const checkApiKey = (): boolean => {\n    if (!apiKey) {\n      Modal.confirm({\n        title: \"尚未设置 AI API Key\",\n        content: \"设置完成后即可使用该功能，是否现在去设置？\",\n        okText: \"去设置\",\n        cancelText: \"取消\",\n        onOk: navigateToSettings,\n      });\n      return false;\n    }\n    return true;\n  };\n\n  /**\n   * 获取当前配置的API Key和模型\n   * @returns 包含apiKey和model的对象\n   */\n  const getApiKeyConfig = () => {\n    return {\n      apiKey,\n      model,\n    };\n  };\n\n  // 加载指定模型的API Key\n  const loadApiKeyForModel = async (targetModel: string) => {\n    try {\n      console.log(\"Loading API Key for model:\", targetModel);\n      const userApiKeys = await db.getUserApiKeys(1);\n\n      // 查找指定模型的API Key\n      const modelApiKey = userApiKeys.find((key) => key.model === targetModel);\n      console.log(\"Found API Key for model\", targetModel, \":\", modelApiKey);\n\n      setApiKey(modelApiKey?.api_key || \"\");\n      setModel(targetModel);\n\n      // 将所有API Key的isCurrent设置为false，然后将指定模型的API Key设置为当前\n      console.log(\"Updating current API Key status for model\", targetModel);\n      for (const key of userApiKeys) {\n        if (key.id) {\n          await db.updateApiKey(key.id, {\n            is_current: key.model === targetModel,\n          });\n        }\n      }\n    } catch (error) {\n      console.error(\"Failed to load API Key for model:\", targetModel, error);\n      setApiKey(\"\");\n      setModel(targetModel);\n    }\n  };\n\n  // 加载初始API Key和模型\n  useEffect(() => {\n    const loadInitialApiKeyAndModel = async () => {\n      try {\n        // 首先尝试获取当前设置的API Key\n        const currentApiKey = await db.getCurrentApiKey(1);\n\n        if (currentApiKey) {\n          setApiKey(currentApiKey.api_key);\n          setModel(currentApiKey.model);\n        } else {\n          // 如果没有当前API Key，默认使用deepseek并尝试加载其API Key\n          console.log(\"No current API Key found, using default model deepseek\");\n          await loadApiKeyForModel(\"deepseek\");\n        }\n      } catch (error) {\n        console.error(\"Failed to load initial API Key and Model:\", error);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n\n    loadInitialApiKeyAndModel();\n  }, []);\n\n  // 切换模型的方法\n  const switchModel = async (newModel: string) => {\n    if (newModel === model) return; // 如果是同一个模型，不做任何操作\n\n    setIsLoading(true);\n    await loadApiKeyForModel(newModel);\n    setIsLoading(false);\n  };\n\n  // 保存 API Key 和模型（暂时使用用户ID 1，实际应用中需要从用户登录状态获取）\n  const saveApiKey = async (\n    newApiKey: string,\n    newModel: string = \"deepseek\"\n  ) => {\n    try {\n      console.log(\"Saving API Key and Model:\", {\n        apiKey: newApiKey,\n        model: newModel,\n      });\n      const savedApiKey = await db.createApiKey({\n        user_id: 1,\n        api_key: newApiKey,\n        model: newModel,\n        is_current: true,\n      });\n      console.log(\"Saved API Key and Model to DB:\", savedApiKey);\n      setApiKey(newApiKey);\n      setModel(newModel);\n      return true;\n    } catch (error) {\n      console.error(\"Failed to save API Key and Model:\", error);\n      return false;\n    }\n  };\n\n  // 删除 API Key（删除当前模型对应的API Key）\n  const deleteApiKey = async () => {\n    try {\n      console.log(\"Deleting API Key for model:\", model);\n      // 获取当前用户该模型对应的API Key\n      const userApiKeys = await db.getUserApiKeys(1);\n      const modelApiKey = userApiKeys.find((key) => key.model === model);\n\n      if (modelApiKey?.id) {\n        console.log(\"Deleting API Key with ID:\", modelApiKey.id);\n        await db.deleteApiKey(modelApiKey.id);\n      }\n\n      setApiKey(\"\");\n      console.log(\"API Key deleted successfully\");\n      return true;\n    } catch (error) {\n      console.error(\"Failed to delete API Key:\", error);\n      return false;\n    }\n  };\n\n  // 验证API Key格式（支持不同模型的API Key格式）\n  const validateApiKey = (apiKeyToValidate: string) => {\n    // DeepSeek API Key格式：sk-开头的字符串\n    // Google Gemini API Key格式：AIza开头的字符串\n    // 小米MiMo API Key格式：sk-开头的字符串\n    const deepSeekRegex = /^sk-/;\n    const geminiRegex = /^AIza/;\n    const mimoRegex = /^sk-/;\n\n    const trimmedApiKey = apiKeyToValidate.trim();\n    return (\n      deepSeekRegex.test(trimmedApiKey) ||\n      geminiRegex.test(trimmedApiKey) ||\n      mimoRegex.test(trimmedApiKey)\n    );\n  };\n\n  return {\n    apiKey,\n    model,\n    isLoading,\n    shouldShowAlert,\n    navigateToSettings,\n    saveApiKey,\n    deleteApiKey,\n    validateApiKey,\n    switchModel,\n    checkApiKey,\n    getApiKeyConfig,\n  };\n};\n","// Making the module version consumable via require - to prohibit\n// multiple occurrancies of the same module in the same app\n// (dual package hazard, https://nodejs.org/api/packages.html#dual-package-hazard)\nimport _Dexie from \"./dist/dexie.js\";\nconst DexieSymbol = Symbol.for(\"Dexie\");\nconst Dexie = globalThis[DexieSymbol] || (globalThis[DexieSymbol] = _Dexie);\nif (_Dexie.semVer !== Dexie.semVer) {\n    throw new Error(`Two different versions of Dexie loaded in the same app: ${_Dexie.semVer} and ${Dexie.semVer}`);\n}\nconst { liveQuery, mergeRanges, rangesOverlap, RangeSet, cmp, Entity,\n    PropModification, replacePrefix, add, remove,\n    DexieYProvider } = Dexie;\nexport { liveQuery, mergeRanges, rangesOverlap, RangeSet, cmp, Dexie, Entity,\n    PropModification, replacePrefix, add, remove,\n    DexieYProvider};\n    \nexport default Dexie;\n","/**\n * 数据库服务模块\n * 负责处理应用程序的本地数据库操作，使用 Dexie.js 作为数据库管理工具\n * 主要功能：\n * 1. 用户数据的增删改查\n * 2. 项目数据的管理\n * 3. 风格配置的存储和管理\n * 4. 提示词记录的保存和查询\n */\n\nimport Dexie from \"dexie\";\nimport type { User, Project, StyleConfig } from \"@/shared/types\";\nimport type { ApiKey } from \"@/shared/types/types\";\nimport type { PromptRecord } from \"@/shared/types/types\";\nimport type { LyricsRecord } from \"@/shared/types/types\";\n\n/**\n * 应用数据库类\n * 继承自 Dexie，用于管理应用程序的本地数据库\n */\nclass AppDatabase extends Dexie {\n  users: Dexie.Table<User, number>; // 用户表\n  projects: Dexie.Table<Project, number>; // 项目表\n  styleConfigs: Dexie.Table<StyleConfig, number>; // 风格配置表\n  promptRecords: Dexie.Table<\n    PromptRecord & {\n      ai_result?: { styles: string; lyrics: string; model: string };\n    },\n    number\n  >; // 提示词记录表\n  apiKeys: Dexie.Table<ApiKey, number>; // API Key 表\n  lyricsRecords: Dexie.Table<LyricsRecord, number>; // 歌词记录表\n\n  /**\n   * 数据库类构造函数\n   * 初始化数据库连接和表结构\n   */\n  constructor() {\n    super(\"SunoCoverArrangerDB\");\n\n    // 定义数据库版本和表结构\n    this.version(1).stores({\n      users: \"++id, name, email, created_at\",\n      projects: \"++id, title, user_id, created_at, updated_at\",\n      styleConfigs: \"++id, name, user_id, is_default, created_at, updated_at\",\n      promptRecords: \"++id, user_id, created_at\",\n      apiKeys: \"++id, user_id, api_key, model, is_current, created_at\",\n    });\n\n    // 版本2：更新提示词记录表结构，移除可能导致问题的嵌套字段索引\n    this.version(2).stores({\n      promptRecords: \"++id, userId, createdAt\",\n    });\n\n    // 版本3：重新创建所有表，解决表结构不一致问题\n    this.version(3)\n      .stores({\n        users: \"++id, name, email, created_at\",\n        projects: \"++id, title, user_id, created_at, updated_at\",\n        styleConfigs: \"++id, name, user_id, is_default, created_at, updated_at\",\n        promptRecords: \"++id, user_id, created_at\",\n        apiKeys: \"++id, user_id, api_key, model, is_current, created_at\",\n      })\n      .upgrade(async (tx) => {\n        // 重新创建所有表，解决可能的表结构不一致问题\n        // 这里我们不做任何数据转换，只是让Dexie重新创建表结构\n        console.log(\"数据库升级到版本3，重新创建表结构\");\n      });\n\n    // 版本4：统一所有字段名为snake_case命名规范\n    this.version(4)\n      .stores({\n        users: \"++id, name, email, created_at\",\n        projects: \"++id, title, user_id, created_at, updated_at\",\n        styleConfigs: \"++id, name, user_id, is_default, created_at, updated_at\",\n        promptRecords: \"++id, user_id, created_at\",\n        apiKeys: \"++id, user_id, api_key, model, is_current, created_at\",\n      })\n      .upgrade(async (tx) => {\n        // 由于历史数据中可能没有正确的参考歌曲数据，我们不需要做数据迁移\n        // 只是重新创建表结构以匹配新的字段命名规范\n        console.log(\"数据库升级到版本4，统一字段命名规范为snake_case\");\n      });\n\n    // 版本5：添加歌词记录表\n    this.version(5)\n      .stores({\n        users: \"++id, name, email, created_at\",\n        projects: \"++id, title, user_id, created_at, updated_at\",\n        styleConfigs: \"++id, name, user_id, is_default, created_at, updated_at\",\n        promptRecords: \"++id, user_id, created_at\",\n        apiKeys: \"++id, user_id, api_key, model, is_current, created_at\",\n        lyricsRecords: \"++id, created_at\",\n      })\n      .upgrade(async (tx) => {\n        console.log(\"数据库升级到版本5，添加歌词记录表\");\n      });\n\n    // 初始化表\n    this.users = this.table(\"users\");\n    this.projects = this.table(\"projects\");\n    this.styleConfigs = this.table(\"styleConfigs\");\n    this.promptRecords = this.table(\"promptRecords\");\n    this.apiKeys = this.table(\"apiKeys\");\n    this.lyricsRecords = this.table(\"lyricsRecords\");\n  }\n\n  // 用户相关操作\n  /**\n   * 创建新用户\n   * @param user - 用户信息（不包含id和createdAt）\n   * @returns 包含id和createdAt的完整用户信息\n   */\n  async createUser(user: Omit<User, \"id\" | \"createdAt\">): Promise<User> {\n    const newUser = {\n      ...user,\n      createdAt: new Date(),\n    };\n    const id = await this.users.add(newUser);\n    return { ...newUser, id };\n  }\n\n  /**\n   * 根据ID获取用户信息\n   * @param id - 用户ID\n   * @returns 用户信息或undefined（如果用户不存在）\n   */\n  async getUser(id: number): Promise<User | undefined> {\n    return this.users.get(id);\n  }\n\n  /**\n   * 更新用户信息\n   * @param id - 用户ID\n   * @param updates - 要更新的用户信息部分\n   * @returns 更新的记录数\n   */\n  async updateUser(id: number, updates: Partial<User>): Promise<number> {\n    return this.users.update(id, updates);\n  }\n\n  /**\n   * 根据ID删除用户\n   * @param id - 用户ID\n   */\n  async deleteUser(id: number): Promise<void> {\n    await this.users.delete(id);\n  }\n\n  /**\n   * 获取所有用户信息\n   * @returns 用户信息数组\n   */\n  async getAllUsers(): Promise<User[]> {\n    return this.users.toArray();\n  }\n\n  // 项目相关操作\n  async createProject(\n    project: Omit<Project, \"id\" | \"createdAt\" | \"updatedAt\">\n  ): Promise<Project> {\n    const now = new Date();\n    const newProject = {\n      ...project,\n      createdAt: now,\n      updatedAt: now,\n    };\n    const id = await this.projects.add(newProject);\n    return { ...newProject, id };\n  }\n\n  async getProject(id: number): Promise<Project | undefined> {\n    return this.projects.get(id);\n  }\n\n  async updateProject(id: number, updates: Partial<Project>): Promise<number> {\n    return this.projects.update(id, { ...updates, updatedAt: new Date() });\n  }\n\n  async deleteProject(id: number): Promise<void> {\n    await this.projects.delete(id);\n  }\n\n  async getUserProjects(userId: number): Promise<Project[]> {\n    return this.projects.where(\"userId\").equals(userId).toArray();\n  }\n\n  // 风格配置相关操作\n  async createStyleConfig(\n    config: Omit<StyleConfig, \"id\" | \"createdAt\" | \"updatedAt\">\n  ): Promise<StyleConfig> {\n    const now = new Date();\n    const newConfig = {\n      ...config,\n      createdAt: now,\n      updatedAt: now,\n    };\n\n    // 如果设置为默认，取消其他默认配置\n    if (newConfig.isDefault) {\n      await this.styleConfigs\n        .where({ userId: newConfig.userId, isDefault: true })\n        .modify({ isDefault: false, updatedAt: now });\n    }\n\n    const id = await this.styleConfigs.add(newConfig);\n    return { ...newConfig, id };\n  }\n\n  async getStyleConfig(id: number): Promise<StyleConfig | undefined> {\n    return this.styleConfigs.get(id);\n  }\n\n  async updateStyleConfig(\n    id: number,\n    updates: Partial<StyleConfig>\n  ): Promise<number> {\n    const now = new Date();\n\n    // 如果设置为默认，取消其他默认配置\n    if (updates.isDefault) {\n      const config = await this.styleConfigs.get(id);\n      if (config) {\n        await this.styleConfigs\n          .where({ userId: config.userId, isDefault: true })\n          .modify({ isDefault: false, updatedAt: now });\n      }\n    }\n\n    return this.styleConfigs.update(id, { ...updates, updatedAt: now });\n  }\n\n  async deleteStyleConfig(id: number): Promise<void> {\n    await this.styleConfigs.delete(id);\n  }\n\n  async getUserStyleConfigs(userId: number): Promise<StyleConfig[]> {\n    return this.styleConfigs.where(\"userId\").equals(userId).toArray();\n  }\n\n  async getDefaultStyleConfig(\n    userId: number\n  ): Promise<StyleConfig | undefined> {\n    return this.styleConfigs.where({ userId, isDefault: true }).first();\n  }\n\n  // 提示词生成记录相关操作\n  async createPromptRecord(\n    record: Omit<PromptRecord, \"id\" | \"created_at\">\n  ): Promise<PromptRecord> {\n    const newRecord = {\n      ...record,\n      created_at: new Date(),\n    };\n    const id = await this.promptRecords.add(newRecord);\n    return { ...newRecord, id };\n  }\n\n  async getPromptRecord(id: number): Promise<PromptRecord | undefined> {\n    return this.promptRecords.get(id);\n  }\n\n  async updatePromptRecord(\n    id: number,\n    updates: Partial<PromptRecord>\n  ): Promise<number> {\n    return this.promptRecords.update(id, updates);\n  }\n\n  async deletePromptRecord(id: number): Promise<void> {\n    await this.promptRecords.delete(id);\n  }\n\n  async getUserPromptRecords(\n    user_id: number,\n    limit?: number\n  ): Promise<PromptRecord[]> {\n    const query = this.promptRecords\n      .where(\"user_id\")\n      .equals(user_id)\n      .sortBy(\"created_at\")\n      .then((records) => records.reverse()); // 先排序，再反转，实现倒序\n\n    if (limit) {\n      return (await query).slice(0, limit);\n    }\n    return query;\n  }\n\n  async searchPromptRecords(\n    user_id: number,\n    keyword: string,\n    limit?: number\n  ): Promise<PromptRecord[]> {\n    const allRecords = await this.getUserPromptRecords(user_id);\n\n    const filteredRecords = allRecords.filter((record) => {\n      const searchText = JSON.stringify(record).toLowerCase();\n      return searchText.includes(keyword.toLowerCase());\n    });\n\n    if (limit) {\n      return filteredRecords.slice(0, limit);\n    }\n    return filteredRecords;\n  }\n\n  async getRecentPromptRecords(\n    user_id: number,\n    days: number = 7\n  ): Promise<PromptRecord[]> {\n    const cutoffDate = new Date();\n    cutoffDate.setDate(cutoffDate.getDate() - days);\n\n    return this.promptRecords\n      .where(\"user_id\")\n      .equals(user_id)\n      .and((record) => (record.created_at || new Date(0)) >= cutoffDate)\n      .sortBy(\"created_at\")\n      .then((records) => records.reverse());\n  }\n\n  // API Key 相关操作\n  async createApiKey(\n    apiKey: Omit<ApiKey, \"id\" | \"created_at\">\n  ): Promise<ApiKey> {\n    console.log(\"Creating new API Key:\", apiKey);\n    const newApiKey = {\n      ...apiKey,\n      created_at: new Date(),\n    };\n\n    // 如果设置为当前使用的 API Key，取消其他 API Key 的当前状态\n    if (newApiKey.is_current) {\n      console.log(\n        \"Setting new API Key as current, updating existing current keys...\"\n      );\n      await this.apiKeys\n        .where({ user_id: newApiKey.user_id, is_current: true })\n        .modify({ is_current: false });\n    }\n\n    const id = await this.apiKeys.add(newApiKey);\n    const createdApiKey = { ...newApiKey, id };\n    console.log(\"Created API Key:\", createdApiKey);\n    return createdApiKey;\n  }\n\n  async getApiKey(id: number): Promise<ApiKey | undefined> {\n    return this.apiKeys.get(id);\n  }\n\n  async updateApiKey(id: number, updates: Partial<ApiKey>): Promise<number> {\n    // 如果设置为当前使用的 API Key，取消其他 API Key 的当前状态\n    if (updates.is_current) {\n      const apiKey = await this.apiKeys.get(id);\n      if (apiKey) {\n        await this.apiKeys\n          .where({ user_id: apiKey.user_id, is_current: true })\n          .modify({ is_current: false });\n      }\n    }\n\n    return this.apiKeys.update(id, updates);\n  }\n\n  async deleteApiKey(id: number): Promise<void> {\n    await this.apiKeys.delete(id);\n  }\n\n  async getUserApiKeys(user_id: number): Promise<ApiKey[]> {\n    return this.apiKeys.where(\"user_id\").equals(user_id).toArray();\n  }\n\n  async getCurrentApiKey(user_id: number): Promise<ApiKey | undefined> {\n    // 优化查询：先获取所有该用户的API Key，然后找到is_current为true的那个\n    // 避免使用复合查询 {user_id, is_current} 来消除性能警告\n    const userApiKeys = await this.apiKeys\n      .where(\"user_id\")\n      .equals(user_id)\n      .toArray();\n\n    const currentApiKey = userApiKeys.find((key) => key.is_current);\n    return currentApiKey;\n  }\n\n  // 歌词记录相关操作\n  async createLyricsRecord(\n    record: Omit<LyricsRecord, \"id\">\n  ): Promise<LyricsRecord> {\n    const newRecord = {\n      ...record,\n      created_at: record.created_at || new Date(),\n    };\n    const id = await this.lyricsRecords.add(newRecord);\n    return { ...newRecord, id };\n  }\n\n  async getLyricsRecord(id: number): Promise<LyricsRecord | undefined> {\n    return this.lyricsRecords.get(id);\n  }\n\n  async updateLyricsRecord(\n    id: number,\n    updates: Partial<LyricsRecord>\n  ): Promise<number> {\n    return this.lyricsRecords.update(id, updates);\n  }\n\n  async deleteLyricsRecord(id: number): Promise<void> {\n    await this.lyricsRecords.delete(id);\n  }\n\n  async getAllLyricsRecords(limit?: number): Promise<LyricsRecord[]> {\n    const records = await this.lyricsRecords.toArray();\n    const sortedRecords = records.sort(\n      (a, b) => (b.created_at?.getTime() || 0) - (a.created_at?.getTime() || 0)\n    );\n\n    if (limit) {\n      return sortedRecords.slice(0, limit);\n    }\n    return sortedRecords;\n  }\n\n  async searchLyricsRecords(\n    keyword: string,\n    limit?: number\n  ): Promise<LyricsRecord[]> {\n    const allRecords = await this.getAllLyricsRecords();\n\n    const filteredRecords = allRecords.filter((record) => {\n      const searchText = JSON.stringify(record).toLowerCase();\n      return searchText.includes(keyword.toLowerCase());\n    });\n\n    if (limit) {\n      return filteredRecords.slice(0, limit);\n    }\n    return filteredRecords;\n  }\n\n  async getRecentLyricsRecords(days: number = 7): Promise<LyricsRecord[]> {\n    const cutoffDate = new Date();\n    cutoffDate.setDate(cutoffDate.getDate() - days);\n\n    const records = await this.lyricsRecords.toArray();\n    const filteredRecords = records.filter(\n      (record) => (record.created_at || new Date(0)) >= cutoffDate\n    );\n    const sortedRecords = filteredRecords.sort(\n      (a, b) => (b.created_at?.getTime() || 0) - (a.created_at?.getTime() || 0)\n    );\n    return sortedRecords;\n  }\n}\n\n// 导出类\nexport default AppDatabase;\n\n// 导出单例实例\nexport const db = new AppDatabase();\n\n// 导出类型\nexport type { User, Project, StyleConfig, PromptRecord, ApiKey, LyricsRecord };\n","/**\n * 歌词创作枚举配置\n * 集中管理所有歌词创作业务所需的枚举选项\n */\n\nexport interface EnumOption {\n  value: string | number; // 唯一标识\n  label: string; // 下拉框主标题\n  description?: string; // 下拉框副标题/说明\n  tooltip_example?: string; // 鼠标悬浮显示的举例\n  prompt_instruction?: string; // 核心：传递给 AI 的完整结构指令\n}\n\n/**\n * 歌词创作枚举配置 (完整版)\n * 包含 UI 展示字段 (label, description) 和 AI 指令字段 (prompt_instruction)\n */\n\nexport interface EnumOption {\n  value: string | number; // 唯一标识\n  label: string; // 下拉框主标题\n  description?: string; // 下拉框副标题/说明\n  tooltip_example?: string; // 鼠标悬浮显示的举例\n  prompt_instruction?: string; // 核心：传递给 AI 的完整结构指令 (Instruction)\n}\n\n/**\n * 歌曲语言枚举配置\n * 指令重点：规定语种和特殊的押韵逻辑\n */\nexport const SONG_LANGUAGE_OPTIONS: EnumOption[] = [\n  {\n    value: \"mandarin\",\n    label: \"华语 Mandopop\", // 修改点：专业术语，涵盖两岸三地及新马\n    description: \"标准普通话，押韵遵循汉语拼音规则\", // 描述保持“普通话”以明确语言技术标准\n    prompt_instruction:\n      \"【语言要求】：必须使用标准的现代普通话创作。押韵请严格遵循汉语拼音韵辙（如十三辙）。\",\n  },\n  {\n    value: \"cantonese\",\n    label: \"粤语 Cantopop\",\n    description: \"遵循粤语九声六调，参考港式流行曲风格\",\n    prompt_instruction: `\n【语言要求】：\n1. 必须使用地道的粤语创作，以【香港流行曲 (Hong Kong Cantopop)】为风格基准。\n2. 【关键】：请寻找“雅”与“俗”的平衡。主要使用“协音的书面语”（Standard Written Chinese that fits Cantonese tones），但在情感爆发点可适当使用地道口语字（如‘唔’、‘係’、‘嗰’、‘嘅’）来增加亲切感。\n3. 允许适度混入英文单词（如 Party, Lonely），体现都市感。\n4. 必须严格遵守粤语的九声六调音韵（协音），歌词唱起来不能“倒字”（即字音与旋律走向不冲突）。\n`,\n  },\n  {\n    value: \"minnan\",\n    label: \"闽南语 Hokkien\", // 1. 修改 Label：用 Hokkien 与 Mandopop/Cantopop 对应，显得国际化且专业\n    description: \"台语/闽南语，韵味独特，适合表达沧桑、拼搏或江湖情\", // 2. 修改描述：更具体，指出适合写什么\n    prompt_instruction:\n      \"【语言要求】：必须使用地道的闽南语（台语）创作。1. 词汇：请务必使用‘伊’(他)、‘咱’(我们)、‘毋’(不)、‘逗阵’(在一起)等台语专用词，严禁直接把普通话转繁体。2. 风格：请着重体现‘沧桑感’、‘宿命论’（如运命、安排）或‘打拼精神’（爱拼才会赢），韵脚要响亮有力，体现男儿气概或女性的坚韧。\",\n  },\n];\n\nexport type SongLanguage = (typeof SONG_LANGUAGE_OPTIONS)[number][\"value\"];\n\n/**\n * 歌曲风格枚举配置\n * 指令重点：规定词汇库(Vocabulary)和语气(Tone)\n */\nexport const SONG_STYLE_OPTIONS: EnumOption[] = [\n  {\n    value: \"lyrical_pop\",\n    label: \"抒情流行 Ballad\",\n    description: \"情感细腻，旋律优美，适合走心叙事\",\n    prompt_instruction:\n      \"【风格定义】：华语抒情流行歌。基调：感性、细腻、温柔。意象：请多用具象的生活场景（如雨天、街角、旧照片）来烘托情感。句式要流畅优美，富有呼吸感。\",\n  },\n  {\n    value: \"rnb\",\n    label: \"R&B / Soul\",\n    description: \"节奏布鲁斯，律动感强，转音丰富\",\n    prompt_instruction:\n      \"【风格定义】：R&B/Soul 风格。基调：律动感强、慵懒、浪漫或略带忧伤。技巧：请在歌词中设计切分音的感觉，多用长短句交替，语言可以更口语化、更有都市感。\",\n  },\n  {\n    value: \"rap\",\n    label: \"说唱 Rap/Hip-Hop\",\n    description: \"节奏紧凑，押韵密集，态度鲜明\",\n    prompt_instruction:\n      \"【风格定义】：嘻哈/说唱。基调：自信、有冲击力、态度鲜明。硬性要求：必须极度重视押韵（建议多尝试双押或三押），句子Flow要紧凑，要有梗（Punchline）。\",\n  },\n  {\n    value: \"chinese_style\",\n    label: \"国风 Chinese Style\",\n    description: \"融合传统元素，辞藻华丽，意境唯美\",\n    prompt_instruction:\n      \"【风格定义】：新国风/古风。基调：唯美、古典、怀旧。词汇：请大量使用古典意象（如明月、残酒、长剑、落花、红尘）。严禁出现现代科技词汇（如手机、网络）。\",\n  },\n  {\n    value: \"rock\",\n    label: \"摇滚 Rock\",\n    description: \"力量感强，直白宣泄，甚至是嘶吼\",\n    prompt_instruction:\n      \"【风格定义】：流行摇滚。基调：热血、叛逆、沧桑或撕裂。词汇：使用强有力的动词，表达渴望自由、挣扎或不妥协的态度。拒绝无病呻吟，要直抒胸臆。\",\n  },\n  {\n    value: \"folk\",\n    label: \"民谣 Folk\",\n    description: \"朴实自然，像散文诗一样的叙事\",\n    prompt_instruction:\n      \"【风格定义】：城市民谣。基调：真诚、质朴、叙事性强。写法：像讲故事一样娓娓道来，关注生活中的微小细节。词藻不需要华丽，但要能打动人心。\",\n  },\n  {\n    value: \"electronic_pop\",\n    label: \"电子流行 Synth Pop\",\n    description: \"迷幻或动感，注重氛围感营造\",\n    prompt_instruction:\n      \"【风格定义】：电子流行/EDM。基调：梦幻、未来感或动感。结构：歌词不需要太复杂，重点在于重复的Hook（记忆点）和氛围感的营造。\",\n  },\n];\n\nexport type SongStyle = (typeof SONG_STYLE_OPTIONS)[number][\"value\"];\n\n/**\n * 曲式结构枚举配置\n * 指令重点：Tags 必须英文，解释必须中文\n */\nexport const SONG_STRUCTURE_OPTIONS: EnumOption[] = [\n  {\n    value: \"standard_pop\",\n    label: \"经典流行 ABAB\",\n    description: \"最稳妥结构：主歌铺垫-副歌高潮，含过门与桥段\",\n    tooltip_example: \"例：周杰伦《简单爱》、大多数华语情歌\",\n    prompt_instruction: `\n请严格按照以下结构进行创作：\n[Intro]\n(前奏：纯音乐，营造情绪氛围，无需歌词)\n\n[Verse 1]\n (主歌1：故事开篇，平稳叙事，交代背景)\n\n[Chorus]\n(副歌：全曲核心，情感爆发，最洗脑的记忆点)\n\n[Verse 2]\n(主歌2：推进情节，细节描写)\n\n[Chorus]\n(副歌：重复核心旋律，加强记忆)\n\n[Bridge]\n(桥段：情绪转折或升华，打破重复感，准备最后冲刺)\n\n[Chorus]\n(副歌：最后的高潮爆发)\n\n[Outro]\n(尾奏：情绪渐落，余音绕梁)\n\n`,\n  },\n  {\n    value: \"verse_pre_chorus\",\n    label: \"层递进阶 Pre-Chorus\",\n    description: \"增加'导歌'段落，情绪层层递进，适合大线条抒情歌\",\n    tooltip_example: \"例：邓紫棋《泡沫》（主歌 -> 预副歌 -> 副歌）\",\n    prompt_instruction: `\n请严格按照以下结构进行创作：\n[Intro]\n (前奏：器乐引入)\n\n[Verse 1]\n(主歌1：低吟浅唱，叙事铺垫)\n\n[Pre-Chorus]\n (导歌：情绪爬坡，如同暴风雨前的宁静)\n\n[Chorus]\n(副歌：彻底释放，情感宣泄)\n\n[Verse 2]\n(主歌2：延续情绪，深入内心)\n\n[Pre-Chorus]\n (导歌：再次蓄力，准备爆发)\n\n[Chorus]\n(副歌：情感宣泄)\n\n[Bridge]\n(高音/独白：全曲最高亢或最深刻的时刻)\n\n[Chorus]\n(副歌：最后的辉煌)\n\n[Outro]\n(尾奏：慢慢结束)\n`,\n  },\n  {\n    value: \"hook_first\",\n    label: \"倒叙/开门见山\",\n    description: \"开篇即副歌(Hook)，瞬间抓住听众耳朵，适合短视频\",\n    tooltip_example: \"例：凤凰传奇《最炫民族风》、抖音神曲\",\n    prompt_instruction: `\n请严格按照以下结构进行创作（倒叙结构）：\n[Chorus]\n(副歌前置：开篇即高潮！第一句就要抓住听众耳朵)\n\n[Verse 1]\n(主歌：回溯故事原委，解释背景)\n\n[Pre-Chorus]\n (导歌：情绪推进)\n\n[Chorus]\n(副歌：强化核心记忆点)\n\n[Verse 2]\n(主歌：故事发展)\n\n[Chorus]\n(副歌：全场大合唱的感觉)\n\n[Outro]\n(尾奏：短促有力或淡出)\n`,\n  },\n  {\n    value: \"double_verse_chorus\",\n    label: \"叙事铺陈 AAB\",\n    description: \"双段主歌连续叙事，再进副歌。适合信息量大的故事\",\n    tooltip_example: \"例：李宗盛《山丘》（大段念白式主歌）\",\n    prompt_instruction: `\n请严格按照以下结构进行创作（长叙事）：\n[Intro]\n (前奏：舒缓，像讲故事的开场)\n\n[Verse 1]\n(主歌1：第一层叙事，娓娓道来)\n\n[Verse 2]\n(主歌2：第二层叙事，深化细节，暂不进副歌)\n\n[Chorus]\n(副歌：总结感悟，情感的总爆发)\n\n[Verse 3]\n(主歌3：新的视角或反思)\n\n[Chorus]\n(副歌：再次爆发)\n\n[Outro]\n(尾奏：独白或留白)\n`,\n  },\n  {\n    value: \"narrative\",\n    label: \"民谣/独白 Narrative\",\n    description: \"弱化副歌，像讲故事一样娓娓道来，依靠旋律循环\",\n    tooltip_example: \"例：赵雷《成都》、朴树《白桦林》\",\n    prompt_instruction: `\n请严格按照以下结构进行创作（民谣体）：\n[Intro]\n (前奏：吉他或钢琴独奏)\n\n[Verse 1]\n(第一段：画面描写)\n\n[Verse 2]\n(第二段：叙事推进)\n\n[Interlude]\n(间奏：器乐独奏，口琴或吉他，给予呼吸空间)\n\n[Verse 3]\n(第三段：情感深化)\n\n[Verse 4]\n(第四段：结局或远去)\n\n[Outro]\n(尾奏：轻声结束)\n(注意：此结构不强调爆发式副歌，注重歌词的流淌感)\n`,\n  },\n  {\n    value: \"free\",\n    label: \"自由结构 Free Form\",\n    description: \"不拘泥于固定格式，随情绪起伏而变化\",\n    tooltip_example: \"例：王菲《浮躁》、实验音乐\",\n    prompt_instruction: `\n请严格按照以下结构进行创作（自由体）：\n[Intro]\n (前奏)\n\n[Verse]\n(主歌：自由表达)\n\n[Chorus]\n(副歌：随情绪插入)\n\n(自由发挥：根据歌词意境，自由插入 [Bridge] 桥段或 [Interlude] 间奏)\n\n[Outro]\n(尾奏)\n`,\n  },\n];\n\nexport type SongStructure = (typeof SONG_STRUCTURE_OPTIONS)[number][\"value\"];\n\n/**\n * 创作模式枚举配置\n * 指令重点：规定是对素材的“翻译”还是“发散”\n */\nexport const CREATION_MODE_OPTIONS: EnumOption[] = [\n  {\n    value: \"new\",\n    label: \"新写\",\n    description: \"按原始素材意思，全新创作\",\n    prompt_instruction:\n      \"【创作模式】：全新创作。请理解用户提供的素材核心含义，然后完全用新的语言、新的歌词结构重新撰写。不要直接照搬原始素材的句子。\",\n  },\n  {\n    value: \"expand\",\n    label: \"扩写\",\n    description: \"保留原始素材原句，进行扩写\",\n    prompt_instruction:\n      \"【创作模式】：基于原句扩写。请尽量保留用户提供素材中的金句或核心句子，在此基础上进行延伸、补充和润色，使其成为一首完整的歌词。\",\n  },\n];\n\nexport type CreationMode = (typeof CREATION_MODE_OPTIONS)[number][\"value\"];\n\n/**\n * 叙事人设枚举配置\n * 指令重点：规定代词的使用 (我/你/他)\n */\nexport const PERSONA_OPTIONS: EnumOption[] = [\n  {\n    value: \"unlimited\",\n    label: \"不限\",\n    description: \"不限制叙事视角，AI 自由选择\",\n    prompt_instruction: \"不限制叙事视角，AI 自由选择\",\n  },\n  {\n    value: \"first_person\",\n    label: \"第一人称 (我)\",\n    description: '以\"我\"的视角叙述，强调代入感',\n    prompt_instruction:\n      \"【叙事视角】：第一人称。请使用“我”作为主语，注重描写主观感受、内心独白，让听众产生强烈的代入感。\",\n  },\n  {\n    value: \"second_person\",\n    label: \"第二人称 (你)\",\n    description: '以\"你\"的视角叙述，强调对话感',\n    prompt_instruction:\n      \"【叙事视角】：第二人称。请使用“你”作为倾诉对象，仿佛在面对面对话，或者在读一封写给对方的信。\",\n  },\n  {\n    value: \"third_person\",\n    label: \"第三人称\",\n    description: \"上帝视角，讲述别人的故事\",\n    prompt_instruction:\n      \"【叙事视角】：第三人称。请使用上帝视角（他/她/他们）来讲述一个故事，保持客观冷静或像讲故事的人一样。\",\n  },\n  {\n    value: \"observer\",\n    label: \"旁观叙事\",\n    description: \"像电影镜头一样记录，不带入主观评判\",\n    prompt_instruction:\n      \"【叙事视角】：旁观者。像一台摄像机一样记录画面和发生的事，尽量减少主观的情绪评价，通过画面细节来映射情感。\",\n  },\n  {\n    value: \"duet\",\n    label: \"男女对唱/对话\",\n    description: \"模仿男女对话或合唱，歌词中标注男/女\",\n    prompt_instruction:\n      \"【叙事视角】：男女对唱/对话。这首歌是两个人的互动。请务必在每一段歌词前清楚地标注 [Male] (男声部分)、[Female] (女声部分) 或 [Together] (合唱部分)。歌词内容要体现两人之间的对话感。\",\n  },\n];\n\nexport type Persona = (typeof PERSONA_OPTIONS)[number][\"value\"];\n\n/**\n * 用词风格枚举配置 (V2.0 扩充版)\n * 指令重点：规定词汇的难易度、修辞浓度以及性别气质\n */\nexport const WORDING_STYLE_OPTIONS: EnumOption[] = [\n  // --- 原有基础风格 ---\n  {\n    value: \"colloquial\",\n    label: \"大白话 / 口语\",\n    description: \"直白、不做作，贴近生活\",\n    prompt_instruction:\n      \"【用词风格】：极度口语化。请使用日常生活中最简单的词汇，像平时聊天一样自然。严禁堆砌辞藻，拒绝成语和生僻字。\",\n  },\n  {\n    value: \"literary\",\n    label: \"文艺 / 诗意\",\n    description: \"善用修辞和意象，优美含蓄\",\n    prompt_instruction:\n      \"【用词风格】：文艺诗意。请多使用比喻、拟人等修辞手法。用词要优美、含蓄，注重意境的营造，避免太直白的大白话。\",\n  },\n\n  // --- 新增：性别/气质维度 ---\n  {\n    value: \"feminine_delicate\",\n    label: \"细腻 / 柔情 (女性视角)\",\n    description: \"注重微观感官描写，捕捉敏感脆弱的情绪\",\n    prompt_instruction:\n      \"【用词风格】：细腻柔美（女性视角）。请注重“微观感官”的描写（如：指尖的温度、呼吸的频率）。用词要敏感、柔软、具有易碎感，多挖掘内心深处的纠结与细腻独白。\",\n  },\n  {\n    value: \"masculine_rough\",\n    label: \"沧桑 / 豪迈 (男性视角)\",\n    description: \"硬朗、深沉，注重责任与行动，拒绝矫情\",\n    prompt_instruction:\n      \"【用词风格】：沧桑豪迈（男性视角）。请使用更具“颗粒感”和“重量感”的词汇（如：肩膀、风雨、胸膛、沉默）。语气要深沉、硬朗，多写责任与行动，拒绝过度矫情的小女生词汇。\",\n  },\n\n  // --- 原有进阶风格 ---\n  {\n    value: \"restrained\",\n    label: \"克制 / 隐忍\",\n    description: \"哀而不伤，用冷静的词写深沉的情\",\n    prompt_instruction:\n      \"【用词风格】：克制内敛。情感表达要隐忍，不要大喊大叫。通过细节描写来侧面烘托深沉的情感，做到“哀而不伤”。\",\n  },\n  {\n    value: \"intense\",\n    label: \"情绪浓烈 / 抓马\",\n    description: \"爱恨分明，用词犀利，宣泄感强\",\n    prompt_instruction:\n      \"【用词风格】：情绪浓烈。用词要犀利、有爆发力。多使用强烈的形容词和感叹句，直抒胸臆，淋漓尽致地宣泄爱恨。\",\n  },\n  {\n    value: \"stream_of_consciousness\",\n    label: \"意识流 / 王菲式\",\n    description: \"跳跃、抽象、碎片化，不追求逻辑\",\n    prompt_instruction:\n      \"【用词风格】：意识流。歌词逻辑可以跳跃、破碎、抽象。注重营造迷离的氛围和独特的画面感，不强求叙事的连贯性。\",\n  },\n];\n\nexport type WordingStyle = (typeof WORDING_STYLE_OPTIONS)[number][\"value\"];\n\n/**\n * 押韵类型枚举配置\n * 指令重点：规定押韵的密度和方式\n */\nexport const RHYME_TYPE_OPTIONS: EnumOption[] = [\n  {\n    value: \"mix\",\n    label: \"分段换韵 (标准)\",\n    description: \"主歌和副歌使用不同韵脚，层次更丰富\",\n    prompt_instruction:\n      \"【押韵规则】：分段换韵。主歌部分使用一种韵脚，副歌部分请更换为另一种韵脚（最好是开口音，如a/o/e），以区分层次并推动情绪。\",\n  },\n  {\n    value: \"single\",\n    label: \"单押\",\n    description: \"句尾单字押韵，简单直接\",\n    prompt_instruction:\n      \"【押韵规则】：单押。每一句歌词的最后一个字必须押韵。保持韵脚的统一性。\",\n  },\n  {\n    value: \"double\",\n    label: \"双押\",\n    description: \"句尾双字押韵，律动感更强\",\n    prompt_instruction:\n      \"【押韵规则】：双押。尝试让每句歌词的最后两个字都押韵（例如：‘光明’押‘长行’）。这通常用于说唱或R&B风格，以增加律动感。\",\n  },\n  {\n    value: \"unified\",\n    label: \"一韵到底\",\n    description: \"全篇使用同一个韵脚，难度高\",\n    prompt_instruction:\n      \"【押韵规则】：一韵到底。整首歌曲，从头到尾严格使用同一个韵脚，中途不得换韵。\",\n  },\n];\n\nexport type RhymeType = (typeof RHYME_TYPE_OPTIONS)[number][\"value\"];\n\n/**\n * 输出方案数量枚举配置\n */\nexport const OUTPUT_COUNT_OPTIONS: EnumOption[] = [\n  {\n    value: 1,\n    label: \"1个\",\n    prompt_instruction: \"请提供 1 个完整的创作方案。\",\n  },\n  {\n    value: 3,\n    label: \"3个\",\n    prompt_instruction: \"请提供 3 个风格略有差异的完整创作方案，以便用户选择。\",\n  },\n];\n\nexport type OutputCount = (typeof OUTPUT_COUNT_OPTIONS)[number][\"value\"];\n\n/**\n * 贴近度枚举配置\n * 指令重点：规定模仿的深度 (神韵 vs 词汇)\n */\nexport const CLOSENESS_LEVEL_OPTIONS: EnumOption[] = [\n  {\n    value: 1,\n    label: \"只借神韵\",\n    description: \"只学大师的那种感觉，但用你自己的话写\",\n    tooltip_example: \"例：用李宗盛的沧桑感写程序员，但不出现“凡人”这种老词\",\n    prompt_instruction:\n      \"【模仿强度】：Level 1 (神韵)。请参考大师的【情感逻辑】和【观察角度】，但严禁使用大师的惯用词汇。请用完全现代、属于用户自己的语言体系来表达。\",\n  },\n  {\n    value: 2,\n    label: \"学他说话\",\n    description: \"模仿大师的口头禅和叙事角度\",\n    tooltip_example: \"例：像方文山那样用讲电影画面的方式说话\",\n    prompt_instruction:\n      \"【模仿强度】：Level 2 (语气)。请模仿大师的【叙事口吻】（例如：旁观者的冷静、或者过来人的感叹）。学习他说话的方式，但歌词内容结构保持常规。\",\n  },\n  {\n    value: 3,\n    label: \"学他招式 (推荐)\",\n    description: \"学习大师的经典写法和套路\",\n    tooltip_example: \"例：像周杰伦/方文山那样大量使用倒装句\",\n    prompt_instruction:\n      \"【模仿强度】：Level 3 (技法)。请重点模仿大师的【修辞技法】和【句式结构】（例如：倒装句、排比、长短句的呼吸感）。这是模仿的平衡点，既要有大师的影子，又要通顺。\",\n  },\n  {\n    value: 4,\n    label: \"用他词汇\",\n    description: \"大量使用大师爱用的招牌词汇\",\n    tooltip_example: \"例：歌词里必须出现“斑驳、红尘”等大师专属词汇\",\n    prompt_instruction:\n      \"【模仿强度】：Level 4 (遣词)。请大量使用该大师风格卡中记录的【高频词汇】和【标志性意象】。让歌词一眼看去就像是该大师的作品，词汇重合度要高。\",\n  },\n  {\n    value: 5,\n    label: \"仿佛本人\",\n    description: \"以假乱真，仿佛是未发布的新歌\",\n    tooltip_example: \"例：完全沉浸在那个年代，连生僻字都一模一样\",\n    prompt_instruction:\n      \"【模仿强度】：Level 5 (复刻)。请完全沉浸在大师的语境中，允许‘过拟合’。即便牺牲一定的现代通顺度，也要极致还原大师的用词癖好、生僻字和特定的年代感。\",\n  },\n];\n\nexport type ClosenessLevel = (typeof CLOSENESS_LEVEL_OPTIONS)[number][\"value\"];\n"],"names":[],"mappings":"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,2EACb,mBACE,sUACJ,EAGA,CACE,MAAO,oBACP,MAAO,yDACP,YAAa,+GACb,mBACE,gdACJ,EACA,CACE,MAAO,kBACP,MAAO,yDACP,YAAa,+GACb,mBACE,ofACJ,EAGA,CACE,MAAO,aACP,MAAO,8BACP,YAAa,6FACb,mBACE,gUACJ,EACA,CACE,MAAO,UACP,MAAO,0CACP,YAAa,uFACb,mBACE,0TACJ,EACA,CACE,MAAO,0BACP,MAAO,0CACP,YAAa,6FACb,mBACE,gUACJ,EACD,CAQY,EAAmC,CAC9C,CACE,MAAO,MACP,MAAO,0CACP,YAAa,yGACb,mBACE,mWACJ,EACA,CACE,MAAO,SACP,MAAO,eACP,YAAa,qEACb,mBACE,oNACJ,EACA,CACE,MAAO,SACP,MAAO,eACP,YAAa,2EACb,mBACE,uWACJ,EACA,CACE,MAAO,UACP,MAAO,2BACP,YAAa,iFACb,mBACE,sOACJ,EACD,CAOY,EAAqC,CAChD,CACE,MAAO,EACP,MAAO,UACP,mBAAoB,6EACtB,EACA,CACE,MAAO,EACP,MAAO,UACP,mBAAoB,2JACtB,EACD,CAQY,EAAwC,CACnD,CACE,MAAO,EACP,MAAO,2BACP,YAAa,+GACb,gBAAiB,qKACjB,mBACE,kZACJ,EACA,CACE,MAAO,EACP,MAAO,2BACP,YAAa,iFACb,gBAAiB,qHACjB,mBACE,4YACJ,EACA,CACE,MAAO,EACP,MAAO,0CACP,YAAa,2EACb,gBAAiB,gHACjB,mBACE,wcACJ,EACA,CACE,MAAO,EACP,MAAO,2BACP,YAAa,iFACb,gBAAiB,6IACjB,mBACE,kZACJ,EACA,CACE,MAAO,EACP,MAAO,2BACP,YAAa,uFACb,gBAAiB,iIACjB,mBACE,0aACJ,EACD"}