## 产品名称

**大师写歌词（LyricCraft）**
隶属于：**Suno 翻唱编曲大师**

***

## 1. 产品背景与目标

### 1.1 背景

在 AI 音乐创作流程中，逐渐形成了一条被大量创作者验证过的“真实路径”：

1. 创作者先有一个主题 / 情绪 / 少量歌词片段

2. 借助 AI 不断**扩写、重写、微调歌词**，反复打磨（通常需要数小时到 1 天）

3. 当歌词成熟后，再交给音乐生成工具（如 Suno）完成作曲、演唱

现有问题在于：

* 通用 AI 对话工具**不理解歌词的音乐性要求**（押韵、曲式、可唱性）

* “模仿大师风格”这件事，用户知道有用，但不知道**如何安全、可控地去模仿**

* 参数全部混在自然语言里，**试错成本极高**

* 生成内容一旦关闭页面即丢失，难以复盘与对比

***

### 1.2 产品目标

歌词创作器的目标是：

* 将“作词创作”**结构化、参数化**

* 将“模仿写法”转化为**可调节的创作策略**

* 输出**真正可唱、可反复修改**的歌词

* 与「翻唱编曲大师」形成**清晰解耦但顺畅衔接**的创作流程

***

## 2. 用户画像

### 2.1 目标用户

* AI 原创音乐创作者

* 翻唱创作者

* 音乐类自媒体博主

* 有审美与音乐感，但缺乏系统作词训练的用户

### 2.2 用户特征

* 接受 AI、并愿意反复使用

* 能分辨“好歌词 / 坏歌词”

* 不追求一次生成即完美，而是**可打磨性**

***

## 3. 产品整体结构

### 3.1 一级功能模块

```plain&#x20;text
歌词创作器
├── 歌词生成（核心）
│   ├── 表单配置
│   ├── AI 生成
│   └── 本地保存
└── 记录查询
    ├── 历史列表
    ├── 记录详情
    └── 删除
```

***

## 4. 功能一：歌词生成

### 4.1 使用流程

1. 用户填写歌词生成表单

2. 点击【生成歌词】

3. 前端组装 Prompt → 调用 LLM API

4. LLM 返回完整歌词

5. **将以下内容整体写入 IndexedDB：**

   * 歌曲名称

   * 用户填写的全部表单（序列化字符串）

   * AI 生成的歌词文本

   * 创建时间

***

### 4.2 歌词生成表单设计

#### 4.2.1 歌曲名称（新增）

* 控件类型：Input（单行）

* 必填：是

* 用途：

  * 本地记录索引

  * 历史列表展示

* 校验规则：

  * 不可为空

  * 最大长度 50 字

***

### 4.2.2 歌曲语言

* 控件类型：Radio

* 必填：是

* 枚举：

  * 普通话

  * 粤语

  * 闽南语

* 影响：

  * 押韵规则

  * 用词体系

  * 句法结构

***

### 4.2.3 歌曲风格

* 控件类型：Select（可搜索）

* 必填：是

* 枚举示例：

  * 抒情流行

  * R\&B

  * 说唱

  * 中国风

  * 摇滚

  * 民谣

  * 电子流行

***

### 4.2.4 创作模式

* 控件类型：Radio

* 必填：是

* 枚举：

  * 新写（按原始素材意思，全新创作）

  * 扩写（保留原始素材原句，进行扩写）

***

### 4.2.5 曲式结构

* 控件类型：Select

* 必填：是

* 枚举：

  * 标准流行（主歌-副歌）

  * 主歌-预副歌-副歌

  * 双主歌 + 副歌

  * 叙事型（弱副歌）

  * 自由结构

***

### 4.2.6 原始素材（主题 / 大意 / 歌词片段）

* 控件类型：Textarea

* 必填：是

* 支持：

  * 多行输入

* 规则：

  * 每一行视为一个参考素材

* 校验：

  * 必填

  * 最多 1000 字

***

### 4.2.7 创作要求（可选）

* 控件类型：Textarea

* 必填：否

* 示例：

  * 情绪走向

  * 禁止出现的内容

* 最大长度：1000 字

***

### 4.2.8 叙事人设

* 控件类型：Select

* 必填：是

* 枚举：

  * 第一人称（我）

  * 第二人称（你）

  * 第三人称

  * 旁观叙事

***

### 4.2.9 用词风格

* 控件类型：Checkbox

* 必填：否

* 枚举：

  * 口语化

  * 文艺

  * 克制

  * 情绪浓烈

  * 日常对白感

* 约束：

  * 最多选择 2 项

***

### 4.2.10 是否允许英文词汇

* 控件类型：Switch

* 默认：关闭

* 规则：

  * 关闭时，歌词中禁止出现英文单词

***

### 4.2.11 参考风格（风格卡）

* 控件类型：多选 Select

* 必填：否

* 示例：

  * 罗大佑

  * 李宗盛

  * 林夕

  * 方文山

  * 唐恬

  * 陈曦

* 说明：

  * 仅学习写作技法，不复刻原句

  * 未来会扩充更多的风格卡

  * 风格卡为系统核心资产，会在prd里面单列一个主题，讲述各个风格卡的详细信息。

  * 系统中要有风格卡的配置文件

***

### 4.2.12 参考歌词（可选）

* 控件类型：Textarea

* 必填：否

* 规则：

  * 最多 1000 字

  * 作为技法参考

  * 不要求结构对齐

***

### 4.2.13 贴近度

* 控件类型：Slider（5 档）

* 必填：是

* 档位定义：

  1. 只学感觉

  2. 学结构

  3. 学表达习惯

  4. 学句法与意象

  5. 文本层面高度相似（不复刻）

***

### 4.2.14 押韵设置

* 控件类型：组合控件

**押韵类型**

* 单押

* 双押

* 尾韵统一

**韵脚**

* 系统推荐

* 用户指定（Input）

**严格押韵**

* Switch（默认开启）

***

### 4.2.15 输出方案数量

* 控件类型：Radio

* 枚举：

  * 1 个

  * 3 个

***

## 5. AI 输出要求（摘要）

* 必须输出完整歌词

* 必须包含明确段落标签

* 严格遵守语言与押韵约束

* 不解释、不注释、不输出多余文字

***

## 6. 功能二：记录查询（IndexedDB）

### 6.1 功能目标

* 保存用户每一次创作结果

* 支持回溯、对比、复制

***

### 6.2 数据库存储原则

* 纯前端 IndexedDB

* 不做云端同步

* **以字符串为主的文档型存储**

* 仅歌曲名称作为结构化字段

***

### 6.3 IndexedDB 设计

#### Database

* Name：`lyrics_creator_db`

* Version：`1`

#### Object Store

* Name：`lyrics_records`

#### 字段设计

***

### 6.4 写入时机

* **仅在 AI 成功返回后写入**

* 写入失败需前端提示错误

***

### 6.5 记录列表功能

* 按创建时间倒序

* 展示：

  * 歌曲名称

  * 创建时间

* 操作：

  * 查看

  * 删除

***

### 6.6 记录详情功能

* 展示：

  * 歌曲名称

  * 用户表单（反序列化后展示，可折叠）

  * 歌词全文

* 操作：

  * 删除记录

***

## 7. 非目标（明确不做）

* 不做账号体系

* 不做云同步

* 不做版权判断

* 不做“是否抄袭”的程序校验

***

## 8. 成功标准（MVP）

* 一次提交即可生成“可唱歌词”

* 押韵稳定、结构清晰

* 用户愿意基于结果继续修改，而不是推翻重来

***

根据你的要求，我将围绕系统核心资产——**“风格卡（Style Cards）”**，结合 MVP 阶段的实现需求（Select 控件 + 配置文件 + Prompt 拼接），对现有的 PRD 进行深度补充和撰写。

以下是 PRD 的新增及优化章节：

***

针对您对**风格卡（Style Cards）作为系统核心资产的深度定义，我们需要在 PRD 中明确其技术实现形态**：即风格卡不再是简单的标签，而是以**细致的 Markdown 代码块**形式存在于配置文件中，用于在调用 LLM 时进行 Prompt 组装,。

以下是为您撰写的 PRD 补充章节，重点描述风格卡的配置结构与组装逻辑：

***

## 9. 核心资产：风格卡（Style Cards）系统设计

### 9.1 风格卡定义

风格卡是《大师写歌词》实现“模仿写法转化为可调节创作策略”的核心载体。每张风格卡在系统底层对应一个**独立的代码块**，使用 **Markdown 格式**撰写，允许包含复杂的换行、列表及逻辑说明，以实现对大师技法的高精度描述。

### 9.2 配置文件结构（`masterStyleConfig.js`）

风格卡通过代码配置文件进行维护。每个大师的描述块是一个经过精心编写的 Markdown 字符串，涵盖其**意象偏好、句式特征、叙事逻辑**等维度。

**配置示例（逻辑说明）：**

```plain&#x20;text
const MASTER_STYLE_CONFIG = {
  "fang_wenshan": {
    "name": "方文山",
    "markdown_content": `
### 风格指令：方文山（电影感/中国风）
1. **意象堆叠**：大量使用具有视觉色彩的古典意象（如：青花、流年、红尘、烟雨）。
2. **修辞手法**：
   - 使用“蒙太奇”式的场景切换。
   - 善用倒装句增强文艺感。
3. **韵脚偏好**：倾向于江阳韵、一七韵，追求韵律的优美感。
4. **禁令**：严禁直接引用其已知歌词原句。
    `
  },
  "li_zongsheng": {
    "name": "李宗盛",
    "markdown_content": `
### 风格指令：李宗盛（生活哲学/平实独白）
- **叙事人设**：采用“中年知己”的口吻，强调日常对白感。
- **句法特征**：
  - 散文化叙事，多用长句进行内心剖析。
  - 包含自嘲、反思性的问句。
- **情感曲线**：从琐碎的生活细节切入，最终升华为普适的人生哲理。
    `
  }
}
```

### 9.3 风格卡与 Prompt 的组装流程

在生成歌词的过程中，系统将执行以下步骤将 Markdown 代码块转化为发送给 LLM 的 `user prompt`：

1. **节点识别**：前端根据用户在 4.2.11 控件中选中的大师 ID，从配置文件中检索对应的 `markdown_content`。

2. **强度封装**：&#x20;

   * 系统会根据 4.2.13 的\*\*贴近度（Slider）\*\*数值，为这段 Markdown 内容添加一个“执行强度”包裹层。

   * 例如，若贴近度为 5（高度相似），Prompt 组装为：`请严格执行以下 Markdown 描述的写作技法：\n ${markdown_content}`。

3. **多风格融合**：若用户选择了多个风格，系统会将多个 Markdown 代码块依次拼接，并加入指令要求 LLM 寻找多者之间的平衡点。

4. **最终组装**：将处理后的风格代码块注入到包含原始素材、曲式结构、押韵设置的完整 Prompt 中,。

### 9.4 维护与扩展

* **细致化迭代**：由于采用 Markdown 格式，开发者可以不断优化代码块内的描述（如增加具体的意象列表或特定的换行逻辑），而无需更改系统逻辑。

* **大师库扩充**：系统预置罗大佑、李宗盛、林夕、方文山、唐恬、陈曦六位大师。未来通过在配置文件中增加新的 Markdown 块，即可实现无缝扩充。

***

## 10. Prompt 系统配置化方案

为了实现生成过程的**可控性**与**易迭代性**，系统将 Prompt 的维护从业务逻辑代码中解耦，采用配置文件方式进行管理。

### 10.1 System Prompt：系统内置规范配置文件

**System Prompt** 是产品的底层逻辑定义，在系统内以 `systemPromptConfig.js`（或类似的文本代码块）形式维护。它是“定死的内容”，旨在确保 LLM 表现出专业的大师级水准并遵守硬性输出规范。

* **配置内容示例：**

```plain&#x20;text
### 角色定义
你是一位精通乐理、韵律与音乐文学的资深作词大师。你理解歌词的音乐性要求（押韵、曲式、可唱性）。

### 输出硬性规范
1. 必须输出完整歌词，严禁只输出片段。
2. 必须包含明确的段落标签，如 [Verse], [Chorus], [Bridge] 等。
3. 严格遵守语言语境与押韵约束。
4. 不解释、不注释、不输出任何多余的引导性文字。

### 法律与安全
仅学习技法，严禁复刻任何已知歌词的原句。
```

非常抱歉，在之前的设计中确实遗漏了**歌曲名称**和**参考歌词**等细节。为了实现将作词创作完全“结构化与参数化”的目标，我们需要确保 **User Prompt** 模板与 PRD 4.2 节中定义的全部 **15 项**输入控件一一对应。

以下是经过修正、完整涵盖所有用户输入项的 **User Prompt** 模板及组装说明：

### 10.2 User Prompt：全参数动态模板

系统将维护一个名为 `userPromptTemplate.md` 的代码块，利用通配符将表单中的所有参数（4.2.1 - 4.2.15）注入其中。

```plain&#x20;text
### 0. 任务概览
- **歌曲名称**：{{SONG_NAME}}
- **创作模式**：{{CREATION_MODE}}
- **歌曲语言**：{{LANGUAGE}}
- **歌曲风格**：{{SONG_STYLE}}

### 1. 核心素材与背景（用户输入）
- **原始素材（主题/大意/片段）**：
{{SOURCE_MATERIAL}}
- **创作要求（情绪/禁忌）**：{{REQUIREMENTS}}
- **叙事人设**：{{PERSONA}}

### 2. 风格与技法注入（核心资产）
- **参考大师风格卡（Markdown 描述块）**：
{{MASTER_STYLE_BLOCKS}}
- **参考歌词（仅作技法参考）**：
{{REFERENCE_LYRICS}}
- **用词风格偏好**：{{WORDING_STYLE}}
- **大师风格贴近度**：{{CLOSENESS_LEVEL}} / 5

### 3. 结构与音乐性约束
- **曲式结构**：{{SONG_STRUCTURE}}
- **押韵设置**：
  - 押韵类型：{{RHYME_TYPE}}
  - 指定韵脚：{{RHYME_TONE}}
  - 是否严格押韵：{{RHYME_STRICTNESS}}
- **语言细节**：是否允许出现英文词汇：{{ALLOW_ENGLISH}}

### 4. 交付要求
- **方案数量**：请提供 {{OUTPUT_COUNT}} 个完整的输出方案。
```

***

### 10.3 参数映射与组装规则

根据源文件中的控件定义，各通配符的取值逻辑如下：

1. **基础元数据**：

   * `{{SONG_NAME}}`：获取 **4.2.1 歌曲名称**，作为 AI 创作的命题参考。

   * `{{LANGUAGE}}`、`{{SONG_STYLE}}`、`{{CREATION_MODE}}`：分别对应 **4.2.2** 至 **4.2.4** 的单选/下拉选项。

2. **文本输入类**：

   * `{{SOURCE_MATERIAL}}`：对应 **4.2.6 原始素材**。系统需按行处理用户输入，确保 AI 理解每一行都是一个参考素材。

   * `{{REQUIREMENTS}}`：对应 **4.2.7 创作要求**，包含情绪走向或禁止内容。

   * `{{REFERENCE_LYRICS}}`：对应 **4.2.12 参考歌词**。明确告知 AI 这仅作为技法参考，不强制结构对齐。

3. **风格化调节**：

   * `{{MASTER_STYLE_BLOCKS}}`：根据 **4.2.11 参考风格** 中选中的大师，从 `masterStyleConfig.js` 中提取对应的 Markdown 文本块。

   * `{{WORDING_STYLE}}`：对应 **4.2.9 用词风格**（Checkbox，最多 2 项）。

   * `{{CLOSENESS_LEVEL}}`：对应 **4.2.13 贴近度**。档位 1-5 分别对应从“只学感觉”到“文本层面高度相似”的指令强度。

4. **音乐性约束**：

   * `{{SONG_STRUCTURE}}`：对应 **4.2.5 曲式结构**，如“主歌-副歌”。

   * **押韵三件套**（`{{RHYME_...}}`）：对应 **4.2.14 押韵设置**。若“严格押韵”开关开启，需在 Prompt 中追加“必须严格执行韵脚，不得出现近音字代替”的强制要求。

   * `{{ALLOW_ENGLISH}}`：对应 **4.2.10 开关**，若为关闭，则注入“严禁出现任何英文单词”的指令。

5. **输出控制**：

   * `{{OUTPUT_COUNT}}`：对应 **4.2.15**，指示 AI 生成 1 个或 3 个方案。

***
